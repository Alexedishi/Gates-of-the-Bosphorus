## MONTENEGRO EFFECTS ##
balkfm_set_up_montenegro = {
	ig:ig_landowners = {
		leader = {
			set_ideology = ideology:ideology_royalist
		}
	}
	ig:ig_armed_forces = {
		leader = {
			set_ideology = ideology:ideology_jingoist
		}
	}
	ig:ig_devout = {
		leader = {
			set_ideology = ideology:ideology_traditionalist
		}
	}
	ig:ig_intelligentsia = {
		leader = {
			set_ideology = ideology:ideology_land_reformer
		}
	}
	ig:ig_rural_folk = {
		leader = {
			set_ideology = ideology:ideology_traditionalist
		}
	}
}

balkfm_create_ali_pasha_characters = {
	create_character = {
		# Ali Pasha Rizvanbegović, vizier of the Herzegovina Eyalet from 1833 to 1851
		first_name = Ali
		last_name = Rizvanbegovic
		historical = yes
		age = 53 # born 1783
		culture = cu:serb
		religion = rel:sunni
		interest_group = ig_landowners
		ideology = ideology_moderate
		traits = {
			pious
			arrogant
		}
		on_created = {
			set_variable = balkfm_is_ali_pasha
			place_character_in_void = 500
		}
	}
	create_character = {
		# Osman Pasha Skopljak, vizier of the Scutari Eyalet
		first_name = Osman
		last_name = Skopljak
		historical = yes
		age = 30 # no English source found documenting age
		culture = cu:serb
		religion = rel:sunni
		interest_group = ig_landowners
		ideology = ideology_moderate
		traits = {
			pious
			arrogant
		}
		on_created = {
			set_variable = balkfm_is_osman_skopljak
			place_character_in_void = 500
		}
	}
	create_character = {
		# Smaïl-aga Čengić, Ottoman lord in Bosnia, killed on the orders of the Bishop
		first_name = Smail
		last_name = Cengic
		historical = yes
		age = 56 # born 1780
		culture = cu:serb
		religion = rel:sunni
		interest_group = ig_landowners
		ideology = ideology_moderate
		traits = {
			arrogant
			war_criminal
		}
		on_created = {
			set_variable = balkfm_is_smail_aga
			place_character_in_void = 500
		}
	}
	create_character = {
		# Ömer Pasha Lütfi, military commander in Bosnia 1850-1852, executed Ali Pasha in 1850.
		first_name = Omer
		last_name = Latas
		historical = yes
		age = 30 # born 1806
		culture = cu:serb
		religion = rel:orthodox
		interest_group = ig_armed_forces
		ideology = ideology_moderate
		traits = {
			arrogant
		}
		on_created = {
			set_variable = balkfm_is_omar_pasha
			place_character_in_void = 500
		}
	}
}

balkfm_save_ali_pasha_scopes = {
	random_character_in_void = {
		limit = {
			has_variable = balkfm_is_ali_pasha
		}
		save_scope_as = ali_pasha_scope
	}
	random_character_in_void = {
		limit = {
			has_variable = balkfm_is_osman_skopljak
		}
		save_scope_as = osman_skopljak_scope
	}
	random_character_in_void = {
		limit = {
			has_variable = balkfm_is_smail_aga
		}
		save_scope_as = smail_aga_scope
	}
	random_character_in_void = {
		limit = {
			has_variable = balkfm_is_omar_pasha
		}
		save_scope_as = omar_pasha_scope
	}
}

## SERBIA EFFECTS ##
balkfm_set_monarchism_variables = {
	set_variable = {
		name = obrenovic_support_var
		value = 0
	}
	set_variable = {
		name = karadordevic_support_var
		value = 0
	}
	set_variable = {
		name = obrenovic_progress_var
		value = 0
	}
	set_variable = {
		name = karadordevic_progress_var
		value = 0
	}	
	set_variable = {
		name = ser_leading_dynasty_var
		value = 0
	}
	set_variable = obrenovic_crowned_var
	set_variable = balkfm_russia_consul_var
}
	
balkfm_calculate_dynasty_support = {
	set_variable = {
		name = obrenovic_progress_var
		value = obrenovic_progress_value
	}
	set_variable = {
		name = karadordevic_progress_var
		value = karadordevic_progress_value
	}
}

balkfm_update_dynasty_variables = {
	change_variable = {
		name = obrenovic_support_var
		add = var:obrenovic_progress_var
	}
	clamp_variable = {
		name = obrenovic_support_var
		max = 500
		min = 0
	}
	change_variable = {
		name = karadordevic_support_var
		add = var:karadordevic_progress_var
	}
	clamp_variable = {
		name = karadordevic_support_var
		max = 500
		min = 0
	}
}

balkfm_define_leading_dynasty = {
	if = {
		limit = {
			var:obrenovic_support_var >= var:karadordevic_support_var # the >= ensures the value gets updated if the two are equal. The status_desc separately checks if the two are equal
		}
		set_variable = {
			name = ser_leading_dynasty_var
			value = var:obrenovic_support_var
		}
	}
	else_if = {
		limit = {
			var:obrenovic_support_var < var:karadordevic_support_var
		}
		set_variable = {
			name = ser_leading_dynasty_var
			value = var:karadordevic_support_var
		}
	}
}

balkfm_karadordevic_takeover = {
	ruler = {
		save_scope_as = balkfm_obrenovic_scope
	}
	heir = {
		save_scope_as = balkfm_heir_scope
	}
	random_character_in_void = {
		limit = {
			has_variable = balkfm_karadordevic_tracker
		}
		save_scope_as = balkfm_karadordevic_scope
	}
	scope:balkfm_obrenovic_scope = {
		set_variable = balkfm_obrenovic_tracker
		place_character_in_void = 150 # characters will expire after 15 years
	}
	if = {
		limit = {
			exists = scope:balkfm_heir_scope
		}
		scope:balkfm_heir_scope = {
			kill_character = yes # get better parents next time bub
		}
	}
	if = {
		limit = {
			exists = scope:balkfm_karadordevic_scope
		}
		scope:balkfm_karadordevic_scope = {
			set_character_as_ruler = yes
		}
	}
	else = {
		create_character = {
			# dynamic Karađorđević
			last_name = Karadordevic
			historical = yes
			age = 30
			culture = cu:serb
			traits = {
				basic_political_operator
			}
			on_created = {
				set_variable = balkfm_karadordevic_tracker
			}
		}
	}
	remove_variable = obrenovic_crowned_var
	set_variable = karadordevic_crowned_var
	trigger_event = {
		id = balkfm.410 # House Karađorđević Takes the Throne
	}
}
	
balkfm_obrenovic_takeover = {
	ruler = {
		save_scope_as = balkfm_karadordevic_scope
	}
	heir = {
		save_scope_as = balkfm_heir_scope
	}
	random_character_in_void = {
		limit = {
			has_variable = balkfm_obrenovic_tracker
		}
		save_scope_as = balkfm_obrenovic_scope
	}
	scope:balkfm_karadordevic_scope = {
		set_variable = balkfm_karadordevic_tracker
		place_character_in_void = 150 # characters will expire after 15 years
	}	
	if = {
		limit = {
			exists = scope:balkfm_heir_scope
		}
		scope:balkfm_heir_scope = {
			kill_character = yes # get better parents next time bub
		}
	}	
	if = {
		limit = {
			exists = scope:balkfm_obrenovic_scope
		}
		scope:balkfm_obrenovic_scope = {
			set_character_as_ruler = yes
		}
	}
	else = {
		create_character = {
			# dynamic Obrenović
			last_name = "Obrenovic"
			historical = yes
			age = 30
			culture = cu:serb
			traits = {
				basic_political_operator
			}
			on_created = {
				set_variable = balkfm_obrenovic_tracker
			}
		}
	}
	remove_variable = balkfm_kaykay_var
	remove_variable = karadordevic_crowned_var
	set_variable = obrenovic_crowned_var
	trigger_event = {
		id = balkfm.411 # House Obrenović Takes the Throne
	}
}

balkfm_clean_up_ser_monarchism = { # these are all unnessecary once JE is closed
	remove_variable = obrenovic_support_var
	remove_variable = karadordevic_support_var
	remove_variable = obrenovic_progress_var
	remove_variable = karadordevic_progress_var
	remove_variable = ser_leading_dynasty_var
	remove_variable = karadordevic_crowned_var
	remove_variable = obrenovic_crowned_var
}

## BULGARIA EFFECTS ##
balkfm_create_bulgaria = { # creates BUL, followed by ERUM
	create_country = {
		tag = BUL
		origin = this
		state = s:STATE_BULGARIA.region_state:TUR
		on_created = {
		}
	}
	if = {
		limit = {
			c:TUR = {
				owns_entire_state_region = STATE_NORTHERN_THRACE
			}
		}
		create_country = {
			tag = ERUM
			origin = this
			state = s:STATE_NORTHERN_THRACE.region_state:TUR
			on_created = {
			}
		}
	}
	c:TUR = {
		create_diplomatic_pact = {
			country = c:BUL
			type = protectorate
		}
		if  = {
			limit = {
				exists = c:ERUM
			}
			create_diplomatic_pact = {
				country = c:ERUM
				type = puppet
			}
		}
	}
	c:BUL = {
		balkfm_set_bulgarian_laws = yes
		balkfm_create_bulgarian_characters = yes
		trigger_event = {
			id = balkfm.500 # The Golden Lion Awakens
			days = 1 # or else the loc breaks
		}
	}
}

balkfm_set_bulgarian_laws = {
	activate_law = law_type:law_monarchy
	activate_law = law_type:law_universal_suffrage
	activate_law = law_type:law_cultural_exclusion
	activate_law = law_type:law_state_religion
	activate_law = law_type:law_appointed_bureaucrats
	activate_law = law_type:law_professional_army
	activate_law = law_type:law_traditionalism
	activate_law = law_type:law_mercantilism
	activate_law = law_type:law_tenant_farmers
	activate_law = law_type:law_no_police
	activate_law = law_type:law_right_of_assembly
	activate_law = law_type:law_slavery_banned
}

balkfm_create_bulgarian_characters = {
	# all ages are based on age at in 1879
	create_character = {
		# Alexander I, elected to rule the Principality of Bulgaria with Russian support
		first_name = Alexander
		last_name = Battenburg
		historical = yes
		age = 22
		culture = cu:bulgarian
		religion = rel:protestant # was granted an exception to the constitution
		ig_leader = yes
		interest_group = ig_landowners
		ruler = yes
		ideology = ideology_royalist
		traits = {
			basic_political_operator
			romantic
			arrogant
		}
		on_created = {
			set_variable = balkfm_is_alex
		}
	}
	create_character = {
		# Kliment Turnovski, prominent clergyman, sat at the first Grand National Assembly and was a loud supporter of Russia
		first_name = Kliment
		last_name = Turnovski
		historical = yes
		age = 38
		culture = cu:bulgarian
		religion = rel:orthodox
		ig_leader = yes
		interest_group = ig_devout
		ideology = ideology_traditionalist 
		traits = {
			pious
			arrogant
		}
	}
	create_character = {
		# Dragan Tsankov, prominent liberal leader, 3rd Prime Minister
		first_name = Dragan
		last_name = Tsankov
		historical = yes
		age = 50
		culture = cu:bulgarian
		religion = rel:orthodox
		ig_leader = yes
		interest_group = ig_intelligentsia
		ideology = ideology_social_democrat
		traits = {
			basic_political_operator
			cautious
			tactful
		}
	}
	create_character = {
		# Konstantin Kesyakov, one of the highest ranking native Bulgarians in the early Bulgarian army; fled after the 1886 coup
		first_name = Konstantin
		last_name = Kesyakov
		historical = yes
		age = 40
		culture = cu:bulgarian
		religion = rel:orthodox
		ig_leader = yes
		interest_group = ig_armed_forces
		ideology = ideology_liberal_leader
		traits = {
			direct
			honorable
		}
	}
	create_character = {
		# Yanko Sakazov, one of the founders of the Bulgarian Social Democratic Union
		first_name = Yanko
		last_name = Sakazov
		historical = yes
		age = 22
		culture = cu:bulgarian
		religion = rel:orthodox
		ig_leader = yes
		interest_group = ig_trade_unions
		ideology = ideology_liberal_leader
		traits = {
			direct
			honorable
			basic_political_operator
		}
	}
}

balkfm_create_bulgarian_regency_characters = {
	# all ages are based on age at in 1886
	create_character = {
		# Sava Mutkurov, Bulgarian general, tried to protect Alexander's claim to the throne; welcomed Ferdinand to the throne on his arrival
		first_name = Sava
		last_name = Mutkurov
		historical = yes
		age = 34
		culture = cu:bulgarian
		religion = rel:orthodox
		ig_leader = yes
		interest_group = ig_armed_forces
		ideology = ideology_royalist
		traits = {
			direct
			honorable
		}
	}
	create_character = {
		# Petko Karavelov, 4x prime minister and ardent liberal
		first_name = Petko
		last_name = Karavelov
		historical = yes
		age = 46
		culture = cu:bulgarian
		religion = rel:orthodox
		ig_leader = yes
		interest_group = ig_intelligentsia
		ideology = ideology_social_democrat
		traits = {
			expert_political_operator
			cautious
		}
	}
	create_character = {
		# Stefan Stambolov
		first_name = Stefan
		last_name = Stambolov
		historical = yes
		age = 40
		culture = cu:bulgarian
		religion = rel:orthodox
		ig_leader = yes
		interest_group = ig_rural_folk
		ideology = ideology_authoritarian
		traits = {
			imposing
			grifter
			direct
		}
	}	
}

balkfm_create_bulgarian_royals = {
	# all ages are based on age at in 1886
	create_character = {
		# Alexander I, elected to rule the Principality of Bulgaria with Russian support
		first_name = Ferdinand
		last_name = Saxe-Coburg_and_Gotha-Kohary
		historical = yes
		age = 25
		culture = cu:south_german
		religion = rel:catholic # seriously what was so hard about giving the orthodox an orthodox king smh
		ig_leader = yes
		interest_group = ig_landowners
		ruler = yes
		ideology = ideology_royalist
		traits = {
			basic_political_operator
			romantic
			brave
		}
		on_created = {
			set_variable = balkfm_is_ferdinand
			place_character_in_void = 12
		}
	}
}
