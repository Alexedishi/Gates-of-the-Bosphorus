## GENERAL EFFECTS ##

balkfm_initialize_construction_effect = {
	set_variable = {
		name = balkfm_construction_var
		value = 0
	}
	set_variable = {
		name = balkfm_construction_points_var
		value = 0
	}
	set_variable = {
		name = balkfm_construction_progress_var
		value = 0
	}
}

balkfm_calculate_construction_effect = {
	set_variable = {
		name = balkfm_construction_points_var
		value = balkfm_construction_points_value
	}
	set_variable = {
		name = balkfm_construction_progress_var
		value = balkfm_construction_progress_value
	}
}

balkfm_push_construction_effect = {
	change_variable = {
		name = balkfm_construction_var
		add = var:balkfm_construction_progress_var
	}
}

balkfm_clean_up_construction_effect = {
	hidden_effect = {
		remove_variable = balkfm_construction_points_var
		remove_variable = balkfm_construction_progress_var
		remove_modifier = modifier_balkfm_construction_1
		remove_modifier = modifier_balkfm_construction_2
		remove_modifier = modifier_balkfm_construction_3
	}
}

balkfm_set_up_ottoman_legacies_effect = {
	if = {
		limit = {
			NOT = {
				has_variable = balkfm_ottoman_legacies_started # There's a tiny corner case where Bulgaria can fire this effect twice
			}
		}
		trigger_event = {
			id = balkfm.100 # An Ottoman Legacy
			days = 15 # Provides a buffer from Day 1 events
		}
#		add_journal_entry = {
#			type = je_balkfm_tax_reform
#		}
		add_journal_entry = {
			type = je_balkfm_land_reform
		}
		add_journal_entry = {
			type = je_balkfm_civic_reform
		}
		add_journal_entry = {
			type = je_balkfm_brigandage
		}
		if = {
			limit = {
				country_has_primary_culture = cu:romanian
			}
			add_journal_entry = {
				type = je_balkfm_state_reform
			}
			add_journal_entry = {
				type = je_balkfm_economic_reform
			}
			add_journal_entry = {
				type = je_balkfm_social_reform
			}
		}
		set_variable = balkfm_ottoman_legacies_started
	}
}

balkfm_add_nationalism_progress_effect = {
	if = {
		limit = {
			NOT = {
				has_technology_researched = mass_communication
			}
		}
		add_technology_progress = { 
			progress = 1500
			technology = mass_communication
		}
	}
	else_if = {
		limit = {
			NOT = {
				has_technology_researched = nationalism
			}
		}
		add_technology_progress = { 
			progress = 4000
			technology = nationalism
		}
	}
	else_if = {
		limit = {
			NOT = {
				has_technology_researched = pan-nationalism
			}
		}
		add_technology_progress = { 
			progress = 10000
			technology = pan-nationalism
		}
	}
}

##YUGOSLAVIA EFFECTS ##
balkfm_determine_yugoslav_leader_effect = {
	ordered_country = {
		limit = {
			has_journal_entry = je_balkfm_nacertanije
		}
		order_by = prestige
		max = 1
		check_range_bounds = no
		save_scope_as = balkfm_yugoslav_leader_scope
	}
	scope:balkfm_yugoslav_leader_scope = {
		set_global_variable = {
			name = balkfm_yugoslav_leader_prestige_var
			value = root.prestige
		}
	}
	set_global_variable = {
		name = balkfm_yugoslav_leader_var
		value = scope:balkfm_yugoslav_leader_scope
	}
}

balkfm_create_yugoslav_rebel_effect = {
	scope:balkfm_provocation_state_scope = {
		switch = {
			trigger = state_region
			# Serb Homelands
			s:STATE_NORTHERN_SERBIA = {
				create_country = {
					tag = SER
					origin = scope:balkfm_provocation_owner_scope
					state = scope:balkfm_provocation_state_scope
					on_created = {
						set_variable = balkfm_rebellion_tag_tracker
						turkfm_set_rebellion_laws = yes
					}
				}
			}
			s:STATE_SOUTHERN_SERBIA = {
				create_country = {
					tag = NISH
					origin = scope:balkfm_provocation_owner_scope
					state = scope:balkfm_provocation_state_scope
					on_created = {
						set_variable = balkfm_rebellion_tag_tracker
						turkfm_set_rebellion_laws = yes
					}
				}
			}
			s:STATE_SKOPIA = {
				create_country = {
					tag = NMAC
					origin = scope:balkfm_provocation_owner_scope
					state = scope:balkfm_provocation_state_scope
					on_created = {
						set_variable = balkfm_rebellion_tag_tracker
						turkfm_set_rebellion_laws = yes
					}
				}
			}
			s:STATE_BOSNIA = {
				create_country = {
					tag = BOS
					origin = scope:balkfm_provocation_owner_scope
					state = scope:balkfm_provocation_state_scope
					on_created = {
						set_variable = balkfm_rebellion_tag_tracker
						turkfm_set_rebellion_laws = yes
					}
				}
			}
			s:STATE_BANAT = {
				create_country = {
					tag = SER_VOJ
					origin = scope:balkfm_provocation_owner_scope
					state = scope:balkfm_provocation_state_scope
					on_created = {
						set_variable = balkfm_rebellion_tag_tracker
						turkfm_set_rebellion_laws = yes
					}
				}
			}
			s:STATE_DELVIDEK = {
				create_country = {
					tag = SER_VOJ
					origin = scope:balkfm_provocation_owner_scope
					state = scope:balkfm_provocation_state_scope
					on_created = {
						set_variable = balkfm_rebellion_tag_tracker
						turkfm_set_rebellion_laws = yes
					}
				}
			}
			s:STATE_MONTENEGRO = {
				create_country = {
					tag = MON
					origin = scope:balkfm_provocation_owner_scope
					state = scope:balkfm_provocation_state_scope
					on_created = {
						set_variable = balkfm_rebellion_tag_tracker
						turkfm_set_rebellion_laws = yes
					}
				}
			}
			
			# Bulgarian Homelands
			s:STATE_BULGARIA = {
				create_country = {
					tag = BUL
					origin = scope:balkfm_provocation_owner_scope
					state = scope:balkfm_provocation_state_scope
					on_created = {
						set_variable = balkfm_rebellion_tag_tracker
						turkfm_set_rebellion_laws = yes
					}
				}
			}
			
			s:STATE_NORTHERN_THRACE = {
				create_country = {
					tag = ERUM
					origin = scope:balkfm_provocation_owner_scope
					state = scope:balkfm_provocation_state_scope
					on_created = {
						set_variable = balkfm_rebellion_tag_tracker
						turkfm_set_rebellion_laws = yes
					}
				}
			}
			s:STATE_DOBRUDJA = {
				create_country = {
					tag = SILI
					origin = scope:balkfm_provocation_owner_scope
					state = scope:balkfm_provocation_state_scope
					on_created = {
						set_variable = balkfm_rebellion_tag_tracker
						turkfm_set_rebellion_laws = yes
					}
				}
			}
			s:STATE_WESTERN_THRACE = {
				create_country = {
					tag = THRA
					origin = scope:balkfm_provocation_owner_scope
					state = scope:balkfm_provocation_state_scope
					on_created = {
						set_variable = balkfm_rebellion_tag_tracker
						turkfm_set_rebellion_laws = yes
					}
				}
			}
			
			# Croat Homelands
			s:STATE_CROATIA = {
				create_country = {
					tag = CRO
					origin = scope:balkfm_provocation_owner_scope
					state = scope:balkfm_provocation_state_scope
					on_created = {
						set_variable = balkfm_rebellion_tag_tracker
						turkfm_set_rebellion_laws = yes
					}
				}
			}
			s:STATE_DALMATIA = {
				create_country = {
					tag = CRO_DAL
					origin = scope:balkfm_provocation_owner_scope
					state = scope:balkfm_provocation_state_scope
					on_created = {
						set_variable = balkfm_rebellion_tag_tracker
						turkfm_set_rebellion_laws = yes
					}
				}
			}
			s:STATE_SLAVONIA = {
				create_country = {
					tag = CRO_SLA
					origin = scope:balkfm_provocation_owner_scope
					state = scope:balkfm_provocation_state_scope
					on_created = {
						set_variable = balkfm_rebellion_tag_tracker
						turkfm_set_rebellion_laws = yes
					}
				}
			}
			
			#Slovene Homelands
			s:STATE_SLOVENIA = {
				create_country = {
					tag = SLO
					origin = scope:balkfm_provocation_owner_scope
					state = scope:balkfm_provocation_state_scope
					on_created = {
						set_variable = balkfm_rebellion_tag_tracker
						turkfm_set_rebellion_laws = yes
					}
				}
			}
			s:STATE_SLOVENIA = {
				create_country = {
					tag = SLO
					origin = scope:balkfm_provocation_owner_scope
					state = scope:balkfm_provocation_state_scope
					on_created = {
						set_variable = balkfm_rebellion_tag_tracker
						turkfm_set_rebellion_laws = yes
					}
				}
			}
			s:STATE_ISTRIA = {
				create_country = {
					tag = SLO_IST
					origin = scope:balkfm_provocation_owner_scope
					state = scope:balkfm_provocation_state_scope
					on_created = {
						set_variable = balkfm_rebellion_tag_tracker
						turkfm_set_rebellion_laws = yes
					}
				}
			}
		}
	}
}

balkfm_cleanup_yugoslavism_effect = {
	remove_global_variable = balkfm_yugoslav_leader_prestige_var
	remove_global_variable = balkfm_yugoslav_leader_var
}

balkfm_rile_up_yugoslavs_effect = {
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = serb
			}
		}
		add_radicals_in_state = {
			culture = cu:serb
			value = large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = croat
			}
		}
		add_radicals_in_state = {
			culture = cu:croat
			value = large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = bosniak
			}
		}
		add_radicals_in_state = {
			culture = cu:bosniak
			value = large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = slovene
			}
		}
		add_radicals_in_state = {
			culture = cu:slovene
			value = large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = bulgarian
			}
		}
		add_radicals_in_state = {
			culture = cu:bulgarian
			value = large_radicals
		}
	}
}

balkfm_calm_down_yugoslavs_effect = {
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = serb
			}
		}
		add_loyalists_in_state = {
			culture = cu:serb
			value = large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = croat
			}
		}
		add_loyalists_in_state = {
			culture = cu:croat
			value = large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = bosniak
			}
		}
		add_loyalists_in_state = {
			culture = cu:bosniak
			value = large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = slovene
			}
		}
		add_loyalists_in_state = {
			culture = cu:slovene
			value = large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = bulgarian
			}
		}
		add_loyalists_in_state = {
			culture = cu:bulgarian
			value = large_radicals
		}
	}
}

balkfm_sad_yugoslavs_effect = {
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = serb
			}
		}
		add_radicals = {
			culture = cu:serb
			value = medium_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = croat
			}
		}
		add_radicals = {
			culture = cu:croat
			value = medium_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = bosniak
			}
		}
		add_radicals = {
			culture = cu:bosniak
			value = medium_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = slovene
			}
		}
		add_radicals = {
			culture = cu:slovene
			value = medium_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = bulgarian
			}
		}
		add_radicals = {
			culture = cu:bulgarian
			value = medium_radicals
		}
	}
}

balkfm_very_sad_yugoslavs_effect = {
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = serb
			}
		}
		add_radicals = {
			culture = cu:serb
			value = large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = croat
			}
		}
		add_radicals = {
			culture = cu:croat
			value = large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = bosniak
			}
		}
		add_radicals = {
			culture = cu:bosniak
			value = large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = slovene
			}
		}
		add_radicals = {
			culture = cu:slovene
			value = large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = bulgarian
			}
		}
		add_radicals = {
			culture = cu:bulgarian
			value = large_radicals
		}
	}
}

balkfm_happy_yugoslavs_effect = {
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = serb
			}
		}
		add_loyalists = {
			culture = cu:serb
			value = medium_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = croat
			}
		}
		add_loyalists = {
			culture = cu:croat
			value = medium_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = bosniak
			}
		}
		add_loyalists = {
			culture = cu:bosniak
			value = medium_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = slovene
			}
		}
		add_loyalists = {
			culture = cu:slovene
			value = medium_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = bulgarian
			}
		}
		add_loyalists = {
			culture = cu:bulgarian
			value = medium_radicals
		}
	}
}

balkfm_very_happy_yugoslavs_effect = {
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = serb
			}
		}
		add_loyalists = {
			culture = cu:serb
			value = large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = croat
			}
		}
		add_loyalists = {
			culture = cu:croat
			value = large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = bosniak
			}
		}
		add_loyalists = {
			culture = cu:bosniak
			value = large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = slovene
			}
		}
		add_loyalists = {
			culture = cu:slovene
			value = large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = bulgarian
			}
		}
		add_loyalists = {
			culture = cu:bulgarian
			value = large_radicals
		}
	}
}

## MONTENEGRO EFFECTS ##
balkfm_set_up_montenegro_effect = {
	every_interest_group = {
		limit = {	
			law_stance = {
				law = law_type:law_monarchy
				value < neutral
			}
		}
		leader = {
			set_ideology = ideology:ideology_moderate # non-punitive way to wipe out pro-theocracy and pro-democracy at game start
		}
	}
	ig:ig_landowners = {
		leader = {
			set_ideology = ideology:ideology_royalist
		}
	}
	ig:ig_armed_forces = {
		leader = {
			set_ideology = ideology:ideology_jingoist_leader
		}
	}
	ig:ig_devout = {
		leader = {
			set_ideology = ideology:ideology_traditionalist
		}
	}
	ig:ig_intelligentsia = {
		leader = {
			set_ideology = ideology:ideology_land_reformer
		}
	}
	ig:ig_rural_folk = {
		leader = {
			set_ideology = ideology:ideology_traditionalist
		}
	}
}

balkfm_initialize_black_mountain_effect = {
	set_global_variable = {
		name = balkfm_karadag_var
		value = 500
	}
	set_global_variable = {
		name = balkfm_border_incursion_var
		value = 0
	}	
	set_variable = {
		name = balkfm_mon_karadag_progress_var
		value = 0
	}
	set_variable = {
		name = balkfm_tur_karadag_progress_var
		value = 0
	}
	set_variable = {
		name = balkfm_total_karadag_progress_var
		value = 0
	}
	set_variable = {
		name = balkfm_mon_provinces_var
		value = 1
	}
	set_variable = {
		name = balkfm_tur_provinces_var
		value = 3
	}
	set_variable = {
		name = balkfm_next_province_var
		value = 2
	}
	set_global_variable = { # Blocking for balkfm.330
		name = balkfm_border_event_cooldown_var
		months = 14
	}
}

balkfm_initialize_karadag_effect = {
	set_global_variable = {
		name = balkfm_karadag_var
		value = 500
	}
	set_variable = {
		name = balkfm_mon_karadag_progress_var
		value = 0
	}
	set_variable = {
		name = balkfm_tur_karadag_progress_var
		value = 0
	}
	set_variable = {
		name = balkfm_total_karadag_progress_var
		value = 0
	}
	set_variable = {
		name = balkfm_mon_provinces_var
		value = 1
	}
	set_variable = {
		name = balkfm_tur_provinces_var
		value = 3
	}
	set_variable = {
		name = balkfm_next_province_var
		value = 1
	}
}

balkfm_update_karadag_variables_effect = {
	set_variable = {
		name = balkfm_mon_karadag_progress_var
		value = balkfm_mon_karadag_progress_value
	}
	set_variable = {
		name = balkfm_tur_karadag_progress_var
		value = balkfm_tur_karadag_progress_value
	}
	set_variable = {
		name = balkfm_total_karadag_progress_var
		value = balkfm_total_karadag_progress_value
	}
	set_variable = {
		name = balkfm_mon_provinces_var
		value = balkfm_mon_provinces_value
	}
	set_variable = {
		name = balkfm_tur_provinces_var
		value = balkfm_tur_provinces_value
	}
}

balkfm_mon_next_province_effect = {
	# This is gross, but the province iterator doesn't interate (and would probably be less efficient than this scripting)
	if = {
		limit = {
			p:x8C6292 = { # Cetinje
				AND = {
					owner != c:MON
					owner = c:TUR
				}
			}
		}
		set_variable = {
			name = balkfm_next_province_var
			value = 1 # Cetinje
		}
	}
	else_if = {
		limit = {
			p:x8C6292 = { # Cetinje
				owner = c:MON
			}
			p:xF5F6C2 = { # Niksic
				AND = {
					owner != c:MON
					owner = c:TUR
				}
			}
		}
		set_variable = {
			name = balkfm_next_province_var
			value = 2 # Niksic
		}
	}
	else_if = {
		limit = {
			p:x8C6292 = { # Cetinje
				owner = c:MON
			}
			p:xF5F6C2 = { # Niksic
				owner = c:MON
			}
			p:x446E84 = { # Podgorica
				AND = {
					owner != c:MON
					owner = c:TUR
				}
			}
		}
		set_variable = {
			name = balkfm_next_province_var
			value = 3 # Podgorica
		}
	}
	else_if = {
		limit = {
			p:x8C6292 = { # Cetinje
				owner = c:MON
			}
			p:xF5F6C2 = { # Niksic
				owner = c:MON
			}
			p:x446E84 = { # Podgorica
				owner = c:MON
			}
			p:xA12F82 = { # Pljevla
				AND = {
					owner != c:MON
					owner = c:TUR
				}
			}
		}
		set_variable = {
			name = balkfm_next_province_var
			value = 4 # Pljevla
		}
	}
	else_if = {
		limit = {
			p:x8C6292 = { # Cetinje
				owner = c:MON
			}
			p:xF5F6C2 = { # Niksic
				owner = c:MON
			}
			p:x446E84 = { # Podgorica
				owner = c:MON
			}
			p:xA12F82 = { # Pljevla
				owner = c:MON
			}
			p:x90A0E0 = { # Kotor
				AND = {
					owner != c:MON
					owner = c:TUR
				}
			}
		}
		set_variable = {
			name = balkfm_next_province_var
			value = 5 # Kotor
		}
	}
	else = {
		set_variable = {
			name = balkfm_next_province_var
			value = 0
		}
	}
}

balkfm_tur_next_province_effect = {
	# Still gross, but in somewhat reverse order
	if = {
		limit = {
			p:xA12F82 = { # Pljevla
				AND = {
					owner != c:TUR
					owner = c:MON
				}
			}
		}
		set_variable = {
			name = balkfm_next_province_var
			value = 4 # Pljevla
		}
	}
	else_if = {
		limit = {
			p:xA12F82 = { # Pljevla
				owner = c:TUR
			}
			p:x446E84 = { # Podgorica
				AND = {
					owner != c:TUR
					owner = c:MON
				}
			}
		}
		set_variable = {
			name = balkfm_next_province_var
			value = 3 # Podgorica
		}
	}
	else_if = {
		limit = {
			p:xA12F82 = { # Pljevla
				owner = c:TUR
			}
			p:x446E84 = { # Podgorica
				owner = c:TUR
			}
			p:xF5F6C2 = { # Niksic
				AND = {
					owner != c:TUR
					owner = c:MON
				}
			}
		}
		set_variable = {
			name = balkfm_next_province_var
			value = 2 # Niksic
		}
	}
	else_if = {
		limit = {
			p:xA12F82 = { # Pljevla
				owner = c:TUR
			}
			p:x446E84 = { # Podgorica
				owner = c:TUR
			}
			p:xF5F6C2 = { # Niksic
				owner = c:TUR
			}
			p:x8C6292 = { # Cetinje
				AND = {
					owner != c:TUR
					owner = c:MON
				}
			}
		}
		set_variable = {
			name = balkfm_next_province_var
			value = 1 # Cetinje
		}
	}
	else_if = {
		limit = {
			p:xA12F82 = { # Pljevla
				owner = c:TUR
			}
			p:x446E84 = { # Podgorica
				owner = c:TUR
			}
			p:xF5F6C2 = { # Niksic
				owner = c:TUR
			}
			p:x8C6292 = { # Cetinje
				owner = c:TUR
			}
			p:x90A0E0 = { # Kotor
				AND = {
					owner != c:TUR
					owner = c:MON
				}
			}
		}
		set_variable = {
			name = balkfm_next_province_var
			value = 5 # Kotor
		}
	}
	else = {
		set_variable = {
			name = balkfm_next_province_var
			value = 0
		}
	}
}

balkfm_claim_province_effect = {
	if = {
		limit = {
			var:balkfm_next_province_var = 1
		}
		s:STATE_MONTENEGRO = {
			set_owner_of_provinces = {
				country = root
				provinces = {
					x8C6292 # Cetinje
				}
			}
		}
	}
	else_if = {
		limit = {
			global_var:balkfm_next_province_var = 2
		}
		s:STATE_MONTENEGRO = {
			set_owner_of_provinces = {
				country = root
				provinces = {
					xF5F6C2 # Niksic
				}
			}
		}
	}
	else_if = {
		limit = {
			global_var:balkfm_next_province_var = 3
		}
		s:STATE_MONTENEGRO = {
			set_owner_of_provinces = {
				country = root
				provinces = {
					x446E84 # Podgorica
				}
			}
		}
	}
	else_if = {
		limit = {
			global_var:balkfm_next_province_var = 4
		}
		s:STATE_MONTENEGRO = {
			set_owner_of_provinces = {
				country = root
				provinces = {
					xA12F82 # Pljevla
				}
			}
		}
	}
	else_if = {
		limit = {
			global_var:balkfm_next_province_var = 5
		}
		s:STATE_MONTENEGRO = {
			set_owner_of_provinces = {
				country = root
				provinces = {
					x90A0E0 # Kotor
				}
			}
		}
	}
}

balkfm_karadag_progressbar_effect = {
	c:MON = {
		je:je_balkfm_mon_black_mountain = {
			set_bar_progress = {
				name = balkfm_mon_border_progress_bar
				value = global_var:balkfm_karadag_var
			}
		}
	}
	c:TUR = {
		je:je_balkfm_tur_karadag = {
			set_bar_progress = {
				name = balkfm_mon_border_progress_bar
				value = global_var:balkfm_karadag_var
			}
		}
	}
}

balkfm_minor_border_progress_gain_effect = {
	if = {
		limit = {
			has_journal_entry = je_balkfm_mon_black_mountain
		}
		custom_tooltip = balkfm_border_influence_gain_50_tt
		change_global_variable = {
			name = balkfm_karadag_var
			add = 50
		}
		clamp_global_variable = {
			name = balkfm_karadag_var
			max = 1000
			min = 0
		}
		balkfm_karadag_progressbar_effect = yes
	}
	if = {
		limit = {
			has_journal_entry = je_balkfm_tur_karadag
		}
		custom_tooltip = balkfm_border_influence_gain_50_tt
		change_global_variable = {
			name = balkfm_karadag_var
			subtract = 50
		}
		clamp_global_variable = {
			name = balkfm_karadag_var
			max = 1000
			min = 0
		}
		balkfm_karadag_progressbar_effect = yes
	}
}

balkfm_minor_border_progress_loss_effect = {
	if = {
		limit = {
			has_journal_entry = je_balkfm_mon_black_mountain
		}
		custom_tooltip = balkfm_border_influence_lose_50_tt
		change_global_variable = {
			name = balkfm_karadag_var
			subtract = 50
		}
		clamp_global_variable = {
			name = balkfm_karadag_var
			max = 1000
			min = 0
		}
		balkfm_karadag_progressbar_effect = yes
	}
	if = {
		limit = {
			has_journal_entry = je_balkfm_tur_karadag
		}
		custom_tooltip = balkfm_border_influence_lose_50_tt
		change_global_variable = {
			name = balkfm_karadag_var
			add = 50
		}
		clamp_global_variable = {
			name = balkfm_karadag_var
			max = 1000
			min = 0
		}
		balkfm_karadag_progressbar_effect = yes
	}
}

balkfm_incursion_scopes_effect = {
	# Montenegrin Incursion
	if = {
		limit = {
			global_var:balkfm_border_incursion_var = 1
		}
		c:MON = {
			save_scope_as = balkfm_border_attacker_scope
		}
		c:TUR = {
			save_scope_as = balkfm_border_defender_scope
		}
	}
	# Ottoman Incursion
	else_if = {
		limit = {
			global_var:balkfm_border_incursion_var = 2
		}
		c:MON = {
			save_scope_as = balkfm_border_defender_scope
		}
		c:TUR = {
			save_scope_as = balkfm_border_attacker_scope
		}
	}
}

balkfm_generate_captive_effect = {
	random_list = {
		5 = { # Bosnian Noble
			trigger = {
				c:TUR = {
					has_state_in_state_region = STATE_BOSNIA
				}
			}
			create_character = {
				template = template_balkfm_captive_bosnian
			}
		}
		5 = { # Albanian Noble
			trigger = {
				c:TUR = {
					has_state_in_state_region = STATE_ALBANIA
				}
			}
			create_character = {
				template = template_balkfm_captive_albanian
			}
		}
		5 = { # Serbian Noble
			trigger = {
				c:TUR = {
					has_state_in_state_region = STATE_SOUTHERN_SERBIA
				}
			}
			create_character = {
				template = template_balkfm_captive_serbian
			}
		}
	}
}

balkfm_update_captive_variables_effect = {
	remove_variable = balkfm_captive_1_var
	remove_variable = balkfm_captive_2_var
	remove_variable = balkfm_captive_3_var
	remove_variable = balkfm_captive_4_var
	random_character_in_void = {
		limit = {
			OR = {
				has_template = template_balkfm_captive_bosnian
				has_template = template_balkfm_captive_albanian
				has_template = template_balkfm_captive_serbian
			}
		}
		save_scope_as = balkfm_captive_1_scope
	}
	random_character_in_void = {
		limit = {
			OR = {
				has_template = template_balkfm_captive_bosnian
				has_template = template_balkfm_captive_albanian
				has_template = template_balkfm_captive_serbian
			}
			scope:balkfm_captive_1_scope != this
		}
		save_scope_as = balkfm_captive_2_scope
	}
	random_character_in_void = {
		limit = {
			OR = {
				has_template = template_balkfm_captive_bosnian
				has_template = template_balkfm_captive_albanian
				has_template = template_balkfm_captive_serbian
			}
			scope:balkfm_captive_1_scope != this
			scope:balkfm_captive_2_scope != this
		}
		save_scope_as = balkfm_captive_3_scope
	}
	random_character_in_void = {
		limit = {
			OR = {
				has_template = template_balkfm_captive_bosnian
				has_template = template_balkfm_captive_albanian
				has_template = template_balkfm_captive_serbian
			}
			scope:balkfm_captive_1_scope != this
			scope:balkfm_captive_2_scope != this
			scope:balkfm_captive_3_scope != this
		}
		save_scope_as = balkfm_captive_4_scope
	}
	if = {
		limit = {	
			exists = scope:balkfm_captive_1_scope
		}
		set_variable = {
			name = balkfm_captive_1_var
			value = scope:balkfm_captive_1_scope
		}
	}
	if = {
		limit = {	
			exists = scope:balkfm_captive_2_scope
		}
		set_variable = {
			name = balkfm_captive_2_var
			value = scope:balkfm_captive_2_scope
		}
	}
	if = {
		limit = {	
			exists = scope:balkfm_captive_3_scope
		}
		set_variable = {
			name = balkfm_captive_3_var
			value = scope:balkfm_captive_3_scope
		}
	}
	if = {
		limit = {	
			exists = scope:balkfm_captive_4_scope
		}
		set_variable = {
			name = balkfm_captive_4_var
			value = scope:balkfm_captive_4_scope
		}
	}
}

balkfm_create_tribal_rebellion_effect = {
	if = {
		limit = {
			var:balkfm_next_province_var = 1
		}
		create_country = {
			tag = MON_CEN
			origin = this
			province = p:x8C6292 # Cetinje
			on_created = {
				set_variable = balkfm_tribal_rebel_var
			}
		}
		balkfm_tur_next_province_effect = yes
		c:MON = {
			balkfm_mon_next_province_effect = yes
			post_notification = notification_balkfm_tribe_rebellion
		}
	}
	else_if = {
		limit = {
			var:balkfm_next_province_var = 2
		}
		create_country = {
			tag = MON_NIK
			origin = this
			province = p:xF5F6C2 # Niksic
			on_created = {
				set_variable = balkfm_tribal_rebel_var
			}
		}
		balkfm_tur_next_province_effect = yes
		c:MON = {
			balkfm_mon_next_province_effect = yes
			post_notification = notification_balkfm_tribe_rebellion
		}
	}
	else_if = {
		limit = {
			var:balkfm_next_province_var = 3
		}
		create_country = {
			tag = MON_POD
			origin = this
			province = p:x446E84 # Podgorica
			on_created = {
				set_variable = balkfm_tribal_rebel_var
			}
		}
		balkfm_tur_next_province_effect = yes
		c:MON = {
			balkfm_mon_next_province_effect = yes
			post_notification = notification_balkfm_tribe_rebellion
		}
	}
	else_if = {
		limit = {
			var:balkfm_next_province_var = 4
		}
		create_country = {
			tag = MON_PLJ
			origin = this
			province = p:xA12F82 # Pljevla
			on_created = {
				set_variable = balkfm_tribal_rebel_var
			}
		}
		balkfm_tur_next_province_effect = yes
		c:MON = {
			balkfm_mon_next_province_effect = yes
			post_notification = notification_balkfm_tribe_rebellion
		}
	}
	else_if = {
		limit = {
			var:balkfm_next_province_var = 5
		}
		create_country = {
			tag = MON_KOT
			origin = this
			province = p:x90A0E0 # Kotor
			on_created = {
				set_variable = balkfm_tribal_rebel_var
			}
		}
		balkfm_tur_next_province_effect = yes
		c:MON = {
			balkfm_mon_next_province_effect = yes
			post_notification = notification_balkfm_tribe_rebellion
		}
	}
}

balkfm_black_mountain_cleanup_effect = {
	remove_global_variable = balkfm_karadag_var
	remove_global_variable = balkfm_border_incursion_var
	remove_global_variable = balkfm_border_event_cooldown_var
	remove_variable = balkfm_mon_karadag_progress_var
	remove_variable = balkfm_tur_karadag_progress_var
	remove_variable = balkfm_total_karadag_progress_var
	remove_variable = balkfm_mon_provinces_var
	remove_variable = balkfm_tur_provinces_var
	remove_variable = balkfm_next_province_var
}

balkfm_karadag_cleanup_effect = {
	remove_variable = balkfm_mon_karadag_progress_var
	remove_variable = balkfm_tur_karadag_progress_var
	remove_variable = balkfm_total_karadag_progress_var
	remove_variable = balkfm_mon_provinces_var
	remove_variable = balkfm_tur_provinces_var
	remove_variable = balkfm_next_province_var
}

balkfm_save_ali_pasha_scopes = {
	random_character_in_void = {
		limit = {
			has_template = template_balkfm_rizvanbegovic_ali
		}
		save_scope_as = ali_pasha_scope
	}
	random_character_in_void = {
		limit = {
			has_template = template_balkfm_cengic_smail
		}
		save_scope_as = smail_aga_scope
	}
}

## SERBIA EFFECTS ##

balkfm_set_up_serbia_effect = {
	ig:ig_landowners = {
		leader = {
			set_ideology = ideology:ideology_moderate
		}
	}
	ig:ig_armed_forces = {
		leader = {
			set_ideology = ideology:ideology_liberal_leader
		}
	}
	ig:ig_rural_folk = {
		leader = {
			set_ideology = ideology:ideology_liberal_leader
		}
	}
	add_modifier = {
		name = modifier_balkfm_miletas_rebellion
		months = long_modifier_time
		is_decaying = yes
	}
}

balkfm_initialize_dynasty_variables_effect = {
	set_variable = {
		name = balkfm_obrenovic_support_var
		value = 0
	}
	set_variable = {
		name = balkfm_karadordevic_support_var
		value = 0
	}
	set_variable = {
		name = balkfm_leading_dynasty_var
		value = 0
	}
	set_variable = balkfm_russia_consul_var
}

balkfm_update_dynasty_variables_effect = {
	change_variable = {
		name = balkfm_obrenovic_support_var
		add = balkfm_obrenovic_progress_value
	}
	clamp_variable = {
		name = balkfm_obrenovic_support_var
		max = 500
		min = 0
	}
	change_variable = {
		name = balkfm_karadordevic_support_var
		add = balkfm_karadordevic_progress_value
	}
	clamp_variable = {
		name = balkfm_karadordevic_support_var
		max = 500
		min = 0
	}
	balkfm_update_leading_dynasty_effect = yes
}

balkfm_update_leading_dynasty_effect = {
	if = {
		limit = {
			balkfm_has_obrenovic_ruler_trigger = yes
		}
		set_variable = {
			name = balkfm_leading_dynasty_var
			value = var:balkfm_obrenovic_support_var
		}
	}
	else_if = {
		limit = {
			balkfm_has_karadordevic_ruler_trigger = yes
		}
		set_variable = {
			name = balkfm_leading_dynasty_var
			value = var:balkfm_karadordevic_support_var
		}
	}
}

balkfm_dynasty_monthly_maintenance_effect = {
	if = {
		limit = {
			NOT = {
				exists = heir
			}
			OR = {
				balkfm_has_karadordevic_ruler_trigger = yes
				balkfm_has_obrenovic_ruler_trigger = yes
			}
		}
		if = {
			limit = {
				balkfm_has_karadordevic_ruler_trigger = yes
			}
			create_character = {
				template = template_balkfm_karadordevic_dynamic_heir
			}
		}
		else_if = {
			limit = {
				balkfm_has_obrenovic_ruler_trigger = yes
			}
			create_character = {
				template = template_balkfm_obrenovic_dynamic_heir
			}
		}
	}
}

balkfm_minor_dynasty_support_loss_effect = {
	if = {
		limit = {
			balkfm_has_obrenovic_ruler_trigger = yes
		}
		custom_tooltip = {
			text = balkfm_obrenovic_minus_50
			hidden_effect = {
				change_variable = {
					name = balkfm_obrenovic_support_var
					subtract = 50
				}
			}
		}
	}
	else_if = {
		limit = {
			balkfm_has_karadordevic_ruler_trigger = yes
		}
		custom_tooltip = {
			text = balkfm_karadordevic_minus_50
			hidden_effect = {
				change_variable = {
					name = balkfm_karadordevic_support_var
					subtract = 50
				}
			}
		}
	}
	balkfm_update_leading_dynasty_effect = yes
}

balkfm_minor_dynasty_support_gain_effect = {
	if = {
		limit = {
			balkfm_has_obrenovic_ruler_trigger = yes
		}
		custom_tooltip = {
			text = balkfm_obrenovic_plus_50
			hidden_effect = {
				change_variable = {
					name = balkfm_obrenovic_support_var
					add = 50
				}
			}
		}
	}
	else_if = {
		limit = {
			balkfm_has_karadordevic_ruler_trigger = yes
		}
		custom_tooltip = {
			text = balkfm_karadordevic_plus_50
			hidden_effect = {
				change_variable = {
					name = balkfm_karadordevic_support_var
					add = 50
				}
			}
		}
	}
	balkfm_update_leading_dynasty_effect = yes
}

balkfm_cleanup_dynasty_variables_effect = {
	remove_variable = balkfm_obrenovic_support_var
	remove_variable = balkfm_karadordevic_support_var
	remove_variable = balkfm_leading_dynasty_var
}

## BULGARIA EFFECTS ##
balkfm_create_bulgaria = { # creates BUL, used for the Great Eastern Crisis
	if = {
		limit = {
			owns_entire_state_region = STATE_BULGARIA
		}
		create_country = {
			tag = BUL
			origin = this
			state = s:STATE_BULGARIA.region_state:TUR
			on_created = {
				balkfm_set_bulgarian_laws = yes
				balkfm_set_up_ottoman_legacies_effect = yes
			}
		}
	}
	if = {
		limit = {
			exists = c:BUL
			owns_entire_state_region = STATE_NORTHERN_THRACE
		}
		s:STATE_NORTHERN_THRACE = {
			every_scope_state = {
				limit = {
					owner = {
						c:TUR = this
					}
				}
				set_state_owner = c:BUL
			}
		}
	}
}

balkfm_create_bulgaria_test = { # creates BUL, followed by ERUM. Used for testing purposes in balkfm.005.
	create_country = {
		tag = BUL
		origin = this
		state = s:STATE_BULGARIA.region_state:TUR
		on_created = {
		}
	}
	if = {
		limit = {
			c:TUR = {
				owns_entire_state_region = STATE_NORTHERN_THRACE
			}
		}
		create_country = {
			tag = ERUM
			origin = this
			state = s:STATE_NORTHERN_THRACE.region_state:TUR
			on_created = {
			}
		}
	}
	c:TUR = {
		create_diplomatic_pact = {
			country = c:BUL
			type = protectorate
		}
		if  = {
			limit = {
				exists = c:ERUM
			}
			create_diplomatic_pact = {
				country = c:ERUM
				type = puppet
			}
		}
	}
	c:BUL = {
		balkfm_set_bulgarian_laws = yes
		balkfm_create_bulgarian_characters = yes
		balkfm_set_up_ottoman_legacies_effect = yes
		trigger_event = {
			id = balkfm.500 # The Golden Lion Awakens
			days = 1 # or else the loc breaks
		}
	}
}

balkfm_set_bulgarian_laws = {
	activate_law = law_type:law_monarchy
	activate_law = law_type:law_universal_suffrage
	activate_law = law_type:law_cultural_exclusion
	activate_law = law_type:law_state_religion
	activate_law = law_type:law_appointed_bureaucrats
	activate_law = law_type:law_professional_army
	activate_law = law_type:law_traditionalism
	activate_law = law_type:law_mercantilism
	activate_law = law_type:law_tenant_farmers
	activate_law = law_type:law_no_police
	activate_law = law_type:law_right_of_assembly
	activate_law = law_type:law_slavery_banned
}

balkfm_set_up_rumelia = {
	create_character = {
		template = template_balkfm_bogoridi_alexander
		ruler = yes
	}
	create_character = {
		template = template_balkfm_stranski_georgi
	}
	activate_law = law_type:law_monarchy
	activate_law = law_type:law_landed_voting
	activate_law = law_type:law_cultural_exclusion
	activate_law = law_type:law_state_religion
	activate_law = law_type:law_appointed_bureaucrats
	activate_law = law_type:law_professional_army
	activate_law = law_type:law_tenant_farmers
	activate_law = law_type:law_mercantilism
	activate_law = law_type:law_tenant_farmers
	activate_law = law_type:law_no_police
	activate_law = law_type:law_right_of_assembly
	activate_law = law_type:law_slavery_banned
	balkfm_set_up_ottoman_legacies_effect = yes
}

balkfm_create_battenburg_monarchy = {
	heir ?= {
		kill_character = yes # just some housekeeping
	}
	create_character = {
		template = template_balkfm_battenburg_alexander
		ruler = yes
	}
}

balkfm_create_bulgarian_characters = {
	create_character = {
		template = template_balkfm_turnovski_kliment
	}
	create_character = {
		template = template_balkfm_tsankov_dragan
	}
	create_character = {
		template = template_balkfm_kesyakov_konstantin
	}
	create_character = {
		template = template_balkfm_sakazov_yanko
	}
}

balkfm_create_bulgarian_regency_characters = {
	create_character = {
		template = template_balkfm_mutkurov_sava
	}
	create_character = {
		template = template_balkfm_karavelov_petko
	}
	create_character = {
		template = template_balkfm_stambolov_stefan
	}	
	create_character = {
		template = 	template_balkfm_georgiev_evlogi
	}
}

balkfm_create_bulgarian_royals = {
	create_character = {
		template = template_balkfm_sakskoburggotski_ferdinand
		on_created = {
			place_character_in_void = 12
		}
	}
	create_character = {
		template = template_balkfm_dadiani_nikoloz
		on_created = {
			place_character_in_void = 12
		}
	}
	if = {
		limit = {
			c:ERUM ?= {
				ruler = {
					NOT = {
						has_template = template_balkfm_bogoridi_alexander
					}
				}
			}
		}
		create_character = {
			template = template_balkfm_bogoridi_alexander
			on_created = {
				place_character_in_void = 12
			}
		}
	}
	create_character = {
		template = template_balkfm_glucksburg_valdemar
		on_created = {
			place_character_in_void = 12
		}
	}
	create_character = {
		template = template_balkfm_goltz_wilhelm
		on_created = {
			place_character_in_void = 12
		}
	}
}

balkfm_remove_stambolovism_variables_effect = {
	remove_variable = balkfm_stambolovism_var
	remove_variable = balkfm_battenburg_letter
	remove_variable = balkfm_military_modernized
	remove_variable = balkfm_executed_panitsa
	remove_variable = balkfm_showed_off_regalia
	
	remove_variable = balkfm_exiled_panitsa
	remove_variable = balkfm_put_away_regalia
}

balkfm_rumelian_ruler_rotation_effect = {
	if = {
		limit = {
			var:balkfm_governor_counter <= 1
		}
		create_character = {
			template = template_balkfm_bogoridi_alexander
			on_created = {
				place_character_in_void = 12
				set_variable = balkfm_rumelian_ruler_var
			}
		}
	}
	else = {
		create_character = {
			ig_leader = yes
			interest_group = ig_landowners
			ideology = ideology_royalist
			traits = {
				reserved # idk man, this is a dynamic character
			}
			on_created = {
				place_character_in_void = 12
				set_variable = balkfm_rumelian_ruler_var
			}
		}
	}
	change_variable = {
		name = balkfm_governor_counter
		add = 1
	}
}

balkfm_play_silistra_effect = {
	# This event is used to provide a route for Bulgarian gameplay from game start. The SILI tag is defined in turkfm since it's an Eyalet tag. If this tag is called in Turkfm content it will not use these creation and setup effects.
	create_country = {
		tag = SILI
		origin = c:TUR
		state = s:STATE_BULGARIA.region_state:TUR
		state = s:STATE_DOBRUDJA.region_state:TUR
		on_created = {
			balkfm_set_up_silistra_effect = yes
		}
	}
	play_as = c:SILI
}

balkfm_set_up_silistra_effect = {
#	create_character = {
#		template = 
#	}
	create_character = {
		template = template_balkfm_miladinov_dimitar
	}
	set_variable = {
		name = balkfm_revivalism_var
		value = 0
	}
	set_variable = {
		name = eocfm_schism_var # Silistra isn't Orthodox so the on_actions won't trigger this
		value = 0
	}
	trigger_event = {
		id = balkfm.550 # The Bulgarian Millet
	}
	add_journal_entry = {
		type = je_balkfm_bul_silistra
	}
	balkfm_set_up_ottoman_legacies_effect = yes
	c:TUR  = {
		create_diplomatic_pact = {
			country = c:SILI
			type = puppet
		}
		set_secret_goal = {
			secret_goal = protect
			country = c:SILI
		}
	}
}

balkfm_become_bulgaria_effect = {
	if = {
		limit = {
			NOT = {
				c:BUL ?= this
			}
		}
		change_tag = BUL
	}
	hidden_effect = {
		heir ?= {
			kill_character = yes # just some housekeeping
		}
		create_character = {
			template = template_balkfm_turnovski_kliment
		}
		create_character = {
			template = template_balkfm_tsankov_dragan
		}
		create_character = {
			template = template_balkfm_kesyakov_konstantin
		}
		create_character = {
			template = template_balkfm_sakazov_yanko
		}
	}
	trigger_event = {
		id = balkfm.500 # The Golden Lion Awakens
		popup = yes
	}
	remove_variable = balkfm_golden_lion_tickled
}

balkfm_clean_up_silistra_variables_effect = {
	remove_variable = balkfm_nis_insurgency_happened
	remove_variable = balkfm_bulgarian_question_happened
	remove_variable = balkfm_constantinople_newspaper_published
	remove_variable = balkfm_golden_lion_tickled
	remove_variable = balkfm_legion_formed
}

balkfm_clean_up_revivalism_variables_effect = {
	remove_variable = balkfm_revivalism_requested_var
	remove_variable = balkfm_revivalism_supported_var
	remove_variable = balkfm_revivalism_var
}

## ROMANIA EFFECTS ##

balkfm_moldavian_election_effect = {
	if = { # First Election
		limit = {
			var:balkfm_hospodar_election_counter <= 1
		}
		if = {
			limit = {
				ruler = {
					has_variable = balkfm_is_kogalniceanu
				}
			}
			create_character = {
				# Costache Negri, Moldavian writer and revolutionary
				first_name = Costache
				last_name = Negri
				culture = cu:romanian
				religion = rel:orthodox
				historical = yes
				age = 45
				ideology = ideology_reformer
				interest_group = ig_intelligentsia
				on_created = {
					set_variable = balkfm_hospodar_m1
					place_character_in_void = 720
				}
			}
		}
		else = {
			create_character = { 
				# Mihail Kogălniceanu, Romanian nationalist; leader in the 1848 revolution
				first_name = Mihail
				last_name = Kogalniceanu
				culture = cu:romanian
				religion = rel:orthodox
				historical = yes
				age = 45
				ideology = ideology_kogalnitchanism
				interest_group = ig_intelligentsia
				on_created = {
					set_variable = balkfm_is_kogalniceanu
					set_variable = balkfm_hospodar_m1
					place_character_in_void = 720
				}
			}
		}
		create_character = { 
			# Ion Ghica, Romanian statesman and scholar; participated in the 1848 Revolts
			first_name = Ion
			last_name = Ghica
			culture = cu:romanian
			religion = rel:orthodox
			historical = yes
			age = 45
			ideology = ideology_kogalnitchanism
			interest_group = ig_intelligentsia
			on_created = {
				set_variable = balkfm_hospodar_m2
				place_character_in_void = 720
			}
		}
	}
	
	if = { # Second Election
		limit = {
			var:balkfm_hospodar_election_counter = 2
		}
		create_character = { # Grigore Alexandru Ghica, Prince of Moldavia 1849-1853/1854-1856
			first_name = Grigore
			last_name = Ghica
			culture = cu:romanian
			religion = rel:orthodox
			historical = yes
			age = 40 # birth date unclear; was in his 40s when elected
			ideology = ideology_humanitarian_royalist
			interest_group = ig_landowners
			on_created = {
				set_variable = balkfm_hospodar_m1
				place_character_in_void = 720 # 60 year lease on life
			}
		}
		create_character = { # Manolache Costache Epureanu, 2x Prime Minister of Romania, participated in the ad hoc committee in Moldavia after the 1848 Revolution
			first_name = Manolache
			last_name = Epureanu
			culture = cu:romanian
			religion = rel:orthodox
			historical = yes
			age = 45
			ideology = ideology_traditionalist
			interest_group = ig_landowners
			on_created = {
				set_variable = balkfm_hospodar_m2
				place_character_in_void = 720 
			}
		}
	}
	
	if = { # Third Election
		limit = {
			var:balkfm_hospodar_election_counter = 3
		}	
		create_character = { # Alexandru Ioan Cuza, first Domnitor of the United Principalities
			first_name = Alexandru
			last_name = Cuza
			culture = cu:romanian
			religion = rel:orthodox
			historical = yes
			age = 41 # age when he was elected
			ideology = ideology_kogalnitchanism
			interest_group = ig_landowners
			on_created = {
				set_variable = balkfm_hospodar_m1
				place_character_in_void = 720 
			}
		}
		create_character = { # Lascăr Catargiu, prominent boyar conservative
			first_name = Lascar
			last_name = Catargiu
			culture = cu:romanian
			religion = rel:orthodox
			historical = yes
			age = 29 # if election is held in 1859
			ideology = ideology_royalist
			interest_group = ig_landowners
			on_created = {
				set_variable = balkfm_hospodar_m2
				place_character_in_void = 720 
			}
		}
	}
	
	if = { # Future Elections
		limit = {
			var:balkfm_hospodar_election_counter > 3
		}	
		create_character = {
			culture = cu:romanian
			religion = rel:orthodox
			age = 40
			ideology = ideology_kogalnitchanism
			interest_group = ig_intelligentsia
			on_created = {
				set_variable = balkfm_hospodar_m1
				place_character_in_void = 720 
			}
		}
		create_character = {
			culture = cu:romanian
			religion = rel:orthodox
			age = 40
			ideology = ideology_royalist
			interest_group = ig_landowners
			on_created = {
				set_variable = balkfm_hospodar_m2
				place_character_in_void = 720 
			}
		}
	}

}

balkfm_wallachian_election_effect = {
	## These effects generate two candidates based on the election counter
	if = { # First Election
		limit = {
			var:balkfm_hospodar_election_counter <= 1
		}
		create_character = { # Gheorghe Bibescu, second hospodar of Wallachia
			first_name = Gheorghe
			last_name = Bibescu
			culture = cu:romanian
			religion = rel:orthodox
			historical = yes
			age = 40
			ideology = ideology_reformer
			interest_group = ig_landowners
			on_created = {
				set_variable = balkfm_hospodar_w1
				place_character_in_void = 720 
			}
		}
		create_character = { # Emanoil Băleanu, candidate in the 1842 election
			first_name = Emanoil
			last_name = Baleanu
			culture = cu:romanian
			religion = rel:orthodox
			historical = yes
			age = 40
			ideology = ideology_social_democrat
			interest_group = ig_intelligentsia
			on_created = {
				set_variable = balkfm_hospodar_w2
				place_character_in_void = 720 
			}
		}
	}
	if = { # Second Election
		limit = {
			var:balkfm_hospodar_election_counter = 2
		}
		create_character = { # Barbu Dimitrie Știrbei, third hospodar of Wallachia
			first_name = Barbu
			last_name = Stirbei
			culture = cu:romanian
			religion = rel:orthodox
			historical = yes
			age = 40
			ideology = ideology_reformer
			interest_group = ig_landowners
			on_created = {
				set_variable = balkfm_hospodar_w1
				place_character_in_void = 720 
			}
		}
		create_character = { # Constantin Cantacuzino, boyar leader during the Regulamentul era
			first_name = Constantin
			last_name = Cantacuzino
			culture = cu:romanian
			religion = rel:orthodox
			historical = yes
			age = 60
			ideology = ideology_traditionalist
			interest_group = ig_landowners
			on_created = {
				set_variable = balkfm_hospodar_w2
				place_character_in_void = 720 
			}
		}
	}
	if = { # Third Election
		limit = {
			var:balkfm_hospodar_election_counter = 3
		}	
		create_character = {
			first_name = Alexander
			last_name = Cuza
			culture = cu:romanian
			religion = rel:orthodox
			historical = yes
			age = 41 # age when he was elected
			ideology = ideology_kogalnitchanism
			interest_group = ig_landowners
			on_created = {
				set_variable = balkfm_hospodar_w1
				place_character_in_void = 720 
			}
		}
		create_character = {
			culture = cu:romanian
			religion = rel:orthodox
			historical = yes
			age = 45
			interest_group = ig_intelligentsia
			on_created = {
				set_variable = balkfm_hospodar_w2
				place_character_in_void = 720 
			}
		}
	}
	if = { # Future Elections
		limit = {
			var:balkfm_hospodar_election_counter > 3
		}	
		create_character = {
			culture = cu:romanian
			religion = rel:orthodox
			historical = yes
			age = 45
			ideology = ideology_moderate
			interest_group = ig_intelligentsia
			on_created = {
				set_variable = balkfm_hospodar_w1
				place_character_in_void = 720 
			}
		}
		create_character = {
			culture = cu:romanian
			religion = rel:orthodox
			historical = yes
			age = 45
			ideology = ideology_moderate
			interest_group = ig_landowners
			on_created = {
				set_variable = balkfm_hospodar_w2
				place_character_in_void = 720 
			}
		}
	}

}

balkfm_initialize_1848_variables_effect = {
	set_variable = {
		name = balkfm_1848_rom_var
		value = 0
	}
	set_variable = {
		name = balkfm_1848_progress_var
		value = 0
	}
}

balkfm_cleanup_1848_variables_effect = {
	remove_variable = balkfm_1848_rom_var
	remove_variable = balkfm_1848_progress_var
}

balkfm_initialize_dezvoltator_variables_effect = {
	set_variable = {
		name = balkfm_dezvoltator_var
		value = 0
	}
	set_variable = {
		name = balkfm_dezvoltator_progress_var
		value = 0
	}
}

balkfm_cleanup_dezvoltator_variables_effect = {
	remove_variable = balkfm_dezvoltator_var
	remove_variable = balkfm_dezvoltator_progress_var
}

balkfm_find_kogalniceanu_effect = {
	# Please don't look too hard, I am NOT proud of this
	if = {
		limit = {
			NOR = {
				any_scope_character = {
					has_template = template_balkfm_kogalniceanu_mihail
				}
				any_character_in_void = {
					has_template = template_balkfm_kogalniceanu_mihail
				}
			}
		}
		create_character = { # Mihail Kogălniceanu, Romanian nationalist; leader in the 1848 revolution
			template = template_balkfm_kogalniceanu_mihail
			on_created = {
				set_variable = balkfm_is_revolutionary
				place_character_in_void = 100
			}
		}
	}
	random_character_in_void = {
		limit = {
			has_template = template_balkfm_kogalniceanu_mihail
		}
		save_scope_as = balkfm_kogalniceanu_scope
	}
	if = {
		limit = {
			NOT = {
				exists = scope:balkfm_kogalniceanu_scope
			}
		}
		random_scope_character = {
			limit = {
				has_template = template_balkfm_kogalniceanu_mihail
			}
			save_scope_as = balkfm_kogalniceanu_scope
		}
	}
}

balkfm_initialize_protochronism_effect = {
	set_variable = {
		name = balkfm_junimism_progress_var
		value = 0
	}
	set_variable = {
		name = balkfm_dacianism_progress_var
		value = 0
	}
	set_variable = {
		name = balkfm_protochronism_progress_var
		value = 0
	}
	set_variable = {
		name = balkfm_junimism_var
		value = 1 # this is so the push effect can actually do something
	}
	set_variable = {
		name = balkfm_dacianism_var
		value = 0
	}
}

balkfm_cleanup_protochronism_effect = {
	remove_variable = balkfm_junimism_progress_var
	remove_variable = balkfm_dacianism_progress_var
	remove_variable = balkfm_protochronism_progress_var
	remove_variable = balkfm_junimism_var
	remove_variable = balkfm_dacianism_var
}

balkfm_initialize_1866_variables_effect = {
	set_variable = {
		name = balkfm_1866_var
		value = 0
	}
	set_variable = {
		name = balkfm_1866_progress_var
		value = 0
	}
}

balkfm_cleanup_1866_variables_effect = {
	remove_variable = balkfm_1866_var
	remove_variable = balkfm_1866_progress_var
}


## CROATIA EFFECTS ##

balkfm_cleanup_croatian_modifiers_effect = {
	hidden_effect = {
		every_scope_state = {
			limit = {
				has_modifier = modifier_balkfm_croatian_revivalism
			}
			remove_modifier = modifier_balkfm_croatian_revivalism
		}
	}
}


## TURK-SPLOSION EFFECTS ##
balkfm_balkanize_effect = {
	c:TUR ?= {
		if = {
			limit = {
				NOT = { exists = c:BOS }
				owns_entire_state_region = STATE_BOSNIA
			}
			create_country = {
				tag = BOS
				origin = this
				state = s:STATE_BOSNIA.region_state:TUR
			}
		}
		if = {
			limit = {
				AND = {
					NOT = { exists = c:MON }
					owns_entire_state_region = STATE_MONTENEGRO
				}
			}
			create_country = {
				tag = MON
				origin = this
				state = s:STATE_MONTENEGRO.region_state:TUR
			}
		}
		else_if = {
			limit = {
				AND = {
					c:MON ?= {
						NOT = {
							owns_entire_state_region = STATE_MONTENEGRO
						}
					}
				}
			}
			s:STATE_MONTENEGRO = {
				every_scope_state = {
					limit = {
						owner = {
							c:TUR = this
						}
					}
					set_state_owner = c:MON
				}
			}
		}
		if = {
			limit = {
				NOT = { exists = c:ALB }
				owns_entire_state_region = STATE_ALBANIA
			}
			create_country = {
				tag = ALB
				origin = this
				state = s:STATE_ALBANIA.region_state:TUR
			}
		}
		if = {
			limit = {
				NOT = { exists = c:NMAC }
				owns_entire_state_region = STATE_SKOPIA
			}
			create_country = {
				tag = NMAC
				origin = this
				state = s:STATE_SKOPIA.region_state:TUR
			}
		}
		if = {
			limit = {
				NOT = { exists = c:ERUM }
				owns_entire_state_region = STATE_NORTHERN_THRACE
			}
			create_country = {
				tag = ERUM
				origin = this
				state = s:STATE_NORTHERN_THRACE.region_state:TUR
			}
		}
		if = {
			limit = {
				NOT = { exists = c:THRA }
				owns_entire_state_region = STATE_WESTERN_THRACE
			}
			create_country = {
				tag = THRA
				origin = this
				state = s:STATE_WESTERN_THRACE.region_state:TUR
			}
		}
		if = {
			limit = {
				NOT = { exists = c:BUL }
				owns_entire_state_region = STATE_BULGARIA
			}
			create_country = {
				tag = BUL
				origin = this
				state = s:STATE_BULGARIA.region_state:TUR
			}
		}
		if = {
			limit  = {
				NOT = { exists = c:NISH }
				owns_entire_state_region = STATE_SOUTHERN_SERBIA
			}
			create_country = {
				tag = NISH
				origin = this
				state = s:STATE_SOUTHERN_SERBIA.region_state:TUR
			}		
		}
		if = {
			limit = {
				NOT = { exists = c:SER }
				owns_entire_state_region = STATE_NORTHERN_SERBIA
			}
			create_country = {
				tag = SER
				origin = this
				state = s:STATE_NORTHERN_SERBIA.region_state:TUR
			}
		}
		if = {
			limit = {
				NOT = { exists = c:MORE }
				owns_entire_state_region = STATE_PELOPONNESE
			}	
			create_country = {
				tag = MORE
				origin = this
				state = s:STATE_PELOPONNESE.region_state:TUR
			}
		}
		if = {
			limit = {
				NOT = { exists = c:ION }
				owns_entire_state_region = STATE_IONIAN_ISLANDS
			}
			create_country = {
				tag = ION
				origin = this
				state = s:STATE_IONIAN_ISLANDS.region_state:TUR
			}
		}
		if = {
			limit = {
				NOT = { exists = c:ATHE }
				owns_entire_state_region = STATE_ATTICA
			}
			create_country = {
				tag = ATHE
				origin = this
				state = s:STATE_ATTICA.region_state:TUR
			}
		}
		if = {
			limit = {
				NOT = { exists = c:EPI }
				owns_entire_state_region = STATE_THESSALIA
			}
			create_country = {
				tag = EPI
				origin = this
				state = s:STATE_THESSALIA.region_state:TUR
			}
		}
		if = {
			limit = {
				NOT = { exists = c:MAC }
				owns_entire_state_region = STATE_MACEDONIA
			}
			create_country = {
				tag = MAC
				origin = this
				state = s:STATE_MACEDONIA.region_state:TUR
			}
		}
		if = {
			limit = {
				NOT = { exists = c:CRE }
				owns_entire_state_region = STATE_CRETE
			}
			create_country = {
				tag = CRE
				origin = this
				state = s:STATE_CRETE.region_state:TUR
			}
		}
		if = {
			limit = {
				NOT = { exists = c:NAXO }
			}
			create_country = {
				tag = NAXO
				origin = this
				state = s:STATE_WEST_AEGEAN_ISLANDS.region_state:TUR
			}
		}
	}
}

balkfm_turkboom_effect = {
	c:TUR ?= {
		if = {
			limit = {
				AND = {
					NOT = { exists = c:GRE }
					owns_entire_state_region = STATE_ATTICA
					owns_entire_state_region = STATE_PELOPONNESE
				}
			}
			create_country = {
				tag = GRE
				origin = this
				state = s:STATE_ATTICA.region_state:TUR
				state = s:STATE_PELOPONNESE.region_state:TUR
			}
		}
		else_if = {
			limit = {
				AND = {
					owns_entire_state_region = STATE_THESSALIA
					exists = c:GRE
				}
			}
			s:STATE_THESSALIA = {
				random_scope_state = {
					set_state_owner = c:GRE
				}
			}
		}
		if = {
			limit = {
				AND = {
					NOT = { exists = c:BUL }
					owns_entire_state_region = STATE_BULGARIA
					owns_entire_state_region = STATE_NORTHERN_THRACE
					owns_entire_state_region = STATE_WESTERN_THRACE
				}
			}
			create_country = {
				tag = BUL
				origin = this
				state = s:STATE_BULGARIA.region_state:TUR
				state = s:STATE_NORTHERN_THRACE.region_state:TUR
				state = s:STATE_WESTERN_THRACE.region_state:TUR
			}
		}
		else_if = {
			limit = {
				AND = {
					NOT = { exists = c:BUL }
					owns_entire_state_region = STATE_BULGARIA
					owns_entire_state_region = STATE_NORTHERN_THRACE
				}
			}
			create_country = {
				tag = BUL
				origin = this
				state = s:STATE_BULGARIA.region_state:TUR
				state = s:STATE_NORTHERN_THRACE.region_state:TUR
			}
		}
		else_if = {
			limit = {
				AND = {
					NOT = { exists = c:BUL }
					owns_entire_state_region = STATE_BULGARIA
				}
			}
			create_country = {
				tag = BUL
				origin = this
				state = s:STATE_BULGARIA.region_state:TUR
			}
		}
		else_if = {
			limit = {
				AND = {
					NOT = { exists = c:BUL }
					NOT = { exists = c:ERUM }
					owns_entire_state_region = STATE_NORTHERN_THRACE
				}
			}
			create_country = {
				tag = ERUM # mwahaha no flavor for you
				origin = this
				state = s:STATE_NORTHERN_THRACE.region_state:TUR
			}
		}
		if = {
			limit = {
				AND = {
					NOT = { exists = c:SER }
					owns_entire_state_region = STATE_SOUTHERN_SERBIA
				}
			}
			create_country = {
				tag = SER
				origin = this
				state = s:STATE_NORTHERN_SERBIA.region_state:TUR
				state = s:STATE_SOUTHERN_SERBIA.region_state:TUR
			}
		}
		else_if = {
			limit = {
				AND = {
					exists = c:SER
					owns_entire_state_region = STATE_SOUTHERN_SERBIA
					owns_entire_state_region = STATE_SKOPIA
				}
			}
			s:STATE_SKOPIA = {
				random_scope_state = {
					set_state_owner = c:SER
				}
			}
			s:STATE_SOUTHERN_SERBIA = {
				random_scope_state = {
					set_state_owner = c:SER
				}
			}
		}
		else_if = {
			limit = {
				AND = {
					exists = c:SER
					owns_entire_state_region = STATE_SOUTHERN_SERBIA
				}
			}
			s:STATE_SOUTHERN_SERBIA = {
				random_scope_state = {
					set_state_owner = c:SER
				}
			}
		}
		if = {
			limit = {
				AND = {
					NOT = { exists = c:ALB }
					owns_entire_state_region = STATE_ALBANIA
				}
			}
			create_country = {
				tag = ALB
				origin = this
				state = s:STATE_ALBANIA.region_state:TUR
			}
		}
		if = {
			limit = {
				AND = {
					NOT = { exists = c:MAC }
					owns_entire_state_region = STATE_MACEDONIA
				}
			}
			create_country = {
				tag = MAC
				origin = this
				state = s:STATE_MACEDONIA.region_state:TUR
			}
		}
		if = {
			limit = {
				AND = {
					NOT = { exists = c:BOS }
					owns_entire_state_region = STATE_BOSNIA
				}
			}
			create_country = {
				tag = BOS
				origin = this
				state = s:STATE_BOSNIA.region_state:TUR
			}
		}
		if = {
			limit = {
				AND = {
					NOT = { exists = c:MON }
					owns_entire_state_region = STATE_MONTENEGRO
				}
			}
			create_country = {
				tag = MON
				origin = this
				state = s:STATE_MONTENEGRO.region_state:TUR
			}
		}
		else_if = {
			limit = {
				AND = {
					c:MON ?= {
						NOT = {
							owns_entire_state_region = STATE_MONTENEGRO
						}
					}
				}
			}
			s:STATE_MONTENEGRO = {
				every_scope_state = {
					limit = {
						owner = {
							c:TUR = this
						}
					}
					set_state_owner = c:MON
				}
			}
		}
		if = {
			limit = {
				c:WAL ?= {
					NOT = {
						owns_entire_state_region = STATE_DOBRUDJA
					}
				}
				has_state_in_state_region = STATE_DOBRUDJA
			}
			s:STATE_DOBRUDJA = {
				random_scope_state = {
					limit = {
						owner = {
							country_has_primary_culture = cu:turkish
						}
					}
					set_state_owner = c:WAL
				}
			}
		}
		if = {
			limit = {
				NOT = {
					exists = c:CRE
				}
				owns_entire_state_region = STATE_CRETE
			}
			create_country = {
				tag = CRE
				origin = this
				state = s:STATE_CRETE.region_state:TUR
			}
		}
	}
}
