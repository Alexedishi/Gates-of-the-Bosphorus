###########################
# TURKFM SCRIPTED EFFECTS #
###########################

#### GLOBAL SETUP EFFECTS ####

turkfm_setup_turkey_effect = {
	ig:ig_landowners = {
		add_ruling_interest_group = yes
		set_interest_group_name = turkfm_ig_ottoman_beylerbey
	}
	ig:ig_devout = {
		remove_ideology = ideology_moralist
		add_ideology = turkfm_ideology_islamist
		set_interest_group_name = turkfm_ig_ottoman_devout
	}
	ig:ig_armed_forces = {
		add_ruling_interest_group = yes
		set_interest_group_name = turkfm_ig_ottoman_armed_forces
	}
	ig:ig_intelligentsia = {
		remove_ideology = ideology_anti_clerical
		remove_ideology = ideology_republican
		add_ideology = turkfm_ideology_scribalistic
		add_ideology = ideology_moralist
		set_interest_group_name = turkfm_ig_ottoman_scribes
	}
	ig:ig_petty_bourgeoisie = {
		set_interest_group_name = turkfm_ig_ottoman_petty_bourgeoisie
	}
	ig:ig_rural_folk = {
		set_interest_group_name = turkfm_ig_ottoman_rural_folk
	}
}

turkfm_setup_egypt_effect = {
}

turkfm_setup_libya_effect = {
}

#### SICK MAN EFFECTS ####

turkfm_initialize_sick_man = {
	set_variable = {
		name = turkfm_sick_man_var
		value = 2
	}
	turkfm_validate_sick_man_effect = yes
	add_journal_entry = {
		type = je_sick_man_syria
	}
	add_journal_entry = {
		type = je_turkfm_sick_man_caucasus
	}
	add_journal_entry = {
		type = je_turkfm_sick_man_crete
	}
}

turkfm_calculate_sick_man_effect = {
	set_variable = {
		name = turkfm_sick_man_var
		value = turkfm_sick_man_value
	}
	je:je_turkfm_sick_man_main = {
		set_bar_progress = {
			name = turkfm_sick_main_progress_bar
			value = owner.var:turkfm_sick_man_var
		}
	}
}

turkfm_validate_sick_man_effect = {
	if = {
		limit = {
			turkfm_controls_balkans_trigger = yes
		}
		set_variable = turkfm_controls_balkans
	}
	else = {
		remove_variable = turkfm_controls_balkans
	}
	if = {
		limit = {
			turkfm_controls_anatolia_trigger = yes
		}
		set_variable = turkfm_controls_anatolia
	}
	else = {
		remove_variable = turkfm_controls_anatolia
	}
	if = {
		limit = {
			turkfm_controls_arabia_trigger = yes
		}
		set_variable = turkfm_controls_arabia
	}
	else = {
		remove_variable = turkfm_controls_arabia
	}
	if = {
		limit = {
			turkfm_controls_nile_trigger = yes
		}
		set_variable = turkfm_controls_nile
	}
	else = {
		remove_variable = turkfm_controls_nile
	}
	if = {
		limit = {
			turkfm_controls_danubia_trigger = yes
		}
		set_variable = turkfm_controls_danubia
	}
	else = {
		remove_variable = turkfm_controls_danubia
	}
	if = {
		limit = {
			turkfm_controls_caucasus_trigger = yes
		}
		set_variable = turkfm_controls_caucasus
	}
	else = {
		remove_variable = turkfm_controls_caucasus
	}
}

#### TANZIMAT EFFECTS ####

turkfm_initialize_tanzimat_effect = {
	set_variable = {
		name = turkfm_tanzimat_var
		value = 300
	}
	set_variable = {
		name = turkfm_tanzimat_progress_var
		value = 0
	}
	set_variable = {
		name = turkfm_tanzimat_completion_var
		value = 0
	}
	add_modifier = modifier_turkfm_feudal_argiculture
	add_modifier = modifier_turkfm_cizye_tax
	add_modifier = modifier_turkfm_outmoded_bureaucracy
	add_modifier = modifier_turkfm_stagnant_economy
	add_modifier = modifier_turkfm_illiterate_populace
	add_modifier = modifier_turkfm_insecure_countryside
}

turkfm_cleanup_tanzimat_effect = {
	set_global_variable = turkfm_tanzimat_complete
	remove_variable = turkfm_tanzimat_progress_var
	remove_variable = turkfm_tanzimat_var
	remove_variable = turkfm_tanzimat_completion_var
	if = {
		limit = {
			has_modifier = modifier_turkfm_feudal_argiculture
		}
		remove_modifier = modifier_turkfm_feudal_argiculture
	}
	if = {
		limit = {
			has_modifier = modifier_turkfm_cizye_tax
		}
		remove_modifier = modifier_turkfm_cizye_tax
	}
	if = {
		limit = {
			has_modifier = modifier_turkfm_outmoded_bureaucracy
		}
		remove_modifier = modifier_turkfm_outmoded_bureaucracy
	}
	if = {
		limit = {
			has_modifier = modifier_turkfm_stagnant_economy
		}
		remove_modifier = modifier_turkfm_stagnant_economy
	}
	if = {
		limit = {
			has_modifier = modifier_turkfm_illiterate_populace
		}
		remove_modifier = modifier_turkfm_illiterate_populace
	}
	if = {
		limit = {
			has_modifier = modifier_turkfm_insecure_countryside
		}
		remove_modifier = modifier_turkfm_insecure_countryside
	}
}

turkfm_tanzimat_monthly_effect = {
	if = {
		limit = {
			has_law = law_type:law_turkfm_religious_autonomy
		}
		set_variable = {
			name = turkfm_millet_system_var
			value = 1
		}
	}
	else_if = {
		limit = {
			has_law = law_type:law_turkfm_nominal_equality
		}
		set_variable = {
			name = turkfm_millet_system_var
			value = 2
		}
	}
	else_if = {
		limit = {
			has_law = law_type:law_turkfm_judicial_standardization
		}
		set_variable = {
			name = turkfm_millet_system_var
			value = 3
		}
	}
	else_if = {
		limit = {
			has_law = law_type:law_turkfm_millet_abolished
		}
		set_variable = {
			name = turkfm_millet_system_var
			value = 4
		}
	}
}

turkfm_complete_reform_effect = {
	custom_tooltip = {
		text = turkfm_reform_completed_tt
		change_variable = {
			name = turkfm_tanzimat_completion_var
			add = 1
		}
	}
}

turkfm_advance_ottomanism1_effect = {
	if = {
		limit = {
			has_variable = turkfm_tanzimat_var
		}
		custom_tooltip = {
			text = turkfm_advance_tanzimat1_tt
			hidden_effect = {
				change_variable = {
					name = turkfm_tanzimat_var
					add = 100
				}
				clamp_global_variable = {
					name = turkfm_tanzimat_var
					max = 1000
					min = 0
				}
				je:je_turkfm_tanzimat_main = {
					set_bar_progress = {
						name = turkfm_tanzimat_progress_bar
						value = var:turkfm_tanzimat_var
					}
				}
			}
		}
	}
}

turkfm_advance_ottomanism2_effect = {
	if = {
		limit = {
			has_variable = turkfm_tanzimat_var
		}
		custom_tooltip = {
			text = turkfm_advance_tanzimat2_tt
			hidden_effect = {
				change_variable = {
					name = turkfm_tanzimat_var
					add = 200
				}
				clamp_global_variable = {
					name = turkfm_tanzimat_var
					max = 1000
					min = 0
				}
				je:je_turkfm_tanzimat_main = {
					set_bar_progress = {
						name = turkfm_tanzimat_progress_bar
						value = var:turkfm_tanzimat_var
					}
				}
			}
		}
	}
}

turkfm_advance_ottomanism3_effect = {
	if = {
		limit = {
			has_variable = turkfm_tanzimat_var
		}
		custom_tooltip = {
			text = turkfm_advance_tanzimat3_tt
			hidden_effect = {
				change_variable = {
					name = turkfm_tanzimat_var
					add = 300
				}
				clamp_global_variable = {
					name = turkfm_tanzimat_var
					max = 1000
					min = 0
				}
				je:je_turkfm_tanzimat_main = {
					set_bar_progress = {
						name = turkfm_tanzimat_progress_bar
						value = var:turkfm_tanzimat_var
					}
				}
			}
		}
	}
}

turkfm_advance_islamism1_effect = {
	if = {
		limit = {
			has_variable = turkfm_tanzimat_var
		}
		custom_tooltip = {
			text = turkfm_regress_tanzimat1_tt
			hidden_effect = {
				change_variable = {
					name = turkfm_tanzimat_var
					subtract = 100
				}
				clamp_global_variable = {
					name = turkfm_tanzimat_var
					max = 1000
					min = 0
				}
				je:je_turkfm_tanzimat_main = {
					set_bar_progress = {
						name = turkfm_tanzimat_progress_bar
						value = owner.var:turkfm_tanzimat_var
					}
				}
			}
		}
	}
}

turkfm_advance_islamism2_effect = {
	if = {
		limit = {
			has_variable = turkfm_tanzimat_var
		}
		custom_tooltip = {
			text = turkfm_regress_tanzimat2_tt
			hidden_effect = {
				change_variable = {
					name = turkfm_tanzimat_var
					subtract = 200
				}
				clamp_global_variable = {
					name = turkfm_tanzimat_var
					max = 1000
					min = 0
				}
				je:je_turkfm_tanzimat_main = {
					set_bar_progress = {
						name = turkfm_tanzimat_progress_bar
						value = owner.var:turkfm_tanzimat_var
					}
				}
			}
		}
	}
}

turkfm_advance_islamism3_effect = {
	if = {
		limit = {
			has_variable = turkfm_tanzimat_var
		}
		custom_tooltip = {
			text = turkfm_regress_tanzimat3_tt
			hidden_effect = {
				change_variable = {
					name = turkfm_tanzimat_var
					subtract = 300
				}
				clamp_global_variable = {
					name = turkfm_tanzimat_var
					max = 1000
					min = 0
				}
				je:je_turkfm_tanzimat_main = {
					set_bar_progress = {
						name = turkfm_tanzimat_progress_bar
						value = owner.var:turkfm_tanzimat_var
					}
				}
			}
		}
	}
}

turkfm_religious_autonomy_enact_effect = {
	if = {
		limit = {
			var:turkfm_millet_system_var ?= 2
		}
		turkfm_advance_islamism1_effect = yes
	}
	else_if = {
		limit = {
			var:turkfm_millet_system_var ?= 3
		}
		turkfm_advance_islamism2_effect = yes
	}
	if = {
		limit = {
			var:turkfm_millet_system_var ?= 4
		}
		turkfm_advance_islamism3_effect = yes
	}
	set_variable = {
		name = turkfm_millet_system_var
		value = 1
	}
}
		
turkfm_nominal_equality_enact_effect = {
	if = {
		limit = {
			var:turkfm_millet_system_var ?= 1
		}
		turkfm_advance_ottomanism1_effect = yes
	}
	else_if = {
		limit = {
			var:turkfm_millet_system_var ?= 3
		}
		turkfm_advance_islamism1_effect = yes
	}
	else_if = {
		limit = {
			var:turkfm_millet_system_var ?= 4
		}
		turkfm_advance_islamism2_effect = yes
	}
	set_variable = {
		name = turkfm_millet_system_var
		value = 2
	}
}

turkfm_judicial_standardization_enact_effect = {
	if = {
		limit = {
			var:turkfm_millet_system_var ?= 1
		}
		turkfm_advance_ottomanism2_effect = yes
	}
	else_if = {
		limit = {
			var:turkfm_millet_system_var ?= 2
		}
		turkfm_advance_ottomanism1_effect = yes
	}
	else_if = {
		limit = {
			var:turkfm_millet_system_var ?= 4
		}
		turkfm_advance_islamism1_effect = yes
	}
	set_variable = {
		name = turkfm_millet_system_var
		value = 3
	}
}

turkfm_religious_autonomy_enact_effect = {
	if = {
		limit = {
			var:turkfm_millet_system_var ?= 1
		}
		turkfm_advance_ottomanism1_effect = yes
	}
	else_if = {
		limit = {
			var:turkfm_millet_system_var ?= 2
		}
		turkfm_advance_ottomanism2_effect = yes
	}
	else_if = {
		limit = {
			var:turkfm_millet_system_var ?= 3
		}
		turkfm_advance_ottomanism3_effect = yes
	}
	set_variable = {
		name = turkfm_millet_system_var
		value = 4
	}
}

#### RISE OF NATIONALISM EFFECTS ####

turkfm_initialize_tension_effect = {
	set_global_variable = {
		name = turkfm_separatism_phase_var
		value = 1 # We start in the stable phase
	}
	set_global_variable = {
		name = turkfm_separatism_transition_var
		value = 0
	}
	set_global_variable = {
		name = turkfm_escalation_var
		value = 0
	}
	set_global_variable = {
		name = turkfm_deescalation_var
		value = 0
	}
	set_global_variable = {
		name = turkfm_total_riots_var
		value = 0
	}
	set_global_variable = {
		name = turkfm_crisis_counter_var
		value = 0
	}
	set_global_variable = {
		name = turkfm_congress_counter_var
		value = 0
	}
	set_variable = {
		name = turkfm_hellene_loyalists_var
		value = 0
	}
	set_variable = {
		name = turkfm_rhomaios_loyalists_var
		value = 0
	}
	set_variable = {
		name = turkfm_serb_loyalists_var
		value = 0
	}
	set_variable = {
		name = turkfm_bulgarian_loyalists_var
		value = 0
	}
	set_variable = {
		name = turkfm_romanian_loyalists_var
		value = 0
	}
	set_variable = {
		name = turkfm_bosniak_loyalists_var
		value = 0
	}
	set_variable = {
		name = turkfm_albanian_loyalists_var
		value = 0
	}
	set_variable = {
		name = turkfm_croat_loyalists_var
		value = 0
	}
	set_variable = {
		name = turkfm_slovene_loyalists_var
		value = 0
	}
	set_variable = {
		name = turkfm_hellene_radicals_var
		value = 0
	}
	set_variable = {
		name = turkfm_rhomaios_radicals_var
		value = 0
	}
	set_variable = {
		name = turkfm_serb_radicals_var
		value = 0
	}
	set_variable = {
		name = turkfm_bulgarian_radicals_var
		value = 0
	}
	set_variable = {
		name = turkfm_romanian_radicals_var
		value = 0
	}
	set_variable = {
		name = turkfm_bosniak_radicals_var
		value = 0
	}
	set_variable = {
		name = turkfm_albanian_radicals_var
		value = 0
	}
	set_variable = {
		name = turkfm_croat_radicals_var
		value = 0
	}
	set_variable = {
		name = turkfm_slovene_radicals_var
		value = 0
	}
}

turkfm_tension_start_effect = {
	if = {
		limit = {
			global_var:turkfm_separatism_phase_var = 1 # Stable
		}
		add_modifier = modifier_turkfm_stable_phase
	}
	if = {
		limit = {
			global_var:turkfm_separatism_phase_var = 2 # Unrest
		}
		add_modifier = modifier_turkfm_unrest_phase
	}
	if = {
		limit = {
			global_var:turkfm_separatism_phase_var = 3 # Hostility
		}
		add_modifier = modifier_turkfm_hosility_phase
	}
	if = {
		limit = {
			global_var:turkfm_separatism_phase_var = 4 # Deconfliction
		}
		add_modifier = modifier_turkfm_deconfliction_phase
	}
	if = {
		limit = {
			global_var:turkfm_separatism_phase_var = 5 # Crisis
		}
		add_modifier = modifier_turkfm_crisis_phase
	}
}

turkfm_calculate_tension_effect = {
	set_variable = {
		name = turkfm_hellene_loyalists_var
		value = turkfm_hellene_loyalists_value
	}
	set_variable = {
		name = turkfm_rhomaios_loyalists_var
		value = turkfm_rhomaios_loyalists_value
	}
	set_variable = {
		name = turkfm_serb_loyalists_var
		value = turkfm_serb_loyalists_value
	}
	set_variable = {
		name = turkfm_bulgarian_loyalists_var
		value = turkfm_bulgarian_loyalists_value
	}
	set_variable = {
		name = turkfm_romanian_loyalists_var
		value = turkfm_romanian_loyalists_value
	}
	set_variable = {
		name = turkfm_bosniak_loyalists_var
		value = turkfm_bosniak_loyalists_value
	}
	set_variable = {
		name = turkfm_albanian_loyalists_var
		value = turkfm_albanian_loyalists_value
	}
	set_variable = {
		name = turkfm_croat_loyalists_var
		value = turkfm_croat_loyalists_value
	}
	set_variable = {
		name = turkfm_slovene_loyalists_var
		value = turkfm_slovene_loyalists_value
	}
	set_variable = {
		name = turkfm_hellene_radicals_var
		value = turkfm_hellene_radicals_value
	}
	set_variable = {
		name = turkfm_rhomaios_radicals_var
		value = turkfm_rhomaios_radicals_value
	}
	set_variable = {
		name = turkfm_serb_radicals_var
		value = turkfm_serb_radicals_value
	}
	set_variable = {
		name = turkfm_bulgarian_radicals_var
		value = turkfm_bulgarian_radicals_value
	}
	set_variable = {
		name = turkfm_romanian_radicals_var
		value = turkfm_romanian_radicals_value
	}
	set_variable = {
		name = turkfm_bosniak_radicals_var
		value = turkfm_bosniak_radicals_value
	}
	set_variable = {
		name = turkfm_albanian_radicals_var
		value = turkfm_albanian_radicals_value
	}
	set_variable = {
		name = turkfm_croat_radicals_var
		value = turkfm_croat_radicals_value
	}
	set_variable = {
		name = turkfm_slovene_radicals_var
		value = turkfm_slovene_radicals_value
	}
}

turkfm_advance_tension_effect = {
	change_global_variable = {
		name = turkfm_escalation_var
		add = turkfm_escalation_progress_value
	}
	change_global_variable = {
		name = turkfm_deescalation_var
		add = turkfm_deescalation_progress_value
	}
	clamp_global_variable = {
		name = turkfm_escalation_var
		max = 500
		min = 0
	}
	clamp_global_variable = {
		name = turkfm_deescalation_var
		max = 500
		min = 0
	}
	if = {
		limit = {
			global_var:turkfm_escalation_var > global_var:turkfm_deescalation_var
		}
		set_global_variable = {
			name = turkfm_separatism_transition_var
			value = global_var:turkfm_escalation_var
		}
	}
	else_if = {
		limit = {
			global_var:turkfm_escalation_var < global_var:turkfm_deescalation_var
		}
		set_global_variable = {
			name = turkfm_separatism_transition_var
			value = global_var:turkfm_deescalation_var
		}
	}
	else_if = { # Force to a deescalation if both are maxed at the same time
		limit = {
			AND = {
				global_var:turkfm_escalation_var = 500
				global_var:turkfm_deescalation_var = 500
			}
		}
		set_global_variable = {
			name = turkfm_separatism_transition_var
			value = 500
		}
		set_global_variable = {
			name = turkfm_escalation_var
			value = 499
		}
		set_global_variable = {
			name = turkfm_deescalation_var
			value = 500
		}
	}
	else = { # Favor Deescalation where possible
		set_global_variable = {
			name = turkfm_separatism_transition_var
			value = global_var:turkfm_deescalation_var
		}
	}
}

turkfm_check_phase_effect = {
	# Make sure neither value is out of range before checking
	clamp_global_variable = {
		name = turkfm_escalation_var
		max = 500
		min = 0
	}
	clamp_global_variable = {
		name = turkfm_deescalation_var
		max = 500
		min = 0
	}
	if = {
		limit = {
			global_var:turkfm_escalation_var > global_var:turkfm_deescalation_var
		}
		set_global_variable = {
			name = turkfm_separatism_transition_var
			value = global_var:turkfm_escalation_var
		}
	}
	else_if = {
		limit = {
			global_var:turkfm_escalation_var < global_var:turkfm_deescalation_var
		}
		set_global_variable = {
			name = turkfm_separatism_transition_var
			value = global_var:turkfm_deescalation_var
		}
	}
	else_if = { # Force to a deescalation if both are maxed at the same time
		limit = {
			AND = {
				global_var:turkfm_escalation_var = 500
				global_var:turkfm_deescalation_var = 500
			}
		}
		set_global_variable = {
			name = turkfm_separatism_transition_var
			value = 500
		}
		set_global_variable = {
			name = turkfm_escalation_var
			value = 499
		}
		set_global_variable = {
			name = turkfm_deescalation_var
			value = 500
		}
	}
	if = {
		limit = {
			global_var:turkfm_separatism_transition_var >= 500
		}
		if = { # Attempt to Deescalate First
			limit = {
				global_var:turkfm_deescalation_var >= 500
			}
			if = { # From Unrest to Deconfliction
				limit = {
					global_var:turkfm_separatism_phase_var ?= 2
				}
				set_global_variable = {
					name = turkfm_separatism_phase_var
					value = 4 # Deconfliction
				}
				every_country = {
					limit = {
						turkfm_balkans_party_trigger = yes
					}
					post_notification = notification_turkfm_transition_deconfliction
				}
				custom_tooltip = turkfm_transition_deconfliction_tt
			}
			else_if = { # From Hostility to Deconfliction
				limit = {
					global_var:turkfm_separatism_phase_var ?= 3
				}
				set_global_variable = {
					name = turkfm_separatism_phase_var
					value = 4 # Deconfliction
				}
				every_country = {
					limit = {
						turkfm_balkans_party_trigger = yes
					}
					post_notification = notification_turkfm_transition_deconfliction
				}
				custom_tooltip = turkfm_transition_deconfliction_tt
			}
			else_if = { # From Crisis to Deconfliction
				limit = {
					global_var:turkfm_separatism_phase_var ?= 5
				}
				set_global_variable = {
					name = turkfm_separatism_phase_var
					value = 4 # Deconfliction
				}
				every_country = {
					limit = {
						turkfm_balkans_party_trigger = yes
					}
					post_notification = notification_turkfm_transition_deconfliction
				}
				custom_tooltip = turkfm_transition_deconfliction_tt
			}
			set_global_variable = {
				name = turkfm_separatism_transition_var
				value = 0
			}
			set_global_variable = {
				name = turkfm_escalation_var
				value = 0
			}
			set_global_variable = {
				name = turkfm_deescalation_var
				value = 0
			}
		}
		else_if = { # Ignore this if we deescalated
			limit = {
				global_var:turkfm_escalation_var >= 500
			}
			if = { # From Stable to Unrest
				limit = {
					global_var:turkfm_separatism_phase_var ?= 1
				}
				set_global_variable = {
					name = turkfm_separatism_phase_var
					value = 2 # Unrest
				}
				every_country = {
					limit = {
						turkfm_balkans_party_trigger = yes
					}
					post_notification = notification_turkfm_transition_unrest
				}
				custom_tooltip = turkfm_transition_unrest_tt
			}
			else_if = { # From Unrest to Hostility
				limit = {
					global_var:turkfm_separatism_phase_var ?= 2
				}
				set_global_variable = {
					name = turkfm_separatism_phase_var
					value = 3 # Hostility
				}
				every_country = {
					limit = {
						turkfm_balkans_party_trigger = yes
					}
					post_notification = notification_turkfm_transition_hostility
				}
				custom_tooltip = turkfm_transition_hostility_tt
			}
			else_if = { # From Hostility to Crisis
				limit = {
					global_var:turkfm_separatism_phase_var ?= 3
				}
				set_global_variable = {
					name = turkfm_separatism_phase_var
					value = 5 # Crisis
				}
				c:TUR ?= {
					trigger_event = {
						id = turkfm.310 # A Crisis in Rumelia
						days = 1
					}
				}
				every_country = {
					limit = {
						turkfm_balkans_party_trigger = yes
					}
					post_notification = notification_turkfm_transition_crisis
				}
				custom_tooltip = turkfm_transition_crisis_tt
			}
			else_if = { # From Deconfliction to Stable
				limit = {
					global_var:turkfm_separatism_phase_var ?= 4
				}
				set_global_variable = {
					name = turkfm_separatism_phase_var
					value = 1 # Stable
				}
				every_country = {
					limit = {
						turkfm_balkans_party_trigger = yes
					}
					post_notification = notification_turkfm_transition_stable
				}
				custom_tooltip = turkfm_transition_stable_tt
			}
			set_global_variable = {
				name = turkfm_separatism_transition_var
				value = 0
			}
			set_global_variable = {
				name = turkfm_escalation_var
				value = 0
			}
			set_global_variable = {
				name = turkfm_deescalation_var
				value = 0
			}
		}
		hidden_effect = {
			remove_modifier = modifier_turkfm_stable_phase
			remove_modifier = modifier_turkfm_unrest_phase
			remove_modifier = modifier_turkfm_hosility_phase
			remove_modifier = modifier_turkfm_deconfliction_phase
			remove_modifier = modifier_turkfm_crisis_phase
		}
		if = {
			limit = {
				global_var:turkfm_separatism_phase_var = 1 # Stable
			}
			add_modifier = modifier_turkfm_stable_phase
		}
		else_if = {
			limit = {
				global_var:turkfm_separatism_phase_var = 2 # Unrest
			}
			add_modifier = modifier_turkfm_unrest_phase
		}
		else_if = {
			limit = {
				global_var:turkfm_separatism_phase_var = 3 # Hostility
			}
			add_modifier = modifier_turkfm_hosility_phase
		}
		else_if = {
			limit = {
				global_var:turkfm_separatism_phase_var = 4 # Deconfliction
			}
			add_modifier = modifier_turkfm_deconfliction_phase
		}
		else_if = {
			limit = {
				global_var:turkfm_separatism_phase_var = 5 # Crisis
			}
			add_modifier = modifier_turkfm_crisis_phase
		}
	}
}

turkfm_tension_cooldown_effect = {
	if = {
		limit = {
			OR = {
				global_var:turkfm_separatism_phase_var = 1 # Stable
				global_var:turkfm_separatism_phase_var = 2 # Unrest
				global_var:turkfm_separatism_phase_var = 4 # Deconfliction
			}
		}
		set_global_variable = {
			name = turkfm_tension_event_cooldown_var
			years = 2
		}
	}
	if = {
		limit = {
			OR = {
				global_var:turkfm_separatism_phase_var = 1 # Stable
				global_var:turkfm_separatism_phase_var = 2 # Unrest
				global_var:turkfm_separatism_phase_var = 4 # Deconfliction
			}
		}
		set_global_variable = {
			name = turkfm_tension_event_cooldown_var
			years = 1
		}
	}
	else_if = {
		limit = {
			OR = {
				global_var:turkfm_separatism_phase_var = 3 # Hostility
				global_var:turkfm_separatism_phase_var = 5 # Crisis
			}
		}
		set_global_variable = {
			name = turkfm_tension_event_cooldown_var
			months = 3
		}
	}
}

turkfm_update_tension_progressbar_effect = {
	if = {
		limit = {
			has_journal_entry = je_turkfm_separatism_main
		}
		je:je_turkfm_separatism_main = {
			set_bar_progress = {
				name = turkfm_tension_progress_bar
				value = global_var:turkfm_separatism_transition_var
			}
		}
	}
	else_if = {
		limit = {
			has_journal_entry = je_turkfm_eastern_question
		}
		je:je_turkfm_eastern_question = {
			set_bar_progress = {
				name = turkfm_tension_progress_bar
				value = global_var:turkfm_separatism_transition_var
			}
		}
	}
}

turkfm_increase_escalation_effect = {
	if = {
		limit = {
			turkfm_can_escalate_tension_trigger = yes
		}
		c:TUR = {
			change_global_variable = {
				name = turkfm_escalation_var
				value = $AMOUNT$
			}
			turkfm_check_phase_effect = yes
		}
	}
}

turkfm_add_small_escalation_effect = {
	if = {
		limit = {
			has_variable = turkfm_riot_var
		}
		custom_tooltip = {
			text = turkfm_add_small_riot_progress_tt
			change_variable = {
				name = turkfm_riot_var
				add = 5
			}
			clamp_variable = {
				name = turkfm_riot_var
				max = 100
				min = 0
			}
		}
	}
	if = {
		limit = {
			turkfm_can_escalate_tension_trigger = yes
		}
		c:TUR = {
			custom_tooltip = {
				text = turkfm_add_small_escalation_tt
				hidden_effect = {
					change_global_variable = {
						name = turkfm_escalation_var
						add = 10
					}
				}
			}
			turkfm_check_phase_effect = yes
		}
	}
}

turkfm_add_medium_escalation_effect = {
	if = {
		limit = {
			has_variable = turkfm_riot_var
		}
		custom_tooltip = {
			text = turkfm_add_medium_riot_progress_tt
			change_variable = {
				name = turkfm_riot_var
				add = 10
			}
			clamp_variable = {
				name = turkfm_riot_var
				max = 100
				min = 0
			}
		}
	}
	if = {
		limit = {
			turkfm_can_escalate_tension_trigger = yes
		}
		c:TUR = {
			custom_tooltip = {
				text = turkfm_add_medium_escalation_tt
				hidden_effect = {
					change_global_variable = {
						name = turkfm_escalation_var
						add = 25
					}
				}
			}
			turkfm_check_phase_effect = yes
		}
	}
}

turkfm_add_large_escalation_effect = {
	if = {
		limit = {
			has_variable = turkfm_riot_var
		}
		custom_tooltip = {
			text = turkfm_add_large_riot_progress_tt
			change_variable = {
				name = turkfm_riot_var
				add = 15
			}
			clamp_variable = {
				name = turkfm_riot_var
				max = 100
				min = 0
			}
		}
	}
	if = {
		limit = {
			turkfm_can_escalate_tension_trigger = yes
		}
		c:TUR = {
			custom_tooltip = {
				text = turkfm_add_large_escalation_tt
				hidden_effect = {
					change_global_variable = {
						name = turkfm_escalation_var
						add = 50
					}
				}
			}
			turkfm_check_phase_effect = yes
		}
	}
}

turkfm_add_very_large_escalation_effect = {
	if = {
		limit = {
			has_variable = turkfm_riot_var
		}
		custom_tooltip = {
			text = turkfm_add_very_large_riot_progress_tt
			change_variable = {
				name = turkfm_riot_var
				add = 25
			}
			clamp_variable = {
				name = turkfm_riot_var
				max = 100
				min = 0
			}
		}
	}
	if = {
		limit = {
			turkfm_can_escalate_tension_trigger = yes
		}
		c:TUR = {
			custom_tooltip = {
				text = turkfm_add_very_large_escalation_tt
				hidden_effect = {
					change_global_variable = {
						name = turkfm_escalation_var
						add = 100
					}
				}
			}
			turkfm_check_phase_effect = yes
		}
	}
}

turkfm_increase_deescalation_effect = {
	if = {
		limit = {
			turkfm_can_deescalate_tension_trigger = yes
		}
		c:TUR = {
			change_global_variable = {
				name = turkfm_deescalation_var
				value = $AMOUNT$
			}
			turkfm_check_phase_effect = yes
		}
	}
}

turkfm_add_small_deescalation_effect = {
	if = {
		limit = {
			has_variable = turkfm_riot_var
		}
		custom_tooltip = {
			text = turkfm_remove_small_riot_progress_tt
			change_variable = {
				name = turkfm_riot_var
				subtract = 5
			}
			clamp_variable = {
				name = turkfm_riot_var
				max = 100
				min = 0
			}
		}
	}
	if = {
		limit = {
			turkfm_can_deescalate_tension_trigger = yes
		}
		c:TUR = {
			custom_tooltip = {
				text = turkfm_add_small_deescalation_tt
				hidden_effect = {
					change_global_variable = {
						name = turkfm_deescalation_var
						add = 10
					}
				}
			}
			turkfm_check_phase_effect = yes
		}
	}
}

turkfm_add_medium_deescalation_effect = {
	if = {
		limit = {
			has_variable = turkfm_riot_var
		}
		custom_tooltip = {
			text = turkfm_remove_medium_riot_progress_tt
			change_variable = {
				name = turkfm_riot_var
				subtract = 10
			}
			clamp_variable = {
				name = turkfm_riot_var
				max = 100
				min = 0
			}
		}
	}
	if = {
		limit = {
			turkfm_can_deescalate_tension_trigger = yes
		}
		c:TUR = {
			custom_tooltip = {
				text = turkfm_add_medium_deescalation_tt
				hidden_effect = {
					change_global_variable = {
						name = turkfm_deescalation_var
						add = 25
					}
				}
			}
			turkfm_check_phase_effect = yes
		}
	}
}

turkfm_add_large_deescalation_effect = {
	if = {
		limit = {
			has_variable = turkfm_riot_var
		}
		custom_tooltip = {
			text = turkfm_remove_large_riot_progress_tt
			change_variable = {
				name = turkfm_riot_var
				subtract = 15
			}
			clamp_variable = {
				name = turkfm_riot_var
				max = 100
				min = 0
			}
		}
	}
	if = {
		limit = {
			turkfm_can_deescalate_tension_trigger = yes
		}
		c:TUR = {
			custom_tooltip = {
				text = turkfm_add_large_deescalation_tt
				hidden_effect = {
					change_global_variable = {
						name = turkfm_deescalation_var
						add = 50
					}
				}
			}
			turkfm_check_phase_effect = yes
		}
	}
}

turkfm_add_very_large_deescalation_effect = {
	if = {
		limit = {
			has_variable = turkfm_riot_var
		}
		custom_tooltip = {
			text = turkfm_remove_very_large_riot_progress_tt
			change_variable = {
				name = turkfm_riot_var
				subtract = 25
			}
			clamp_variable = {
				name = turkfm_riot_var
				max = 100
				min = 0
			}
		}
	}
	if = {
		limit = {
			turkfm_can_deescalate_tension_trigger = yes
		}
		c:TUR = {
			custom_tooltip = {
				text = turkfm_add_very_large_deescalation_tt
				hidden_effect = {
					change_global_variable = {
						name = turkfm_deescalation_var
						add = 100
					}
				}
			}
			turkfm_check_phase_effect = yes
		}
	}
}

turkfm_add_medium_loyalists_effect = {
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = greek
			}
		}
		add_loyalists_in_state = {
			culture = cu:greek
			value = medium_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = rhomaios
			}
		}
		add_loyalists_in_state = {
			culture = cu:rhomaios
			value = medium_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = serb
			}
		}
		add_loyalists_in_state = {
			culture = cu:serb
			value = medium_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = bulgarian
			}
		}
		add_loyalists_in_state = {
			culture = cu:bulgarian
			value = medium_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = bosniak
			}
		}
		add_loyalists_in_state = {
			culture = cu:bosniak
			value = medium_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = albanian
			}
		}
		add_loyalists_in_state = {
			culture = cu:albanian
			value = medium_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = croat
			}
		}
		add_loyalists_in_state = {
			culture = cu:croat
			value = medium_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = slovene
			}
		}
		add_loyalists_in_state = {
			culture = cu:slovene
			value = medium_radicals
		}
	}
}

turkfm_add_large_loyalists_effect = {
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = greek
			}
		}
		add_loyalists_in_state = {
			culture = cu:greek
			value = large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = rhomaios
			}
		}
		add_loyalists_in_state = {
			culture = cu:rhomaios
			value = large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = serb
			}
		}
		add_loyalists_in_state = {
			culture = cu:serb
			value = large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = bulgarian
			}
		}
		add_loyalists_in_state = {
			culture = cu:bulgarian
			value = large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = bosniak
			}
		}
		add_loyalists_in_state = {
			culture = cu:bosniak
			value = large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = albanian
			}
		}
		add_loyalists_in_state = {
			culture = cu:albanian
			value = large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = croat
			}
		}
		add_loyalists_in_state = {
			culture = cu:croat
			value = large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = slovene
			}
		}
		add_loyalists_in_state = {
			culture = cu:slovene
			value = large_radicals
		}
	}
}

turkfm_add_very_large_loyalists_effect = {
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = greek
			}
		}
		add_loyalists_in_state = {
			culture = cu:greek
			value = very_large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = rhomaios
			}
		}
		add_loyalists_in_state = {
			culture = cu:rhomaios
			value = very_large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = serb
			}
		}
		add_loyalists_in_state = {
			culture = cu:serb
			value = very_large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = bulgarian
			}
		}
		add_loyalists_in_state = {
			culture = cu:bulgarian
			value = very_large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = bosniak
			}
		}
		add_loyalists_in_state = {
			culture = cu:bosniak
			value = very_large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = albanian
			}
		}
		add_loyalists_in_state = {
			culture = cu:albanian
			value = very_large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = croat
			}
		}
		add_loyalists_in_state = {
			culture = cu:croat
			value = very_large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = slovene
			}
		}
		add_loyalists_in_state = {
			culture = cu:slovene
			value = very_large_radicals
		}
	}
}

turkfm_add_medium_radicals_effect = {
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = greek
			}
		}
		add_radicals_in_state = {
			culture = cu:greek
			value = medium_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = rhomaios
			}
		}
		add_radicals_in_state = {
			culture = cu:rhomaios
			value = medium_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = serb
			}
		}
		add_radicals_in_state = {
			culture = cu:serb
			value = medium_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = bulgarian
			}
		}
		add_radicals_in_state = {
			culture = cu:bulgarian
			value = medium_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = bosniak
			}
		}
		add_radicals_in_state = {
			culture = cu:bosniak
			value = medium_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = albanian
			}
		}
		add_radicals_in_state = {
			culture = cu:albanian
			value = medium_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = croat
			}
		}
		add_radicals_in_state = {
			culture = cu:croat
			value = medium_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = slovene
			}
		}
		add_radicals_in_state = {
			culture = cu:slovene
			value = medium_radicals
		}
	}
}

turkfm_add_large_radicals_effect = {
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = greek
			}
		}
		add_radicals_in_state = {
			culture = cu:greek
			value = large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = rhomaios
			}
		}
		add_radicals_in_state = {
			culture = cu:rhomaios
			value = large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = serb
			}
		}
		add_radicals_in_state = {
			culture = cu:serb
			value = large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = bulgarian
			}
		}
		add_radicals_in_state = {
			culture = cu:bulgarian
			value = large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = bosniak
			}
		}
		add_radicals_in_state = {
			culture = cu:bosniak
			value = large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = albanian
			}
		}
		add_radicals_in_state = {
			culture = cu:albanian
			value = large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = croat
			}
		}
		add_radicals_in_state = {
			culture = cu:croat
			value = large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = slovene
			}
		}
		add_radicals_in_state = {
			culture = cu:slovene
			value = large_radicals
		}
	}
}

turkfm_add_very_large_radicals_effect = {
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = greek
			}
		}
		add_radicals_in_state = {
			culture = cu:greek
			value = very_large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = rhomaios
			}
		}
		add_radicals_in_state = {
			culture = cu:rhomaios
			value = very_large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = serb
			}
		}
		add_radicals_in_state = {
			culture = cu:serb
			value = very_large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = bulgarian
			}
		}
		add_radicals_in_state = {
			culture = cu:bulgarian
			value = very_large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = bosniak
			}
		}
		add_radicals_in_state = {
			culture = cu:bosniak
			value = very_large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = albanian
			}
		}
		add_radicals_in_state = {
			culture = cu:albanian
			value = very_large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = croat
			}
		}
		add_radicals_in_state = {
			culture = cu:croat
			value = very_large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = slovene
			}
		}
		add_radicals_in_state = {
			culture = cu:slovene
			value = very_large_radicals
		}
	}
}

turkfm_reduce_state_sol_effect = {
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = greek
			}
		}
		add_culture_standard_of_living_modifier = {
			culture = cu:greek
			months = normal_modifier_time
			multiplier = -1
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = rhomaios
			}
		}
		add_culture_standard_of_living_modifier = {
			culture = cu:rhomaios
			months = normal_modifier_time
			multiplier = -1
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = serb
			}
		}
		add_culture_standard_of_living_modifier = {
			culture = cu:serb
			months = normal_modifier_time
			multiplier = -1
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = bulgarian
			}
		}
		add_culture_standard_of_living_modifier = {
			culture = cu:bulgarian
			months = normal_modifier_time
			multiplier = -1
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = bosniak
			}
		}
		add_culture_standard_of_living_modifier = {
			culture = cu:bosniak
			months = normal_modifier_time
			multiplier = -1
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = albanian
			}
		}
		add_culture_standard_of_living_modifier = {
			culture = cu:albanian
			months = normal_modifier_time
			multiplier = -1
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = croat
			}
		}
		add_culture_standard_of_living_modifier = {
			culture = cu:croat
			months = normal_modifier_time
			multiplier = -1
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = slovene
			}
		}
		add_culture_standard_of_living_modifier = {
			culture = cu:croat
			months = normal_modifier_time
			multiplier = -1
		}
	}
}

turkfm_select_balkan_pop_effect = { # execute this from the state scope
	random_list = {
		1 = {
			trigger = {
				any_scope_pop = {
					has_pop_culture = greek
				}
			}
			cu:greek = {
				save_scope_as = turkfm_tension_culture_scope
			}
		}
		1 = {
			trigger = {
				any_scope_pop = {
					has_pop_culture = rhomaios
				}
			}
			cu:rhomaios = {
				save_scope_as = turkfm_tension_culture_scope
			}
		}
		1 = {
			trigger = {
				any_scope_pop = {
					has_pop_culture = serb
				}
			}
			cu:serb = {
				save_scope_as = turkfm_tension_culture_scope
			}
		}
		1 = {
			trigger = {
				any_scope_pop = {
					has_pop_culture = bulgarian
				}
			}
			cu:bulgarian = {
				save_scope_as = turkfm_tension_culture_scope
			}
		}
		1 = {
			trigger = {
				any_scope_pop = {
					has_pop_culture = bosniak
				}
			}
			cu:bosniak = {
				save_scope_as = turkfm_tension_culture_scope
			}
		}
		1 = {
			trigger = {
				any_scope_pop = {
					has_pop_culture = albanian
				}
			}
			cu:albanian = {
				save_scope_as = turkfm_tension_culture_scope
			}
		}
		1 = {
			trigger = {
				any_scope_pop = {
					has_pop_culture = croat
				}
			}
			cu:croat = {
				save_scope_as = turkfm_tension_culture_scope
			}
		}
		1 = {
			trigger = {
				any_scope_pop = {
					has_pop_culture = slovene
				}
			}
			cu:slovene = {
				save_scope_as = turkfm_tension_culture_scope
			}
		}
	}
}

turkfm_hellenic_separatism_effect = {
	if = {
		limit = {
			has_modifier = modifier_turkfm_supporting_gunrunners
		}
		remove_modifier = modifier_turkfm_supporting_gunrunners
		add_modifier = {
			name = modifier_turkfm_supporting_gunrunners
			multiplier = money_amount_multiplier_medium
		}
		if = {
			limit = {
				c:TUR ?= {
					OR = {
						owns_entire_state_region = STATE_THESSALIA
						owns_entire_state_region = STATE_MACEDONIA
						owns_entire_state_region = STATE_SKOPIA
						owns_entire_state_region = STATE_CRETE
						owns_entire_state_region = STATE_AYDIN
						owns_entire_state_region = STATE_CYPRUS
					}
				}
			}
			random_list = {
				1 = {
					trigger = {
						c:TUR = {
							owns_entire_state_region = STATE_THESSALIA
						}
					}
					s:STATE_THESSALIA = {
						random_scope_state = {
							add_radicals_in_state = {
								culture = cu:greek
								value = 0.05
							}
						}
					}
				}
				1 = {
					trigger = {
						c:TUR = {
							owns_entire_state_region = STATE_MACEDONIA
						}
					}
					s:STATE_MACEDONIA = {
						random_scope_state = {
							add_radicals_in_state = {
								culture = cu:greek
								value = 0.05
							}
						}
					}
				}
				1 = {
					trigger = {
						c:TUR = {
							owns_entire_state_region = STATE_SKOPIA
						}
					}
					s:STATE_SKOPIA = {
						random_scope_state = {
							add_radicals_in_state = {
								culture = cu:greek
								value = 0.05
							}
						}
					}
				}
				1 = {
					trigger = {
						c:TUR = {
							owns_entire_state_region = STATE_CRETE
						}
					}
					s:STATE_CRETE = {
						random_scope_state = {
							add_radicals_in_state = {
								culture = cu:greek
								value = 0.05
							}
						}
					}
				}
				1 = {
					trigger = {
						c:TUR = {
							owns_entire_state_region = STATE_AYDIN
						}
					}
					s:STATE_AYDIN = {
						random_scope_state = {
							add_radicals_in_state = {
								culture = cu:greek
								value = 0.05
							}
						}
					}
				}
				1 = {
					trigger = {
						c:TUR = {
							owns_entire_state_region = STATE_CYPRUS
						}
					}
					s:STATE_CYPRUS = {
						random_scope_state = {
							add_radicals_in_state = {
								culture = cu:greek
								value = 0.05
							}
						}
					}
				}
			}
		}
		else = {
			remove_modifier = modifier_turkfm_supporting_gunrunners
		}
	}
}

turkfm_rhomaios_separatism_effect = {
}

turkfm_yugoslav_separatism_effect = {
}

turkfm_massacre_effect = {
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = greek
			}
		}
		kill_population_percent_in_state = {
			percent = 0.05
			culture = cu:greek
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = rhomaios
			}
		}
		kill_population_percent_in_state = {
			percent = 0.05
			culture = cu:rhomaios
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = serb
			}
		}
		kill_population_percent_in_state = {
			percent = 0.05
			culture = cu:serb
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = bulgarian
			}
		}
		kill_population_percent_in_state = {
			percent = 0.05
			culture = cu:bulgarian
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = bosniak
			}
		}
		kill_population_percent_in_state = {
			percent = 0.05
			culture = cu:bosniak
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = albanian
			}
		}
		kill_population_percent_in_state = {
			percent = 0.05
			culture = cu:albanian
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = croat
			}
		}
		kill_population_percent_in_state = {
			percent = 0.05
			culture = cu:croat
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = slovene
			}
		}
		kill_population_percent_in_state = {
			percent = 0.05
			culture = cu:slovene
		}
	}
}

turkfm_update_riot_variables_effect = {
	random_scope_state = {
		limit = {
			has_modifier = modifier_turkfm_race_riots
		}
		save_scope_as = turkfm_riot_state_1_scope
	}
	random_scope_state = {
		limit = {
			has_modifier = modifier_turkfm_race_riots
			NOT = {
				scope:turkfm_riot_state_1_scope ?= this
			}
		}
		save_scope_as = turkfm_riot_state_2_scope
	}
	random_scope_state = {
		limit = {
			has_modifier = modifier_turkfm_race_riots
			NOR = {
				scope:turkfm_riot_state_1_scope ?= this
				scope:turkfm_riot_state_2_scope ?= this
			}
		}
		save_scope_as = turkfm_riot_state_3_scope
	}
	if = {
		limit = {
			exists = scope:turkfm_riot_state_1_scope
		}
		set_variable = {
			name = turkfm_riot_state_1_var
			value = scope:turkfm_riot_state_1_scope
		}
		set_variable = {
			name = turkfm_riot_state_1_progress_var
			value = turkfm_riot_1_progress_value
		}
	}
	else = {
		remove_variable = turkfm_riot_state_1_var
		remove_variable = turkfm_riot_state_1_progress_var
	}
	if = {
		limit = {
			exists = scope:turkfm_riot_state_2_scope
		}
		set_variable = {
			name = turkfm_riot_state_2_var
			value = scope:turkfm_riot_state_2_scope
		}
		set_variable = {
			name = turkfm_riot_state_2_progress_var
			value = turkfm_riot_2_progress_value
		}
	}
	else = {
		remove_variable = turkfm_riot_state_2_var
		remove_variable = turkfm_riot_state_2_progress_var
	}
	if = {
		limit = {
			exists = scope:turkfm_riot_state_3_scope
		}
		set_variable = {
			name = turkfm_riot_state_3_var
			value = scope:turkfm_riot_state_3_scope
		}
		set_variable = {
			name = turkfm_riot_state_3_progress_var
			value = turkfm_riot_3_progress_value
		}
	}
	else = {
		remove_variable = turkfm_riot_state_3_var
		remove_variable = turkfm_riot_state_3_progress_var
	}
}

turkfm_create_rebellion_effect = {
	random_scope_state = {
		limit = {
			has_modifier = modifier_turkfm_race_riots
		}
		remove_modifier = modifier_turkfm_race_riots
		save_scope_as = turkfm_riot_state_scope
	}
	scope:turkfm_riot_state_scope = {
		switch = {
			trigger = state_region
			s:STATE_BOSNIA = {
				create_country = {
					tag = BOS
					origin = c:TUR
					state = s:STATE_BOSNIA.region_state:TUR
					on_created = {
						set_variable = turkfm_rebellion_tag_tracker
						turkfm_set_rebellion_laws = yes
					}
				}
				c:TUR = {
					create_diplomatic_pact = {
						country = c:BOS
						type = dominion
					}
				}
			}
			s:STATE_MONTENEGRO = {
				create_country = {
					tag = MON
					origin = c:TUR
					state = s:STATE_MONTENEGRO.region_state:TUR
					on_created = {
						set_variable = turkfm_rebellion_tag_tracker
						turkfm_set_rebellion_laws = yes
					}
				}
				c:TUR = {
					create_diplomatic_pact = {
						country = c:MON
						type = dominion
					}
				}
			}
			s:STATE_ALBANIA = {
				create_country = {
					tag = ALB
					origin = c:TUR
					state = s:STATE_ALBANIA.region_state:TUR
					on_created = {
						set_variable = turkfm_rebellion_tag_tracker
						turkfm_set_rebellion_laws = yes
					}
				}
				c:TUR = {
					create_diplomatic_pact = {
						country = c:ALB
						type = dominion
					}
				}
			}
			s:STATE_SKOPIA = {
				create_country = {
					tag = NMAC
					origin = c:TUR
					state = s:STATE_SKOPIA.region_state:TUR
					on_created = {
						set_variable = turkfm_rebellion_tag_tracker
						turkfm_set_rebellion_laws = yes
					}
				}
				c:TUR = {
					create_diplomatic_pact = {
						country = c:NMAC
						type = dominion
					}
				}
			}
			s:STATE_NORTHERN_THRACE = {
				create_country = {
					tag = ERUM
					origin = c:TUR
					state = s:STATE_NORTHERN_THRACE.region_state:TUR
					on_created = {
						set_variable = turkfm_rebellion_tag_tracker
						turkfm_set_rebellion_laws = yes
					}
				}
				c:TUR = {
					create_diplomatic_pact = {
						country = c:ERUM
						type = dominion
					}
				}
			}
			s:STATE_WESTERN_THRACE = {
				create_country = {
					tag = THRA
					origin = c:TUR
					state = s:STATE_WESTERN_THRACE.region_state:TUR
					on_created = {
						set_variable = turkfm_rebellion_tag_tracker
						turkfm_set_rebellion_laws = yes
					}
				}
				c:TUR = {
					create_diplomatic_pact = {
						country = c:THRA
						type = dominion
					}
				}
			}
			s:STATE_BULGARIA = {
				create_country = {
					tag = BUL
					origin = c:TUR
					state = s:STATE_BULGARIA.region_state:TUR
					on_created = {
						set_variable = turkfm_rebellion_tag_tracker
						turkfm_set_rebellion_laws = yes
					}
				}
				c:TUR = {
					create_diplomatic_pact = {
						country = c:BUL
						type = dominion
					}
				}
			}
			s:STATE_SOUTHERN_SERBIA = {
				create_country = {
					tag = NISH
					origin = this
					state = s:STATE_SOUTHERN_SERBIA.region_state:TUR
					on_created = {
						set_variable = turkfm_rebellion_tag_tracker
						turkfm_set_rebellion_laws = yes
					}
				}
				c:TUR = {
					create_diplomatic_pact = {
						country = c:NISH
						type = dominion
					}
				}
			}
			s:STATE_NORTHERN_SERBIA = {
				create_country = {
					tag = SER
					origin = this
					state = s:STATE_NORTHERN_SERBIA.region_state:TUR
					on_created = {
						set_variable = turkfm_rebellion_tag_tracker
						turkfm_set_rebellion_laws = yes
					}
				}
				c:TUR = {
					create_diplomatic_pact = {
						country = c:SER
						type = dominion
					}
				}
			}
			s:STATE_PELOPONNESE = {
				create_country = {
					tag = MORE
					origin = this
					state = s:STATE_PELOPONNESE.region_state:TUR
					on_created = {
						set_variable = turkfm_rebellion_tag_tracker
						turkfm_set_rebellion_laws = yes
					}
				}
				c:TUR = {
					create_diplomatic_pact = {
						country = c:MORE
						type = dominion
					}
				}
			}
			s:STATE_IONIAN_ISLANDS = {
				create_country = {
					tag = ION
					origin = this
					state = s:STATE_IONIAN_ISLANDS.region_state:TUR
					on_created = {
						set_variable = turkfm_rebellion_tag_tracker
						turkfm_set_rebellion_laws = yes
					}
				}
				c:TUR = {
					create_diplomatic_pact = {
						country = c:ION
						type = dominion
					}
				}
			}
			s:STATE_ATTICA = {
				create_country = {
					tag = ATHE
					origin = this
					state = s:STATE_ATTICA.region_state:TUR
					on_created = {
						set_variable = turkfm_rebellion_tag_tracker
						turkfm_set_rebellion_laws = yes
					}
				}
				c:TUR = {
					create_diplomatic_pact = {
						country = c:ATHE
						type = dominion
					}
				}
			}
			s:STATE_THESSALIA = {
				create_country = {
					tag = EPI
					origin = this
					state = s:STATE_THESSALIA.region_state:TUR
					on_created = {
						set_variable = turkfm_rebellion_tag_tracker
						turkfm_set_rebellion_laws = yes
					}
				}
				c:TUR = {
					create_diplomatic_pact = {
						country = c:EPI
						type = dominion
					}
				}
			}
			s:STATE_MACEDONIA = {
				create_country = {
					tag = MAC
					origin = this
					state = s:STATE_MACEDONIA.region_state:TUR
					on_created = {
						set_variable = turkfm_rebellion_tag_tracker
						turkfm_set_rebellion_laws = yes
					}
				}
				c:TUR = {
					create_diplomatic_pact = {
						country = c:MAC
						type = dominion
					}
				}
			}
			s:STATE_CRETE = {
				create_country = {
					tag = CRE
					origin = this
					state = s:STATE_CRETE.region_state:TUR
					on_created = {
						set_variable = turkfm_rebellion_tag_tracker
						turkfm_set_rebellion_laws = yes
					}
				}
				c:TUR = {
					create_diplomatic_pact = {
						country = c:CRE
						type = dominion
					}
				}
			}
			s:STATE_WEST_AEGEAN_ISLANDS = {
				create_country = {
					tag = NAXO
					origin = this
					state = s:STATE_WEST_AEGEAN_ISLANDS.region_state:TUR
					on_created = {
						set_variable = turkfm_rebellion_tag_tracker
						turkfm_set_rebellion_laws = yes
					}
				}
				c:TUR = {
					create_diplomatic_pact = {
						country = c:NAXO
						type = dominion
					}
				}
			}
			s:STATE_SLOVENIA = {
				create_country = {
					tag = SLO
					origin = this
					state = s:STATE_SLOVENIA.region_state:TUR
					on_created = {
						set_variable = turkfm_rebellion_tag_tracker
						turkfm_set_rebellion_laws = yes
					}
				}
				c:TUR = {
					create_diplomatic_pact = {
						country = c:SLO
						type = dominion
					}
				}
			}
			s:STATE_CROATIA = {
				create_country = {
					tag = CRO
					origin = this
					state = s:STATE_CROATIA.region_state:TUR
					on_created = {
						set_variable = turkfm_rebellion_tag_tracker
						turkfm_set_rebellion_laws = yes
					}
				}
				c:TUR = {
					create_diplomatic_pact = {
						country = c:CRO
						type = dominion
					}
				}
			}
			s:STATE_DALMATIA = {
				create_country = {
					tag = CRO_DAL
					origin = this
					state = s:STATE_DALMATIA.region_state:TUR
					on_created = {
						set_variable = turkfm_rebellion_tag_tracker
						turkfm_set_rebellion_laws = yes
					}
				}
				c:TUR = {
					create_diplomatic_pact = {
						country = c:CRO_DAL
						type = dominion
					}
				}
			}
			s:STATE_SLAVONIA = {
				create_country = {
					tag = CRO_SLA
					origin = this
					state = s:STATE_SLAVONIA.region_state:TUR
					on_created = {
						set_variable = turkfm_rebellion_tag_tracker
						turkfm_set_rebellion_laws = yes
					}
				}
				c:TUR = {
					create_diplomatic_pact = {
						country = c:CRO_SLA
						type = dominion
					}
				}
			}
		}
	}
}

turkfm_hellenic_revolt_effect = { # this does NOT select the revolt state/tag, nor clear the revolt variables
	scope:turkfm_revolt_state_scope = {
		switch = {
			trigger = state_region
			s:STATE_THESSALIA = {
				create_country = {
					tag = EPI
					origin = c:TUR
					state = s:STATE_THESSALIA.region_state:TUR
					state = s:STATE_ALBANIA.region_state:TUR
					on_created = {
						set_variable = turkfm_greek_rebellion_tracker
						turkfm_set_rebellion_laws = yes
					}
				}
			}
			s:STATE_ALBANIA = {
				create_country = {
					tag = EPI
					origin = c:TUR
					state = s:STATE_ALBANIA.region_state:TUR
					on_created = {
						set_variable = turkfm_greek_rebellion_tracker
						turkfm_set_rebellion_laws = yes
					}
				}
			}
			s:STATE_MACEDONIA = {
				create_country = {
					tag = MAC
					origin = c:TUR
					state = s:STATE_MACEDONIA.region_state:TUR
					on_created = {
						set_variable = turkfm_greek_rebellion_tracker
						turkfm_set_rebellion_laws = yes
					}
				}
			}
			s:STATE_SKOPIA = {
				create_country = {
					tag = NMAC
					origin = c:TUR
					state = s:STATE_SKOPIA.region_state:TUR
					on_created = {
						set_variable = turkfm_greek_rebellion_tracker
						turkfm_set_rebellion_laws = yes
					}
				}
			}
			s:STATE_AYDIN = {
				create_country = {
					tag = SMYR
					origin = c:TUR
					state = s:STATE_AYDIN.region_state:TUR
					on_created = {
						set_variable = turkfm_greek_rebellion_tracker
						turkfm_set_rebellion_laws = yes
					}
				}
			}
			s:STATE_CYPRUS = {
				create_country = {
					tag = CYP
					origin = c:TUR
					state = s:STATE_CYPRUS.region_state:TUR
					on_created = {
						set_variable = turkfm_greek_rebellion_tracker
						turkfm_set_rebellion_laws = yes
					}
				}
			}
			s:STATE_CRETE = {
				create_country = {
					tag = CRE
					origin = c:TUR
					state = s:STATE_CRETE.region_state:TUR
					on_created = {
						set_variable = turkfm_greek_rebellion_tracker
						turkfm_set_rebellion_laws = yes
					}
				}
			}
		}
	}
	random_country = {
		limit = {
			has_variable = turkfm_greek_rebellion_tracker
		}
		save_scope_as = turkfm_greek_revolt_scope
		every_scope_state = {
			state_region = {
				add_claim = root
			}
		}
		capital = {
			save_scope_as = turkfm_greek_revolt_capital_scope
		}
	}
	if = {
		limit = {
			is_country_type = recognized
		}
		create_diplomatic_pact = {
			country = scope:turkfm_greek_revolt_scope
			type = puppet
		}
	}
	else_if = {
		limit = {
			is_country_type = unrecognized
		}
		create_diplomatic_pact = {
			country = scope:turkfm_greek_revolt_scope
			type = vassal
		}
	}
	every_country = {
		limit = {
			country_has_primary_culture = cu:greek
			NOT = {
				scope:turkfm_greek_revolt_scope = this
			}
		}
		trigger_event = {
			id = turkfm.297 # Hellenes Revolt in State (Third)
		}
	}
	hidden_effect = {
		every_country = {
			limit = {
				has_journal_entry = je_turkfm_eastern_question
				NOT = {
					country_has_primary_culture = cu:greek
				}
			}
			post_notification = notification_turkfm_greek_revolt
		}
	}
}

turkfm_rhomaios_revolt_effect = {
}

turkfm_yugoslav_revolt_effect = {
}

turkfm_set_rebellion_laws = {
	activate_law = law_type:law_parliamentary_republic
	activate_law = law_type:law_state_religion
	activate_law = law_type:law_census_voting
	activate_law = law_type:law_appointed_bureaucrats
	activate_law = law_type:law_no_schools
	activate_law = law_type:law_no_police
	activate_law = law_type:law_land_based_taxation
	activate_law = law_type:law_national_supremacy
	activate_law = law_type:law_traditionalism
	activate_law = law_type:law_mercantilism
	activate_law = law_type:law_no_workers_rights
	activate_law = law_type:law_censorship
	activate_law = law_type:law_professional_army
	activate_law = law_type:law_migration_controls
	activate_law = law_type:law_tenant_farmers
}

turkfm_secession_start_effect = {
	turkfm_add_large_deescalation_effect = yes
	every_country = {
		limit = {
			turkfm_balkans_party_trigger = yes
		}
		post_notification = notification_turkfm_secession_start
	}
}

turkm_cleanup_tension_main_effect = {
	remove_global_variable = turkfm_separatism_phase_var
	remove_global_variable = turkfm_separatism_transition_var
	remove_global_variable = turkfm_escalation_var
	remove_global_variable = turkfm_deescalation_var
	
	remove_variable = turkfm_hellene_loyalists_var
	remove_variable = turkfm_rhomaios_loyalists_var
	remove_variable = turkfm_serb_loyalists_var
	remove_variable = turkfm_bulgarian_loyalists_var
	remove_variable = turkfm_romanian_loyalists_var
	remove_variable = turkfm_bosniak_loyalists_var
	remove_variable = turkfm_albanian_loyalists_var
	remove_variable = turkfm_croat_loyalists_var
	remove_variable = turkfm_slovene_loyalists_var
	remove_variable = turkfm_hellene_radicals_var
	remove_variable = turkfm_rhomaios_radicals_var
	remove_variable = turkfm_serb_radicals_var
	remove_variable = turkfm_bulgarian_radicals_var
	remove_variable = turkfm_romanian_radicals_var
	remove_variable = turkfm_bosniak_radicals_var
	remove_variable = turkfm_albanian_radicals_var
	remove_variable = turkfm_croat_radicals_var
	remove_variable = turkfm_slovene_radicals_var
	remove_variable = turkfm_tension_event_cooldown_var
}

#### NATIONALISM CRISIS EFFECTS ####

turkfm_initialize_crisis_effect = {
	set_global_variable = {
		name = turkfm_total_riots_var
		value = 0
	}
	set_global_variable = {
		name = turkfm_crisis_var
		value = 0
	}
	set_global_variable = {
		name = turkfm_crisis_progress_var
		value = 0
	}
	change_global_variable = {
		name = turkfm_crisis_counter_var
		add = 1
	}
	set_variable = turkfm_crisis_target
}

turkfm_crisis_weekly_effect = {
	if = {
		limit = {
			has_global_variable = turkfm_crisis_var
			NOT = {
				has_global_variable = turkfm_crisis_launched
			}
		}
		if = {
			limit = {
				has_global_variable = turkfm_crisis_leader_var
				exists = global_var:turkfm_crisis_leader_var
			}
			global_var:turkfm_crisis_leader_var = {
				remove_variable = turkfm_crisis_leader
			}
		}
		remove_global_variable = turkfm_crisis_leader_var
		ordered_country = {
			limit = {
				has_variable = turkfm_crisis_attacker
			}
			order_by = prestige
			max = 1
			check_range_bounds = no
			save_scope_as = turkfm_crisis_leader_scope
		}
		if = {
			limit = {
				exists = scope:turkfm_crisis_leader_scope
			}
			scope:turkfm_crisis_leader_scope = {
				set_variable = turkfm_crisis_leader
			}
			set_global_variable = {
				name = turkfm_crisis_leader_var
				value = scope:turkfm_crisis_leader_scope
			}
		}
		change_global_variable = {
			name = turkfm_crisis_var
			add = var:turkfm_crisis_progress_var
		}
		set_global_variable = {
			name = turkfm_crisis_progress_var
			value = turkfm_crisis_progress_value
		}
	}
}

turkfm_build_crisis_effect = {
	
	remove_global_variable = turkfm_crisis_var
	remove_global_variable = turkfm_crisis_progress_var
	set_global_variable = turkfm_crisis_launched
}

turkfm_crisis_armistice_effect = {
	set_global_variable = turkfm_congress_var
	if = {
		limit = {
			global_var:turkfm_congress_counter_var = 0 # special hardcoding for the Great Eastern Crisis
		}
		c:PRU ?= {
			save_scope_as = prussia_scope
		}
		if = {
			limit = {
				exists = scope:prussia_scope
			}
			scope:prussia_scope = {
				set_variable = turkfm_congress_host
			}
		}
		else = {
			random_country = {
				limit = {
					country_rank >= rank_value:great_power
					NOR = {
						has_variable = turkfm_crisis_leader
						has_variable = turkfm_crisis_target
					}
				}
				set_variable = turkfm_congress_host
			}
		}
	}
	else = {
		random_country = {
			limit = {
				turkfm_balkans_party_trigger = yes
				NOT = {
					has_variable = turkfm_crisis_leader
				}
			}
			set_variable = turkfm_armistice_host_var
		}
		random_country = {
			limit = {
				country_rank >= rank_value:great_power
				NOR = {
					has_variable = turkfm_crisis_leader
					has_variable = turkfm_crisis_target
				}
			}
			set_variable = turkfm_congress_host
		}
	}
	random_country = {
		limit = {
			has_variable = turkfm_congress_host
		}
		save_scope_as = turkfm_congress_host_scope
	}
	set_global_variable = {
		name = turkfm_congress_host_var
		value = scope:turkfm_congress_host_scope
	}
}

turkfm_cleanup_congress_effect = {
	remove_global_variable = turkfm_congress_var
	remove_global_variable = turkfm_congress_host_var
	remove_variable = turkfm_crisis_leader
	remove_variable = turkfm_crisis_target
	remove_variable = turkfm_crisis_attacker
	remove_variable = turkfm_crisis_defender
	remove_variable = turkfm_congress_host
}

#### ALBANIAN PIRACY EFFECTS ####

turkfm_awaken_jack_sparrow_effect = {
	create_character = {
		template = template_turkfm_jack_sparrow
		first_name = Rafil
		last_name = Bey #
		on_created = {
			place_character_in_void = 300
		}
	}
	random_character_in_void = {
		limit = {
			has_template = template_turkfm_jack_sparrow
		}
		save_scope_as = turkfm_jack_sparrow_scope
	}
	set_variable = {
		name = turkfm_jack_sparrow_var
		value = scope:turkfm_jack_sparrow_scope
	}
	je:je_turkfm_pirates_of_the_adriatic = {
		add_to_variable_list = {
			name = com_journal_characters
			target = scope:turkfm_jack_sparrow_scope
		}
	}
}

turkfm_jack_sparrow_effect = {
	## Step 1, Check for pirate leader
	if = {
		limit = {
			any_character_in_void = {
				has_template = template_turkfm_jack_sparrow
			}
			
		}
		random_character_in_void = {
			limit = {
				has_template = template_turkfm_jack_sparrow
			}
		}
		save_scope_as = turkfm_jack_sparrow_scope
	}
	else = {
		create_character = {
			template = template_turkfm_jack_sparrow
			on_created = {
				place_character_in_void = 300
			}
		}
		random_character_in_void = {
			limit = {
				has_template = template_turkfm_jack_sparrow
			}
			save_scope_as = turkfm_jack_sparrow_scope
		}
		every_country = {
			limit = {
				has_journal_entry = je_turkfm_pirates_of_the_adriatic
			}
			post_notification = notification_turkfm_jack_sparrow_reincarnated
		}
	}
	set_variable = {
		name = turkfm_jack_sparrow_var
		value = scope:turkfm_jack_sparrow_scope
	}
	
	## Step 2, Check for ongoing expedition
	if = {
		limit = {
			any_scope_character = {
				has_modifier = modifier_turkfm_leading_expedition
			}
		}
		random_scope_character = {
			limit = {
				has_modifier = modifier_turkfm_leading_expedition
			}
			save_scope_as = turkfm_cutler_beckett_scope
		}
	}
	if = {
		limit = {
			exists = scope:turkfm_cutler_beckett_scope
		}
		set_variable = {
			name = turkfm_cutler_beckett_var
			value = scope:turkfm_cutler_beckett_scope
		}
	}
	else = {
		remove_variable = turkfm_cutler_beckett_var
	}
	
	## Step 3, Update Lists and progress bars
	je:je_turkfm_pirates_of_the_adriatic = {
		set_bar_progress = {
			name = turkfm_jack_sparrow_progress_bar
			value = global_var:turkfm_pirates_var
		}
		clear_variable_list = com_journal_characters
		add_to_variable_list = {
			name = com_journal_characters
			target = scope:turkfm_jack_sparrow_scope
		}
		if = {
			limit = {
				exists = scope:turkfm_cutler_beckett_scope
			}
			add_to_variable_list = {
				name = com_journal_characters
				target = scope:turkfm_cutler_beckett_scope
			}
		}
	}
}

turkfm_piracy_scopes_effect = {
	random_character_in_void = {
		limit = {
			has_template = template_turkfm_jack_sparrow
		}
		save_scope_as = turkfm_jack_sparrow_scope
	}
	random_scope_character = {
		limit = {
			has_modifier = modifier_turkfm_leading_expedition
		}
		save_scope_as = turkfm_cutler_beckett_scope
	}
}

turkfm_cleanup_piracy_effect = {
	every_scope_character = {
		limit = {
			has_modifier = modifier_turkfm_leading_expedition
		}
		remove_modifier = modifier_turkfm_leading_expedition
		add_modifier = {
			name = modifier_turkfm_failed_expedition
			months = long_modifier_time
		}
	}
	if = {
		limit = {
			has_modifier = modifier_turkfm_deployed_expedition
		}
		remove_modifier = modifier_turkfm_deployed_expedition
	}
	remove_variable = turkfm_jack_sparrow_var
	remove_variable = turkfm_cutler_beckett_var
	remove_variable = turkfm_expedition_transit_var
	remove_variable = turkfm_expedition_progress_var
	remove_variable = turkfm_expedition_peril_var
}

#### EXPEDITION EFFECTS ####

## General Expedition Effects

turkfm_add_small_peril_effect = {
	custom_tooltip = {
		text = turkfm_peril_plus_1
		change_variable = {
			name = turkfm_expedition_peril_var
			add = 1
		}
		clamp_variable = {
			name = turkfm_expedition_peril_var
			max = 10
			min = 0
		}
	}
}

turkfm_add_medium_peril_effect = {
	custom_tooltip = {
		text = turkfm_peril_plus_2
		change_variable = {
			name = turkfm_expedition_peril_var
			add = 2
		}
		clamp_variable = {
			name = turkfm_expedition_peril_var
			max = 10
			min = 0
		}
	}

}

turkfm_add_large_peril_effect = {
	custom_tooltip = {
		text = turkfm_peril_plus_3
		change_variable = {
			name = turkfm_expedition_peril_var
			add = 3
		}
		clamp_variable = {
			name = turkfm_expedition_peril_var
			max = 10
			min = 0
		}
	}
}

turkfm_remove_small_peril_effect = {
	custom_tooltip = {
		text = turkfm_peril_minus_1
		change_variable = {
			name = turkfm_expedition_peril_var
			subtract = 1
		}
		clamp_variable = {
			name = turkfm_expedition_peril_var
			max = 10
			min = 0
		}
	}

}

turkfm_remove_medium_peril_effect = {
	custom_tooltip = {
		text = turkfm_peril_minus_2
		change_variable = {
			name = turkfm_expedition_peril_var
			subtract = 2
		}
		clamp_variable = {
			name = turkfm_expedition_peril_var
			max = 10
			min = 0
		}
	}
}

turkfm_remove_large_peril_effect = {
	custom_tooltip = {
		text = turkfm_peril_minus_3
		change_variable = {
			name = turkfm_expedition_peril_var
			subtract = 3
		}
		clamp_variable = {
			name = turkfm_expedition_peril_var
			max = 10
			min = 0
		}
	}
}

turkfm_add_small_progress_effect = {
	custom_tooltip = {
		text = turkfm_progress_plus_1
		change_variable = {
			name = turkfm_expedition_progress_var
			add = 1
		}
		clamp_variable = {
			name = turkfm_expedition_progress_var
			max = 10
			min = 0
		}
	}
}

turkfm_add_medium_progress_effect = {
	custom_tooltip = {
		text = turkfm_progress_plus_2
		change_variable = {
			name = turkfm_expedition_progress_var
			add = 2
		}
		clamp_variable = {
			name = turkfm_expedition_progress_var
			max = 10
			min = 0
		}
	}
}

turkfm_add_large_progress_effect = {
	custom_tooltip = {
		text = turkfm_progress_plus_3
		change_variable = {
			name = turkfm_expedition_progress_var
			add = 3
		}
		clamp_variable = {
			name = turkfm_expedition_progress_var
			max = 10
			min = 0
		}
	}
}

turkfm_remove_small_progress_effect = {
	custom_tooltip = {
		text = turkfm_progress_minus_1
		change_variable = {
			name = turkfm_expedition_progress_var
			subtract = 1
		}
		clamp_variable = {
			name = turkfm_expedition_progress_var
			max = 10
			min = 0
		}
	}
}

turkfm_remove_medium_progress_effect = {
	custom_tooltip = {
		text = turkfm_progress_minus_2
		change_variable = {
			name = turkfm_expedition_progress_var
			subtract = 2
		}
		clamp_variable = {
			name = turkfm_expedition_progress_var
			max = 10
			min = 0
		}
	}
}

turkfm_remove_large_progress_effect = {
	custom_tooltip = {
		text = turkfm_progress_minus_3
		change_variable = {
			name = turkfm_expedition_progress_var
			subtract = 3
		}
		clamp_variable = {
			name = turkfm_expedition_progress_var
			max = 10
			min = 0
		}
	}
}

turkfm_clear_expedition_effect = {
	remove_variable = turkfm_expedition_var
	remove_variable = turkfm_expedition_progress_var
	remove_variable = turkfm_expedition_peril_var
}

## Piracy Expedition Effects

turkfm_start_piracy_expedition_effect = {
	remove_variable = turkfm_expedition_transit_var
	set_variable = {
		name = turkfm_expedition_var
		value = 1 # Piracy Expedition
	}
	set_variable = {
		name = turkfm_expedition_progress_var
		value = 0
	}
	set_variable = {
		name = turkfm_expedition_peril_var
		value = 0
	}
}

turkfm_cancel_piracy_expedition_effect = {
	every_scope_character = {
		limit = {
			has_modifier = modifier_turkfm_leading_expedition
		}
		remove_modifier = modifier_turkfm_leading_expedition
	}
	remove_modifier = modifier_turkfm_deployed_expedition
	add_modifier = {
		name = modifier_turkfm_cancelled_expedition
		months = short_modifier_time
	}
	
}

turkfm_fail_piracy_expedition_effect = {
	every_scope_character = {
		limit = {
			has_modifier = modifier_turkfm_leading_expedition
		}
		remove_modifier = modifier_turkfm_leading_expedition
		add_modifier = {
			name = modifier_turkfm_failed_expedition
			months = long_modifier_time
		}
	}
	remove_modifier = modifier_turkfm_deployed_expedition
}

turkfm_complete_piracy_expedition_effect = {
	every_scope_character = {
		limit = {
			has_modifier = modifier_turkfm_leading_expedition
		}
		remove_modifier = modifier_turkfm_leading_expedition
		add_modifier = {
			name = modifier_turkfm_completed_expedition
			months = long_modifier_time
		}
		if = {
			limit = {
				has_modifier = modifier_turkfm_failed_expedition
			}
			remove_modifier = modifier_turkfm_failed_expedition
		}
	}
	remove_modifier = modifier_turkfm_deployed_expedition
	custom_tooltip = {
		text = turkfm_piracy_advance_1
		change_global_variable = {
			name = turkfm_pirates_var
			add = 1
		}
		if = {
			limit = {
				global_var:turkfm_pirates_var >= 5
			}
			set_variable = turkfm_jack_sparrow_captor
			hidden_effect = {
				trigger_event = {
					id = turkfm.908 # Jack Sparrow Clapped in Irons!
					days = 7
				}
			}
		}
	}
	set_variable = turkfm_completed_pirate_expedition
}
