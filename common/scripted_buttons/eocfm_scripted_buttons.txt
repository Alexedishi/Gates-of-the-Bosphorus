eocfm_declare_autocephaly_button = {
	name = "eocfm_declare_autocephaly"
	desc = "eocfm_declare_autocephaly_desc"
	
	visible = {
		NOT = {
			has_variable = eocfm_is_autocephalous
		}
	}
	
	possible = {
		is_subject = no
		custom_tooltip = {
			text = eocfm_need_800_tt
			hidden_trigger = {
				var:eocfm_patriarch_authority_var >= 800
			}
		}
		NOT = {
			has_journal_entry = je_eocfm_autocephaly
		}
		NOT = {
			has_law = law_type:law_theocracy
		}
	}
	
	effect = {
		add_journal_entry = {
			type = je_eocfm_autocephaly
		}
	}
}

eocfm_convoke_council_button = {
	name = "eocfm_convoke_council"
	desc = "eocfm_convoke_council_desc"
	
	visible = {
		has_variable = eocfm_is_autocephalous
	}
	
	possible = {
		is_subject = no
		is_at_war = no
		custom_tooltip = {
			text = eocfm_controls_major_seat_tt
			hidden_trigger = {
				eocfm_controls_major_seat_trigger = yes
			}
		}
		custom_tooltip = {
			text = eocfm_need_1000_tt
			hidden_trigger = {
				var:eocfm_patriarch_authority_var >= 1000
			}
		}
		custom_tooltip = {
			text = eocfm_has_autocephaly_tt
			hidden_trigger = {
				has_variable = eocfm_is_autocephalous
			}
		}
		custom_tooltip = {
			text = eocfm_convoke_council_tt1
			hidden_trigger = {
				global_var:eocfm_council_var < 4
			}
		}
		custom_tooltip = {
			text = eocfm_convoke_council_tt2
			hidden_trigger = {
				eocfm_can_host_council_trigger = yes
			}
		}
		custom_tooltip = {
			text = eocfm_convoke_council_tt3
			hidden_trigger = {
				NOT = {
					any_country = {
						has_modifier = modifier_eocfm_hosting_council
					}
				}
			}
		}
	}
	
	effect = {
		show_as_tooltip = {
			add_modifier = modifier_eocfm_hosting_council
		}
		hidden_effect = { # This is to present the player clean information in the UI, but has a time limit to avoid variable shenanigans
			add_modifier = {
				name = modifier_eocfm_hosting_council
				months = 12
			}
		}
		trigger_event = {
			id = eocfm.031 # Council of X
			days = 30
			popup = yes
		}
		every_country = {
			limit = {
				has_journal_entry = je_eocfm_patriarch_authority
				NOT = { has_modifier = modifier_eocfm_hosting_council }
			}
			trigger_event = {
				id = eocfm.030 # Ecumenical Council Convoked
				days = 30
			}
		}
	}
}

eocfm_commission_icon_button = {
	name = "eocfm_commission_icon"
	desc = "eocfm_commission_icon_desc"
	
	visible = {
		always = yes
	}
	
	possible = {
		has_technology_researched = romanticism
		custom_tooltip = {
			text = eocfm_need_200_tt
			hidden_trigger = {
				var:eocfm_patriarch_authority_var >= 200
			}
		}
		custom_tooltip = {
			text = eocfm_commission_icon_tt
			hidden_trigger = {
				eocfm_has_icon_trigger = no
				NOR = {
					has_variable = icon_page_1
					has_variable = icon_page_2
					has_variable = icon_page_3
				}
			}
		}
	}
	
	effect = {
		set_variable = icon_page_1
		trigger_event = {
			id = eocfm.020 # Commissioning an Icon
			popup = yes
		}
	}
}

eocfm_integrate_seat_button = {
	name = "eocfm_integrate_seat"
	desc = "eocfm_integrate_seat_desc"
	
	visible = {
		always = yes
	}
	
	possible = {
		custom_tooltip = {
			text = eocfm_need_500_tt
			hidden_trigger = {
				var:eocfm_patriarch_authority_var >= 500
			}
		}		
		custom_tooltip = {
			text = eocfm_has_autocephaly_tt
			hidden_trigger = {
				has_variable = eocfm_is_autocephalous
			}
		}
		is_subject = no
		custom_tooltip = {
			text = eocfm_integrate_seat_tt1
			hidden_trigger = {
				eocfm_can_integrate_seat_trigger = yes
			}
		}
		custom_tooltip = {
			text = eocfm_integrate_seat_tt2
			hidden_trigger = {
				NOT = {
					has_variable = eocfm_integration_var
				}
			}
		}
	}
	
	effect = {
		trigger_event = {
			id = eocfm.050 # Partiarchal Seat Claimed
		}
	}
}

eocfm_enact_caesaropapism_button = {
	name = "eocfm_enact_caesaropapism"
	desc = "eocfm_enact_caesaropapism_desc"
	
	visible = {
		NOT = {
			has_modifier = modifier_eocfm_caesaropapism
		}
	}
	
	possible = {	
		has_technology_researched = tech_bureaucracy
		ig:ig_devout = {
			is_in_government = no
			ig_approval > 0
		}
		NOT = {
			has_modifier = modifier_eocfm_revoked_caesaropapism
		}
	}
	
	effect = {
		custom_tooltip = eocfm_gain_100_tt
		add_modifier = modifier_eocfm_caesaropapism
		add_radicals = {
			pop_type = clergymen
			value = small_radicals
		}
		eocfm_update_authority = yes
	}
}

eocfm_revoke_caesaropapism_button = {
	name = "eocfm_revoke_caesaropapism"
	desc = "eocfm_revoke_caesaropapism_desc"
	
	visible = {
		has_modifier = modifier_eocfm_caesaropapism
	}
	
	possible = {
		has_modifier = modifier_eocfm_caesaropapism
		custom_tooltip = {
			text = eocfm_need_100_tt
			hidden_trigger = {
				var:eocfm_patriarch_authority_var >= 100
			}
		}
	}
	
	effect = {
		remove_modifier = modifier_eocfm_caesaropapism
		add_modifier = {
			name = modifier_eocfm_revoked_caesaropapism
			months = normal_modifier_time
			is_decaying = yes
		}
		add_loyalists = {
			pop_type = clergymen
			value = small_radicals
		}
		remove_variable = eocfm_caesaropapism_questioned
		eocfm_update_authority = yes
	}
}

eocfm_subsidize_church_button = {
	name = "eocfm_subsidize_church"
	desc = "eocfm_subsidize_church_desc"
	
	visible = {
		NOT = {
			has_modifier = modifier_eocfm_subsidizing_church
		}
	}
	
	possible = {
		NOT = {
			has_modifier = modifier_eocfm_subsidizing_church
		}
	}
	
	effect = {
		custom_tooltip = eocfm_gain_100_tt
		add_modifier = {
			name = modifier_eocfm_subsidizing_church
			multiplier = money_amount_multiplier_medium
		}
		ig:ig_devout = {
			add_modifier = modifier_eocfm_receiving_subsidies
		}
		eocfm_update_authority = yes
	}
}

eocfm_stop_subsidies_button = {
	name = "eocfm_stop_subsidies"
	desc = "eocfm_stop_subsidies_desc"
	
	visible = {
		has_modifier = modifier_eocfm_subsidizing_church
	}
	
	possible = {
		ig:ig_devout = {
			NOR = {
				is_powerful = yes
				is_in_government = yes
			}
		}
		custom_tooltip = {
			text = eocfm_need_100_tt
			hidden_trigger = {
				var:eocfm_patriarch_authority_var >= 100
			}
		}
	}
	
	effect = {
		remove_modifier = modifier_eocfm_subsidizing_church
		ig:ig_devout = {
			remove_modifier = modifier_eocfm_receiving_subsidies
		}
		eocfm_update_authority = yes
	}
}

eocfm_establish_sunday_schools_button = {
	name = "eocfm_establish_sunday_schools"
	desc = "eocfm_establish_sunday_schools_desc"
	
	visible = {
		NOT = { has_modifier = modifier_eocfm_sunday_schools }
	}
	
	possible = {
		NOT = { has_law = law_type:law_no_schools }
		NOT = { has_law = law_type:law_total_separation }
		NOT = { has_modifier = modifier_eocfm_sunday_schools }
		NOT = { has_modifier = modifier_eocfm_disbanded_sunday_schools }
	}
	
	effect = {
		add_modifier = modifier_eocfm_sunday_schools
	}
}

eocfm_disband_sunday_schools_button = {
	name = "eocfm_disband_sunday_schools"
	desc = "eocfm_disband_sunday_schools_desc"
	
	visible = {
		has_modifier = modifier_eocfm_sunday_schools
	}
	
	possible = {
		has_modifier = modifier_eocfm_sunday_schools
	}
	
	effect = {
		remove_modifier = modifier_eocfm_sunday_schools
		add_modifier = {
			name = modifier_eocfm_disbanded_sunday_schools
			months = normal_modifier_time
		}
	}
}

eocfm_dissolve_the_monasteries_button = {
	name = "eocfm_dissolve_the_monasteries"
	desc = "eocfm_dissolve_the_monasteries_desc"
	
	visible = {
		NOT = { has_variable = eocfm_dissolved_monasteries }
	}
	
	possible = {
		ig:ig_devout = {
			is_powerful = no
			is_in_government = no
		}
	}
	
	effect = {
		add_modifier = {
			name = modifier_eocfm_dissolved_monasteries
			months = normal_modifier_time
			is_decaying = yes
		}
		set_variable = eocfm_dissolved_monasteries
	}
}
