###################
# THE BAVAROCRACY #
###################
je_grefm_regency_council = {
	icon = "gfx/interface/icons/event_icons/event_armansperg.dds"
	
	group = je_group_grefm_monarchism
	
	should_be_pinned_by_default = yes
	
	immediate = {
	}
	
	modifiers_while_active = {
		modifier_grefm_armansperg_regency
	}
	
	complete = {
		custom_tooltip = {
			text = je_grefm_regency_council_tt
			has_variable = grefm_regency_completed
		}
	}
	
	on_complete = {
		custom_tooltip = je_grefm_regency_council_complete_tt
	}

	weight = 1000
	
}

je_grefm_bavarocracy_main = {
	icon = "gfx/interface/icons/event_icons/event_otto.dds"
	
	group = je_group_grefm_monarchism
	
	should_be_pinned_by_default = yes
	
	immediate = {
		set_variable = {
			name = grefm_ruler_popularity_var
			value = grefm_ruler_popularity_value
		}		
		set_variable = {
			name = grefm_bavarocracy_progress_var
			value = grefm_bavarocracy_progress_value
		}
	}
	
	modifiers_while_active = {
		modifier_grefm_bavarocracy
		modifier_grefm_westernized_thought
	}
	
	scripted_button = grefm_dismiss_auxilliaries_button
	scripted_button = grefm_release_nikitaras_button
	scripted_button = grefm_authorize_palace_button
	scripted_button = grefm_philhellenic_loan_button
	
	complete = {
		has_law = law_type:law_monarchy
		custom_tooltip = {
			text = je_grefm_bavarocracy_tt1
			hidden_trigger = {
				has_variable = grefm_constitution_completed
			}
		}
		custom_tooltip = {
			text = je_grefm_bavarocracy_tt2
			hidden_trigger = {
				has_variable = balkfm_land_reform_complete
			}
		}
		custom_tooltip = {
			text = je_grefm_bavarocracy_tt3
			hidden_trigger = {
				has_variable = balkfm_brigandage_complete
			}
		}
		custom_tooltip = {
			text = je_grefm_bavarocracy_tt4
			hidden_trigger = {
				has_variable = balkfm_civic_reform_complete
			}
		}
	}
	
	on_complete = {
		trigger_event = {
			id = grefm.007 # mandate secured
		}
	}
		
	fail = { # Without any interaction, this will fire in the 1860s. You have hella time... irl, Otto got to shit the bed for a while anyways
		custom_tooltip = {
			text = je_grefm_bavarocracy_fail_tt
			hidden_trigger = {
				var:grefm_bavarocracy_var <= 0
			}
		}
	}
	
	on_fail = {
		custom_tooltip = {
			text = je_grefm_bavarocracy_main_complete_tt
			hidden_effect = {
				if = {
					limit = {
						has_variable = grefm_tyranny_busted
					}
					trigger_event = {
						id = grefm.008 # The Overthrow of the Bavarocracy
					}
				}
				else = {
					trigger_event = {
						id = grefm.006 # The October Revolution
					}
				}
			}
		}
	}
	
	invalid = {
		OR = {
			NOT = {
				has_law = law_type:law_monarchy 
			}
			custom_tooltip = {
				text = je_grefm_bavarocracy_completed_tt
				hidden_trigger = {
					has_variable = grefm_bavarocracy_completed
				}
			}
		}
	}
	
	on_invalid = {
		if = {
			limit = {
				NOT = {
					has_law = law_type:law_monarchy
				}
			}
			trigger_event = {
				id = grefm.005 # 404 monarch not found
			}
		}
		hidden_effect = {
			clean_up_bavarocracy_effect = yes
		}
	}
	
	on_weekly_pulse = {
		effect = {
			set_variable = {
				name = grefm_bavarocracy_progress_var
				value = grefm_bavarocracy_progress_value
			}
		}
	}
	
	on_monthly_pulse = {
		events = {
			grefm.026 # The Philorthodox Conspiracy
		}
		effect = {
			set_variable = {
				name = grefm_ruler_popularity_var
				value = grefm_ruler_popularity_value
			}
			change_variable = {
				name = grefm_bavarocracy_var
				add = var:grefm_bavarocracy_progress_var
			}
		}
	}

	current_value = {
		value = var:grefm_bavarocracy_var
	}

	goal_add_value = {
		value = 2000
	}

	progressbar = yes

	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = je_grefm_bavarocracy_main_status
			}
		}
	}

	weight = 5000 # this gets top billing, its the heart of grefm after all

	transferable = no
}
	
je_grefm_greek_constitution = {
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"
	
	group = je_group_grefm_monarchism
	
	should_be_pinned_by_default = yes
	
	complete = {
		has_law = law_type:law_monarchy
		OR = {
			AND = {
				OR = {
					has_law = law_type:law_appointed_bureaucrats
					has_law = law_type:law_elected_bureaucrats
				}
				OR = {
					has_law = law_type:law_census_voting
					has_law = law_type:law_universal_suffrage
				}
			}
			AND = {
				has_law = law_type:law_monarchy
				has_law = law_type:law_autocracy
			}
		}
	}
	
	on_complete = {
		custom_tooltip = je_grefm_greek_constitution_tt1
		custom_tooltip = je_grefm_greek_constitution_tt2
		hidden_effect = {
			if = {
				limit = {
					has_law = law_type:law_autocracy
				}
				trigger_event = {
					id = grefm.004 # lol you really thought that INCREASING autocracy was the solution?
				}
			}
			else_if = {
				limit = {
					OR = {
						has_law = law_type:law_census_voting
						has_law = law_type:law_universal_suffrage
					}
				}
				trigger_event= {
					id =  grefm.002 # nice, the revolution was averted
				}
			}
		}
		set_variable = grefm_don_pacifico_var
	}
	
	timeout = 2406 # This comes at you quickly and that is intentional; there were several attempts to convince Otto to pass *any* constitution and he refused; was set to 2801 but has been reduced to accomodate the new Regency event chain
	
	on_timeout = {
		hidden_effect = {
			trigger_event = {
				id = grefm.003 # its constitution time
			}
		}
		set_variable = grefm_don_pacifico_var
	}

	invalid = {
		OR = {
			NOT = {
				has_law = law_type:law_monarchy 
			}
			custom_tooltip = {
				text = je_grefm_bavarocracy_completed_tt
				hidden_trigger = {
					has_variable = grefm_bavarocracy_completed
				}
			}
		}
	}

	weight = 4999
	
	transferable = no
}


je_grefm_land_reform = {
	icon = "gfx/interface/icons/event_icons/event_scales.dds"
	
	group = je_group_grefm_monarchism
	
	immediate = {
	}
	
	modifiers_while_active = {
		modifier_grefm_outdated_argiculture
	}
	
	complete = {
		NOR = {
			has_law = law_type:law_traditionalism
			has_law = law_type:law_agrarianism
		}
		NOR = {
			has_law = law_type:law_serfdom
			has_law = law_type:law_tenant_farmers
		}
		any_scope_building = {
			filter = {
				is_building_type = building_wheat_farm
			}
			percent = 1
			NOR = {
				has_active_production_method = pm_simple_farming
				has_active_production_method = pm_tools_disabled
			}
			level >= 10
			weekly_profit > 5
			occupancy >= 0.9
		}
	}
	
	on_complete = {
		trigger_event = {
			id = grefm.012 # The Great Land Reformation
		}
	}
	
	invalid = {
		hidden_trigger = {
			OR = {
				has_variable = grefm_bavarocracy_completed
				has_variable = balkfm_land_reform_complete
			}
		}
	}
	
	on_invalid = {
		hidden_effect = {
			if = {
				limit = {
					NOT = {
						has_variable = balkfm_land_reform_complete
					}
				}
				add_journal_entry = {
					type = je_balkfm_land_reform
				}
			}
		}
	}

	weight = 4998
	
	transferable = no
}

je_grefm_brigandage = {
	icon = "gfx/interface/icons/event_icons/event_fire.dds"
	
	group = je_group_grefm_monarchism
	
	immediate = {
	}
	
	modifiers_while_active = {
		modifier_grefm_insecure_countryside
	}
	
	complete = {
		NOR = {
			has_law = law_type:law_no_police
			has_law = law_type:law_local_police
		}
		OR = {
			institution_investment_level = {
				institution = institution_police
				value >= 3
			}
			NOT = {
				any_scope_state = {
					turmoil > 0.20
				}
			}
		}
	}
	
	on_complete = {
		trigger_event = {
			id = grefm.014 # The End of the Brigands
		}
	}
	
	on_monthly_pulse = {
		random_events = {
			chance_of_no_event = 95
			5 = balkfm.110 # The Brigands Raid Again!
		}
	}
	
	invalid = {
		hidden_trigger = {
			OR = {
				has_variable = grefm_bavarocracy_completed
				has_variable = balkfm_brigandage_complete
			}
		}
	}
	
	on_invalid = {
		hidden_effect = {
			if = {
				limit = {
					NOT = {
						has_variable = balkfm_brigandage_complete
					}
				}
				add_journal_entry = {
					type = je_balkfm_brigandage
				}
			}
		}
	}
	
	weight = 4997
	
	transferable = no	
}

je_grefm_civic_tradition = {
	icon = "gfx/interface/icons/event_icons/event_election.dds"
	
	group = je_group_grefm_monarchism
	
	immediate = {
	}
	
	modifiers_while_active = {
		modifier_grefm_poor_administration
	}
	
	complete = {
		NOT = {
			has_law = law_type:law_hereditary_bureaucrats
		}
		ig:ig_intelligentsia = {
			is_marginal = no
		}
		ig:ig_landowners = {
			is_powerful = no
			is_insurrectionary = no
		}
		bureaucracy >= 0 
		approaching_bureaucracy_shortage = no
	}
		
	on_complete = {
		trigger_event = {
			id = grefm.016 # An Honorable Regime
		}
	}
	
	invalid = {
		hidden_trigger = {
			OR = {
				has_variable = grefm_bavarocracy_completed
				has_variable = balkfm_civic_reform_complete
			}
		}
	}
	
	on_invalid = {
		hidden_effect = {
			if = {
				limit = {
					NOT = {
						has_variable = balkfm_civic_reform_complete
					}
				}
				add_journal_entry = {
					type = je_balkfm_civic_reform
				}
			}
		}
	}
	
	weight = 4996
	
	transferable = no
}

je_grefm_the_tyranny_of_house_wittelsbach = {
	icon = "gfx/interface/icons/event_icons/event_otto.dds"
	
	group = je_group_grefm_monarchism
	
	should_be_pinned_by_default = yes	

	immediate = {
		grefm_calculate_tyranny_variables_effect = yes
	}

	complete = {
		custom_tooltip = {
			text = je_grefm_the_tyranny_of_house_wittelsbach_goal
			hidden_trigger = {
				scope:journal_entry = {
					is_goal_complete = yes
				}
				NOT = {
					any_civil_war = {
						civil_war_progress > 0.5
						is_civil_war_type = revolution
					}
				}
			}
		}
		has_law = law_type:law_monarchy
		has_law = law_type:law_autocracy
		OR = {
			has_law = law_type:law_hereditary_bureaucrats
			has_law = law_type:law_appointed_bureaucrats
		}
		OR = {
			has_law = law_type:law_serfdom	
			has_law = law_type:law_tenant_farmers
		}
	}
	
	on_complete = {
		trigger_event = {
			id = grefm.007 # mandate secured
		}
		set_variable = grefm_bavarocracy_secured
	}
	
	fail = {
		OR = {
			custom_tooltip = {
				text = je_grefm_tyranny_tt
				hidden_trigger = {
					var:grefm_tyranny_var <= 0
				}
			}
			NOR = {
				has_law = law_type:law_autocracy
				has_law = law_type:law_oligarchy
			}
		}
	}
	
	on_fail = {
		trigger_event = {
			id = grefm.009 # A Disgraced Tyrant
		}
	}

	invalid = {
		OR = {
			NOT = {
				has_law = law_type:law_monarchy 
			}
			custom_tooltip = {
				text = je_grefm_bavarocracy_completed_tt
				hidden_trigger = {
					has_variable = grefm_bavarocracy_completed
				}
			}
		}
	}
	
	on_invalid = {
		remove_variable = grefm_tyranny_var
		remove_variable = grefm_otto_points
	}

	modifiers_while_active {
		modifier_grefm_tyrannical_ruler
	}
	
	on_weekly_pulse = {
		effect = {
			grefm_calculate_tyranny_variables_effect = yes
		}
	}
	
	on_monthly_pulse = {
		effect = {
			change_variable = {
				name = grefm_tyranny_var
				add = var:grefm_tyranny_progress_var
			}
			if = {
				limit = {
					has_law = law_type:law_monarchy
					has_law = law_type:law_autocracy
					has_law = law_type:law_state_religion
					OR = {
						has_law = law_type:law_hereditary_bureaucrats
						has_law = law_type:law_appointed_bureaucrats
					}
					OR = {
						has_law = law_type:law_serfdom	
						has_law = law_type:law_tenant_farmers
					}
					NOT = {
						any_civil_war = {
							civil_war_progress > 0.5
							is_civil_war_type = revolution
						}
					}
				}
				change_variable = {
					name = grefm_otto_points
					add = 1
				}
			}
			else = {
				change_variable = {
					name = grefm_otto_points
					subtract = 1
				}
			}
		}
	}
	
	current_value = {
		value = root.var:grefm_otto_points
	}

	goal_add_value = {
		add = 60
	}
	
	progressbar = yes
	
	status_desc = {
		triggered_desc = {
			desc = je_grefm_the_tyranny_of_house_wittelsbach_status
			trigger = {
				always = yes
			}
		}
	}

	weight = 4999
	
	transferable = no	
}

je_grefm_bavarian_greece = {
	icon = "gfx/interface/icons/event_icons/event_otto.dds"
	
	group = je_group_grefm_monarchism
	
	should_be_pinned_by_default = yes
	
	immediate = {
		set_variable = {
			name = grefm_absolutism_var
			value = 0
		}
	}
	
	complete = {
		custom_tooltip = {
			text = je_grefm_bavarian_greece_tt
			scope:journal_entry = { is_goal_complete = yes }
		}
		has_law = law_type:law_monarchy
		has_law = law_type:law_autocracy
		NOT = {
			any_civil_war = {
				civil_war_progress > 0.5
				is_civil_war_type = revolution
			}
		}
		NOT = {
			any_interest_group = {
				law_stance = {
					law = law_type:law_monarchy
					value < neutral
				}
				is_powerful = yes
			}
		}
		NOT = {
			any_interest_group = {
				law_stance = {
					law = law_type:law_autocracy
					value < neutral
				}
				is_powerful = yes
			}
		}
	}
	
	on_complete = {
		trigger_event = {
			id = grefm.029 # Absolutism in Greece
		}
		remove_variable = grefm_absolutism_var
	}
	
	fail = {
		NAND = {
			has_law = law_type:law_monarchy
			has_law = law_type:law_autocracy
		}
	}
	
	on_fail = {
	}
	
	current_value = {
		value = root.var:grefm_absolutism_var
	}

	goal_add_value = {
		value = 60
	}
	
	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					has_law = law_type:law_monarchy
					has_law = law_type:law_autocracy
					NOT = {
						any_civil_war = {
							civil_war_progress > 0.5
							is_civil_war_type = revolution
						}
					}
					NOT = {
						any_interest_group = {
							law_stance = {
								law = law_type:law_monarchy
								value < neutral
							}
							is_powerful = yes
						}
					}
					NOT = {
						any_interest_group = {
							law_stance = {
								law = law_type:law_autocracy
								value < neutral
							}
							is_powerful = yes
						}
					}
				}
				change_variable = {
					name = grefm_absolutism_var
					add = 1
				}
			}
		}
	}

	progressbar = yes

	weight = 500
	
}

###############################
# THE CONSTITUTIONAL MONARCHY #
###############################
je_grefm_the_dedilomeni_principle = {
	icon = "gfx/interface/icons/event_icons/event_glucksburg.dds"
	
	group = je_group_grefm_monarchism
	
	should_be_pinned_by_default = yes
	
	immediate = {
		if = {
			limit = {
				NOT = {
					has_variable = grefm_dedilomeni_var
				}
			}
			set_variable = {
				name = grefm_dedilomeni_var
				value = 0
			}
		}
	}	
	
	complete = {
		custom_tooltip = {
			text = je_grefm_the_dedilomeni_principle_tt
			hidden_trigger = {
				scope:journal_entry = { 
					is_goal_complete = yes 
				}
			}
		}
		has_law = law_type:law_universal_suffrage
		government_legitimacy >= 80
		ig:ig_landowners = {
			is_in_government = no
		}
	}
	
	on_complete = {
		trigger_event = {
			id = grefm.033 # A Harmonious State
		}
		remove_variable = grefm_dedilomeni_var
	}
	
	invalid = {
		NOT = {
			has_law = law_type:law_monarchy
		}
	}
	
	current_value = {
		value = root.var:grefm_dedilomeni_var
	}

	goal_add_value = {
		value = 60
	}	
	
	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					AND = {
						has_law = law_type:law_universal_suffrage
						government_legitimacy >= 80
					}
				}
				change_variable = {
					name = grefm_dedilomeni_var
					add = 1
				}
			}
		}
	}
	
	progressbar = yes
	
	weight = 5000

}

je_grefm_the_military_league = { # this is a modified vanilla coup JE
	icon = "gfx/interface/icons/event_icons/event_glucksburg.dds"
	
	group = je_group_grefm_monarchism
	
	should_be_pinned_by_default = yes
	
	immediate = {
		random_interest_group = {
			limit = {
				has_variable = coup_ig_var
			}
			save_scope_as = coup_ig
			remove_variable = coup_ig_var
		}
		random_law = {
			limit = {
				type = law_type:law_parliamentary_republic
			}
			save_scope_as = coup_desired_law
		}
		remove_variable = coup_for_law
	}
	
	on_weekly_pulse = {
		effect = {
			if = {
				limit = {
					scope:coup_ig = {
						OR = {
							is_powerful = no
						}
					}
				}
				change_variable = {
					name = coup_var
					add = -1
				}
			}
			if = {
				limit = {
					scope:coup_ig = {
						is_powerful = yes
						ig_approval < 0
					}
				}
				change_variable = {
					name = coup_var
					add = 1
				}
			}
		}
	}
	
	on_monthly_pulse = {
		events = {
			grefm.045 # a cretan champion
		}
		random_events = {
			130 = 0
			10 = coup_pulse_events.1
			10 = coup_pulse_events.2
			10 = coup_pulse_events.3 
			10 = coup_pulse_events.4
			10 = coup_pulse_events.5
			10 = coup_pulse_events.6
			10 = coup_pulse_events.7
			10 = coup_pulse_events.8
			10 = coup_pulse_events.9
			10 = coup_pulse_events.10
			25 = coup_pulse_events.11
			25 = coup_pulse_events.12
			25 = coup_pulse_events.13
			25 = coup_pulse_events.14
			25 = coup_pulse_events.15
			25 = coup_pulse_events.16
			25 = coup_pulse_events.17
			25 = coup_pulse_events.18
		}
	}

	complete = {
		scope:coup_ig = {
			is_powerful = yes
			ig_approval < 0
		}
		scope:journal_entry = {
			is_goal_complete = yes
		}
	}
	
	on_complete = {
		custom_tooltip = coup_success_tt
		if = {
			limit = {
				scope:coup_ig = {
					is_interest_group_type = ig_armed_forces
				}
			}
			set_variable = achievement_military_junta_var
		}
		remove_variable = coup_var
		if = {
			limit = {
				exists = currently_enacting_law
			}
			currently_enacting_law = {
				type = {
					save_scope_as = law_being_enacted
				}
				currently_active_law_in_group = {
					type = {
						save_scope_as = law_being_replaced
					}
				}
			}
			if = {
				limit = {
					scope:coup_ig = {
						prefers_law = { # If we prefer the current law to the enacting law
							law = scope:law_being_replaced
							comparison_law = scope:law_being_enacted
						}
					}
				}
				cancel_enactment = yes
			}	
		}
		trigger_event = {
			id = grefm.046 # the goudi coup
			popup = yes
		}
	}
	
	fail = {
		OR = {
			# fail if the coup has run out of steam
			custom_tooltip = {
				text = coup_no_progress
				root.var:coup_var <= 0
			}
			# fail if IG changes law stances
			scope:coup_ig = {
				law_stance = {
					law = scope:coup_desired_law.type
					value < approve
				}
			}
		}
	}
	
	on_fail = {
		custom_tooltip = coup_remove_ig
		# IG is angry that they were removed from government
		if = {
			limit = {
				scope:coup_ig = {
					is_in_government = no
					has_variable = resigned_from_gov_coup
				}
			}
			trigger_event = { id = coup.5 popup = yes }
			remove_variable = resigned_from_gov_coup
		}
		# coup runs out of steam or IG changes law stances
		else_if = {
			limit = {
				OR = {
					root.var:coup_var <= 0
					scope:coup_ig = {
						law_stance = {
							law = scope:coup_desired_law.type
							value < approve
						}
					}
				}
			}
			trigger_event = { id = coup.4 popup = yes }
		}
		remove_variable = coup_var
	}

	invalid = {
		OR = {
			NOT = {
				exists = scope:coup_desired_law
			}
			NOT = {
				exists = scope:coup_ig
			}
			has_law = scope:coup_desired_law.type
			hidden_trigger = {
				has_variable = grefm_venizelos_has_landed
			}
		}
	}
	
	on_invalid = {
		remove_variable = coup_var
		if = {
			limit = {
				has_variable = grefm_venizelos_has_landed
			}
			hidden_effect = {
				trigger_event = {
					id = grefm.048 # the rise of the ethnarch
					popup = yes
				}
			}
		}
	}

	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = coup_advancing
				trigger = {
					scope:coup_ig = {
						is_powerful = yes
						ig_approval < 0
					}
				}
			}
			triggered_desc = {
				desc = coup_declining
				trigger = {
					scope:coup_ig = {
						OR = {
							is_powerful = no
						}
					}
				}
			}
		}
	}

	current_value = {
		value = root.var:coup_var
	}

	goal_add_value = {
		add = 100
	}

	progressbar = yes

	should_be_pinned_by_default = yes

	transferable = no
	
	can_revolution_inherit = no

	weight = 100
	
}

################################
# THAT NONSENSE WITH VENIZELOS #
################################

je_grefm_venizelism_main = {
	icon = "gfx/interface/icons/event_icons/event_venizelos.dds"
	
	group = je_group_grefm_venizelos
	
	should_be_pinned_by_default = yes
	
	complete = {
		custom_tooltip = {
			text = je_grefm_venizelism_tt1
			hidden_trigger = {
				has_variable = grefm_greek_nationalism_completed
			}
		}
		custom_tooltip = {
			text = je_grefm_venizelism_tt2
			hidden_trigger = {
				has_variable = grefm_venizelism_civics_completed
			}
		}
		custom_tooltip = {
			text = je_grefm_venizelism_tt3
			hidden_trigger = {
				has_variable = grefm_venizelism_military_completed
			}
		}
		custom_tooltip = {
			text = je_grefm_venizelism_tt4
			hidden_trigger = {
				has_variable = grefm_venizelism_society_completed
			}
		}
		custom_tooltip = {
			text = je_grefm_venizelism_tt5
			hidden_trigger = {
				has_variable = grefm_venizelism_education_completed
			}
		}
	}
	
	on_complete = {
		trigger_event = {
			id = grefm.059 # The Greek State Resurgent
		}
		set_variable = grefm_venizelism_completed
	}
	
	fail = {
		OR = {
			has_law = law_type:law_council_republic
			has_law = law_type:law_anarchy
		}
	}
	
	on_fail = {
		set_variable = grefm_venizelism_completed
	}
	
	modifiers_while_active = {
		modifier_grefm_venizelist_tilt # Ankyra! Ankyra! Ankyra!
	}
	
	weight = 2000

}

je_grefm_venizelism_civics = {
	icon = "gfx/interface/icons/event_icons/event_scales.dds"
	
	group = je_group_grefm_venizelos
	
	complete = {
		has_law = law_type:law_universal_suffrage
		NOT = { has_law = law_type:law_hereditary_bureaucrats }
		OR = {
			has_law = law_type:law_commercialized_agriculture
			has_law = law_type:law_homesteading
		}
		OR = {
			has_law = law_type:law_dedicated_police
			has_law = law_type:law_militarized_police
		}
		any_scope_building = {
			is_building_type = building_government_administration
			OR = {
				has_active_production_method = pm_vertical_filing_cabinets
				has_active_production_method = pm_switch_boards
			}
		}
	}
	
	on_complete = {
		trigger_event = {
			id = grefm.052 # A Competent Bureaucracy
		}
	}
	
	invalid = {
		OR = {
			has_variable = grefm_venizelism_completed
			has_variable = grefm_venizelism_civics_completed
		}
	}
	
	weight = 500
	
}

je_grefm_venizelism_military = { # The numbers used in this journal are not arbitrary. See the notes below.
	icon = "gfx/interface/icons/event_icons/event_military.dds"
	
	group = je_group_grefm_venizelos
	
	complete = {
		has_law = law_type:law_mass_conscription
		any_military_formation = {
			any_combat_unit = {
				count >= 80 # This is based on the frontline forces of the Army of Thessaly; see below.
				OR = {
					has_unit_type = unit_type:combat_unit_type_trench_infantry
					has_unit_type = unit_type:combat_unit_type_squad_infantry
					has_unit_type = unit_type:combat_unit_type_mechanized_infantry
					has_unit_type = unit_type:combat_unit_type_shrapnel_artillery
					has_unit_type = unit_type:combat_unit_type_siege_artillery
					has_unit_type = unit_type:combat_unit_type_heavy_tank
				}
			}
		}
		any_military_formation = {
			any_combat_unit = {
				count >= 20 # This is a round number based on surface combatants at the start of WWI; see below.
				OR = {
					has_unit_type = unit_type:combat_unit_type_destroyer
					has_unit_type = unit_type:combat_unit_type_torpedo_boat
					has_unit_type = unit_type:combat_unit_type_scout_cruiser
					has_unit_type = unit_type:combat_unit_type_ironclad
					has_unit_type = unit_type:combat_unit_type_dreadnought
					has_unit_type = unit_type:combat_unit_type_battleship
				}
			}
		}
	}
	
	## Some Notes on the completion requirements (drawn from Greek-language sources):
		# The Greek Army during the First Balkan War consisted of roughly 130k men with no corps-level or higher structure in place until war was declared.
			# The primary force was was the "Army of Thessaly", with roughly 100k men, of which 80k were organized into frontline units. The "Concise History of the Balkan Wars" states:
				# 59 Infantry with 4 Evzones battalions
				# 8 Cavalry Companies
				# 32 Artillery Companies
			# The Secondary force was of the "Army of Epirus" that varied from 10k to 13k men with various forms of organization.
			# A third force the "Interior Army" is referenced in some sources with between 10k to 20k men, but doesn't seem to have been intended as a frontline formation.
		# The Hellenic navy had around a dozen ships during the Balkan Wars with a rapid expansion of the Navy occuring after the outbreak of hostilities; They joined WWI with 22 surface combatants.
		# I have contradicting sources about when exactly conscription was adopted and in which forms, but it was definitely in place as general conscription by 1917 when Greece joined WWI.
	
	on_complete = {
		trigger_event = {
			id = grefm.054 # A Formidable Military
		}
	}
	
	invalid = {
		OR = {
			has_variable = grefm_venizelism_completed
			has_variable = grefm_venizelism_military_completed
		}
	}
	
	weight = 500
	
}

je_grefm_venizelism_society = {
	icon = "gfx/interface/icons/event_icons/event_election.dds"
	
	group = je_group_grefm_venizelos

	complete = {
		NOT = { has_law = law_type:law_no_womens_rights }
		NOT = { has_law = law_type:law_child_labor_allowed }
		NOT = { has_law = law_type:law_no_workers_rights }
	}
	
	on_complete = {
		trigger_event = {
			id = grefm.056 # A Modern Society
		}
	}

	invalid = {
		OR = {
			has_variable = grefm_venizelism_completed
			has_variable = grefm_venizelism_society_completed
		}
	}

	weight = 500

}

je_grefm_venizelism_education = {
	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"
	
	group = je_group_grefm_venizelos
	
	complete = {
		has_law = law_type:law_public_schools
		has_law = law_type:law_compulsory_primary_school
		institution_investment_level = {
			institution = institution_schools
			value >= 4
		}
		literacy_rate >= 0.50
	}
	
	on_complete = {
		trigger_event = {
			id = grefm.058 # An Educated Populace
		}
	}
	
	invalid = {
		OR = {
			has_variable = grefm_venizelism_completed
			has_variable = grefm_venizelism_education_completed
		}
	}
	
	weight = 500

}

je_grefm_venizelism_constitution = {
	icon = "gfx/interface/icons/event_icons/event_venizelos.dds"
	
	group = je_group_grefm_venizelos

	complete = {
		NOT = { has_law = law_type:law_monarchy }
	}
	
	on_complete = {
	}
	
	invalid = {
		hidden_trigger = {
			has_variable = grefm_venizelism_completed
		}
	}

	weight = 500

}

################################
# GREEK NATIONALISM / IDENTITY #
################################

je_grefm_hellenic_nationalism = {
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"
	
	group = je_group_grefm_nationalism
	
	should_be_pinned_by_default = yes
	
	is_shown_when_inactive = {
		country_has_primary_culture = cu:hellene
	}

	possible = {
		has_technology_researched = mass_communication
	}
	
	immediate = {
		hidden_effect = {
			trigger_event = {
				id = grefm.200 # The Hellenic Question
			}
		}
	}
	
#	scripted_progress_bar = grefm_nationalism_progress_bar

#	scripted_button = grefm_embrace_national_identity_button

	complete = {
		has_technology_researched = pan-nationalism
		custom_tooltip = {
			text = je_grefm_greek_nationalism_tt1
			hidden_trigger = {
				has_variable = grefm_greek_identity_resolved
			}
		}
		custom_tooltip = {
			text = je_grefm_greek_nationalism_tt2
			hidden_trigger = {
				has_variable = grefm_greek_language_solved
			}
		}
		custom_tooltip = {
			text = je_grefm_greek_nationalism_tt3
			hidden_trigger = {
				has_variable = eocfm_is_autocephalous
			}
		}
	}
	
	on_complete = {
		trigger_event = {
			id = grefm.209 # The Greek Ethnogenesis
		}
		set_variable = grefm_nationalism_complete
	}
	
	invalid = {
		has_variable = grefm_nationalism_complete
	}
	
	weight = 3000 # third billing, behind je_grefm_megali_idea

}


je_grefm_roman_nationalism = {
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"
	
	group = je_group_grefm_nationalism
	
	should_be_pinned_by_default = yes
	
	is_shown_when_inactive = {
		country_has_primary_culture = cu:rhomaios
	}
	
	possible = {
		has_technology_researched = mass_communication
	}
	
	immediate = {
		trigger_event = {
			id = grefm.280 # The Legacy of Rhomania
		}
	}
	
	complete = {
		always = no ##TODO completion trigger
	}
	
	on_complete = {
	}
	
	weight = 2000
	
}

je_grefm_national_language = {
	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"
	
	group = je_group_grefm_nationalism
	
	is_shown_when_inactive = {
		has_journal_entry = je_grefm_hellenic_nationalism
	}

	possible = {
		has_technology_researched = empiricism
		literacy_rate > 0.20
	}
	
	immediate = {
		trigger_event = {
			id = grefm.206 # The Language Question
		}
	}
	
	scripted_progress_bar = grefm_dimotiki_progress_bar
	scripted_progress_bar = grefm_katharevousa_progress_bar
	scripted_progress_bar = grefm_khoine_progress_bar
	
	scripted_button = grefm_declare_national_language_button
	
	complete = {
		has_law = law_type:law_compulsory_primary_school
		institution_investment_level = {
			institution = institution_schools
			value >= 3
		}
		custom_tooltip = {
			text = je_grefm_national_language_complete_tt
			hidden_trigger = {
				OR = {
					has_variable = grefm_greek_language_demotic
					has_variable = grefm_greek_language_katharevousa
					has_variable = grefm_greek_language_khoine
				}
			}
		}
	}
	
	on_complete = {
		set_variable = grefm_greek_language_solved
	}
	
	weight = 2997
}

je_grefm_archaeology = {
	icon = "gfx/interface/icons/event_icons/event_ruins.dds"
	
	group = je_group_grefm_nationalism
	
	should_be_pinned_by_default = yes
	
	is_shown_when_inactive = {
		morgenrote_is_active = no
		OR = {
			has_journal_entry = je_grefm_hellenic_nationalism
			has_journal_entry = je_grefm_roman_nationalism
		}
	}

	possible = {
		any_scope_building = {
			is_building_type = building_university
		}
	}
	
	immediate = {
		trigger_event = {
			id = grefm.140 # archaeology startup
		}
		set_variable = {
			name = grefm_archeaology_var
			value = 0
		}
		set_variable = {
			name = grefm_excavation_var
			value = 0
		}
	}
	
	complete = {
		custom_tooltip = {
			text = grefm_archeaology_tt
			hidden_trigger = {
				AND = {
					has_variable = grefm_parthenon_1_complete
					has_variable = grefm_parthenon_2_complete
					has_variable = grefm_knossos_1_complete
					has_variable = grefm_knossos_2_complete
					has_variable = grefm_gla_complete
					has_variable = grefm_delos_complete
					has_variable = grefm_larissa_complete
					has_variable = grefm_rhodes_complete
				}
			}
		}
	}
	
	on_complete = {
		hidden_effect = {
			set_variable = grefm_greek_identity_resolved
		}
	}
	
	scripted_button = grefm_archeaology_parthenon_button_1
	scripted_button = grefm_archeaology_parthenon_button_2
	scripted_button = grefm_archeaology_mycenae_button_1
	scripted_button = grefm_archeaology_mycenae_button_2
	scripted_button = grefm_archeaology_gla_button
	scripted_button = grefm_archeaology_delos_button
	scripted_button = grefm_archeaology_larissa_button
	scripted_button = grefm_archeaology_rhodes_button
	
	weight = 2999
}

je_grefm_active_excavation = {
	icon = "gfx/interface/icons/event_icons/event_ruins.dds"
	
	group = je_group_grefm_content
	
	should_be_pinned_by_default = yes
	
	modifiers_while_active = {
		modifier_grefm_active_excavation
	}
	
	scripted_button = grefm_archeaology_cancel_button
	
	complete = {
		scope:journal_entry = { is_goal_complete = yes }
	}
	
	on_complete = {
		grefm_excavation_complete = yes
	}
	
	invalid = {
		grefm_active_excavation_trigger = no
	}
	
	on_invalid = {
		set_variable = {
			name = grefm_excavation_var
			value = 0
		}
	}	
	
	current_value = {
		value = root.var:grefm_excavation_var
	}

	goal_add_value = {
		value = 36
	}
	
	on_monthly_pulse = {
		effect = {
			change_variable = {
				name = grefm_excavation_var
				add = 1
			}
		}
		random_events = {
			400 = 0
			10 = grefm.150 # Excavation Proceeding Smoothly
			 5 = grefm.151 # Industrial Equipment Requested
			 1 = grefm.152 # Ancient Tomb Uncovered
			 5 = grefm.153 # Mudslide at the Excavation Site
			 1 = grefm.154 # Disaster at the Excavation Site
			10 = grefm.155 # Popular Interest in Excavation
			 1 = grefm.156 # Palace Uncovered
			 5 = grefm.158 # IG Offers Funding
			 5 = grefm.159 # Reconstruction Garners Criticism
		}
	}

	progressbar = yes	
	
	weight = 2998
	
}

je_grefm_grecoturkism = {
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"
	
	group = je_group_grefm_content
	
	modifiers_while_active = {
		modifier_grefm_turkish_integration
	}
	
	complete = {
		scope:journal_entry = { is_goal_complete = yes }
	}

	on_complete = {
		trigger_event = { 
			id = grefm.293 # Greco-Turkish Relations
		}
		show_as_tooltip = {
			add_primary_culture = cu:turkish
		}
		set_variable = grefm_turkeytime # enables grefm.900
	}
	
	on_monthly_pulse = {
		effect = {
			change_variable = {
				name = grefm_turkish_integration_var
				add = 1
			}
		}
	}
		
	
	current_value = {
		value = root.var:grefm_turkish_integration_var
	}

	goal_add_value = {
		value = 240
	}

	progressbar = yes

	weight = 1000
	
}

####################
# GREEK REVANCHISM #
####################

je_grefm_megali_idea = {
	icon = "gfx/interface/icons/event_icons/event_hellenic.dds"
	
	group = je_group_grefm_megali_idea
	
	should_be_pinned_by_default = yes

	is_shown_when_inactive = {
		country_has_primary_culture = cu:hellene
		NOR = { 
			has_global_variable = has_formed_byz
			has_global_variable = grefm_megali_idea_complete
		}
	}

	possible = {
		has_technology_researched = nationalism
	}

	immediate = {
		trigger_event = {
			id = grefm.271 # The Megali Idea
		}
	}
	
	scripted_button = grefm_ionian_enosis_button
	scripted_button = grefm_ionian_enosis_alternate_button
	scripted_button = grefm_samos_enosis_button

	complete = {
		is_subject = no
		owns_entire_state_region = STATE_EASTERN_THRACE
		calc_true_if = {
			amount >= 10
			owns_entire_state_region = STATE_ATTICA
			owns_entire_state_region = STATE_PELOPONNESE
			owns_entire_state_region = STATE_THESSALIA
			owns_entire_state_region = STATE_MACEDONIA
			owns_entire_state_region = STATE_SKOPIA
			owns_entire_state_region = STATE_WESTERN_THRACE
			owns_entire_state_region = STATE_NORTHERN_THRACE
			owns_entire_state_region = STATE_HUDAVENDIGAR
			owns_entire_state_region = STATE_AYDIN
			owns_entire_state_region = STATE_WEST_AEGEAN_ISLANDS
			owns_entire_state_region = STATE_EAST_AEGEAN_ISLANDS
			owns_entire_state_region = STATE_ALBANIA
			owns_entire_state_region = STATE_CRETE
			owns_entire_state_region = STATE_IONIAN_ISLANDS
		}
	}

	on_complete = {
		trigger_event = { 
			id = grefm.272 # The Future of Greece
		}
		custom_tooltip = je_grefm_megali_idea_complete
	}
	
	invalid = {
		hidden_trigger = {
			OR = {
				has_variable = grefm_weaksauce
				has_variable = byzfm_weaksauce
				has_global_variable = has_formed_byz
				has_global_variable = grefm_megali_idea_complete
			}
		}
	}
	
	on_invalid = {
		set_variable = grefm_tzatzikisauce
	}

	weight = 4000 # second up to je_grefm_bavarocracy_main

}

je_grefm_greater_greece = {
	icon = "gfx/interface/icons/event_icons/event_hellenic.dds"
	
	group = je_group_grefm_megali_idea
	
	should_be_pinned_by_default = yes

	is_shown_when_inactive = {
	}
	
	possible = {
#		has_technology_researched = pan-nationalism
	}
	
	immediate = {
#		trigger_event = {
#			id = grefm.273 # The Lands of Greater Greece
#		}
	}
	
	complete = {
		custom_tooltip = {
			text = je_grefm_greater_greece_tt
			hidden_trigger = {
				owns_entire_state_region = STATE_EASTERN_THRACE
				owns_entire_state_region = STATE_ATTICA
				owns_entire_state_region = STATE_THESSALIA
				owns_entire_state_region = STATE_MACEDONIA
				owns_entire_state_region = STATE_SKOPIA
				owns_entire_state_region = STATE_WESTERN_THRACE
				owns_entire_state_region = STATE_NORTHERN_THRACE
				owns_entire_state_region = STATE_HUDAVENDIGAR
				owns_entire_state_region = STATE_AYDIN
				owns_entire_state_region = STATE_WEST_AEGEAN_ISLANDS
				owns_entire_state_region = STATE_EAST_AEGEAN_ISLANDS
				owns_entire_state_region = STATE_ALBANIA
			}
		}
		owns_entire_state_region = STATE_CRETE
		owns_entire_state_region = STATE_IONIAN_ISLANDS
		owns_entire_state_region = STATE_CYPRUS
		owns_entire_state_region = STATE_KASTAMONU
		owns_entire_state_region = STATE_TRABZON
		owns_entire_state_region = STATE_ADANA
	}
	
	on_complete = {
		trigger_event = {
			id = grefm.274 # The Greek Realm
		}
	}
	
	invalid = {
		hidden_trigger = {
			has_variable = grefm_weaksauce
		}
	}
	
	weight = 2000 # will fall in behind je_grefm_hellenic_nationalism
	
}

je_grefm_greek_separatism_main = {
	icon = "gfx/interface/icons/event_icons/waving_flag.dds"
	
	group = je_group_grefm_megali_idea
	
	should_be_pinned_by_default = yes
	
	is_shown_when_inactive = {
		country_has_primary_culture = cu:hellene
	}
	
	possible = {
		is_subject = no
		has_technology_researched = mass_communication
	}
	
	immediate = {
		if = {
			limit = {
				NOT = {
					has_variable = grefm_separatism_received
				}
			}
			trigger_event = {
				id = grefm.590 # Greek Separatism
			}
		}
		set_variable = grefm_separatism_received
	}
	
	scripted_button = grefm_epirus_support_button
	scripted_button = grefm_epirus_cease_button
	scripted_button = grefm_epirus_provoke_button
	
	scripted_button = grefm_macedonia_support_button
	scripted_button = grefm_macedonia_cease_button
	scripted_button = grefm_macedonia_provoke_button
	
	scripted_button = grefm_skopia_support_button
	scripted_button = grefm_skopia_cease_button
	scripted_button = grefm_skopia_provoke_button
	
	scripted_button = grefm_smyrna_support_button
	scripted_button = grefm_smyrna_cease_button
	scripted_button = grefm_smyrna_provoke_button	
	
	scripted_button = grefm_cyprus_support_button
	scripted_button = grefm_cyprus_cease_button
	scripted_button = grefm_cyprus_provoke_button
	
	scripted_button = grefm_crete_support_button
	scripted_button = grefm_crete_cease_button
	scripted_button = grefm_crete_provoke_button
	
	complete = {
		owns_entire_state_region = STATE_ALBANIA
		owns_entire_state_region = STATE_MACEDONIA
		owns_entire_state_region = STATE_SKOPIA
		owns_entire_state_region = STATE_AYDIN
		owns_entire_state_region = STATE_CRETE
		owns_entire_state_region = STATE_CYPRUS
	}
	
	on_complete = {
		hidden_effect = {
			grefm_clean_up_separatism_effect = yes
		}
	}
	
	invalid = {
		hidden_trigger = {
			has_variable = grefm_weaksauce
		}
	}
	
	on_invalid = {
		hidden_effect = {
			grefm_clean_up_separatism_effect = yes
		}
	}
	
	on_weekly_pulse = {
		effect = {
			grefm_calculate_separatism_variables_effect = yes
			grefm_check_separatism_modifiers_effect = yes
		}
	}
	
	on_monthly_pulse = {
		effect = {
			grefm_monthly_greek_separatism_effect = yes
		}
	}
	
	status_desc = {
		triggered_desc = {
			desc = je_grefm_greek_separatism_crete_tt
			trigger = {
				NOT = {
					owns_entire_state_region = STATE_CRETE
				}
			}
		}
	}
	
	weight = 1000 # will fall in behind je_grefm_greater_greece
	
}

je_grefm_greek_separatism_sub = {
	icon = "gfx/interface/icons/event_icons/event_fire.dds"
	
	group = je_group_grefm_nationalism
	
	should_be_pinned_by_default = yes
	
	immediate = {
		if = {
			limit = {
				NOT = {
					has_variable = grefm_separatism_received
				}
			}
			trigger_event = {
				id = grefm.290 # Greek Separatism
			}
		}
		set_variable = grefm_separatism_received
	}
	
	complete = {
		has_law = law_type:law_multicultural
	}
	
	fail = {
		NOR = {
			owns_entire_state_region = STATE_ALBANIA
			owns_entire_state_region = STATE_MACEDONIA
			owns_entire_state_region = STATE_SKOPIA
			owns_entire_state_region = STATE_AYDIN
			owns_entire_state_region = STATE_CRETE
			owns_entire_state_region = STATE_CYPRUS
		}
	}
	
	on_monthly_pulse = {
		events = {
			grefm.594 # The Makedonijan Revolt (TUR/EGY)
			grefm.595 # The Epirote Revolt (TUR/EGY)
			grefm.596 # The Cypriot Revolt (TUR/EGY)
			grefm.597 # The Macedonian Revolt (TUR/EGY)
			grefm.598 # The Smyrna Revolt (TUR/EGY)
			grefm.528 # Crete Seeks Greater Autonomy
			grefm.529 # Crete Revolts Again (TUR/EGY)
		}
	}
	
	status_desc = {
		triggered_desc = {
			desc = je_grefm_greek_separatism_crete_tt
			trigger = {
				OR = {
					AND = {
						has_state_in_state_region = STATE_CRETE
					}
					c:CRE ?= {
						is_subject_of = root
					}
				}
			}
		}
	}
	
	weight = 100
	
}
	
#############################
# THE REVENGE OF THE GREEKS #
#############################

je_grefm_revenge_of_the_greeks = {
	icon = "gfx/interface/icons/event_icons/event_vergina_sun.dds"
	
	group = je_group_byzfm_restoration
	
	should_be_pinned_by_default = yes	
	
	is_shown_when_inactive = {
		OR = {
			c:BYZ ?= this
			c:ERE ?= this
		}
		has_variable = byzfm_revenge_of_the_greeks
	}
	
	possible = {
		OR = {
			c:BYZ ?= this
			c:ERE ?= this
		}
	}
	
	immediate = {
		trigger_event = {
			id = grefm.300 # The Vergina Sun Rises
		}
	}
	
	modifiers_while_active = {
		modifier_grefm_hellenic_aspiriations
	}	
	
	complete = {
		custom_tooltip = {
			text = je_byzfm_restoration_tt1
			hidden_trigger = {
				calc_true_if = {
					amount > 9
					country_or_subject_owns_entire_state_region = STATE_ALBANIA
					country_or_subject_owns_entire_state_region = STATE_BOSNIA
					country_or_subject_owns_entire_state_region = STATE_BULGARIA
					country_or_subject_owns_entire_state_region = STATE_CRETE
					country_or_subject_owns_entire_state_region = STATE_CROATIA
					country_or_subject_owns_entire_state_region = STATE_DALMATIA
					country_or_subject_owns_entire_state_region = STATE_IONIAN_ISLANDS
					country_or_subject_owns_entire_state_region = STATE_MACEDONIA
					country_or_subject_owns_entire_state_region = STATE_MONTENEGRO
					country_or_subject_owns_entire_state_region = STATE_NORTHERN_SERBIA
					country_or_subject_owns_entire_state_region = STATE_NORTHERN_THRACE
					country_or_subject_owns_entire_state_region = STATE_PELOPONNESE
					country_or_subject_owns_entire_state_region = STATE_SKOPIA
					country_or_subject_owns_entire_state_region = STATE_SLAVONIA
					country_or_subject_owns_entire_state_region = STATE_SLOVENIA
					country_or_subject_owns_entire_state_region = STATE_SOUTHERN_SERBIA
					country_or_subject_owns_entire_state_region = STATE_THESSALIA
					country_or_subject_owns_entire_state_region = STATE_WEST_AEGEAN_ISLANDS
					country_or_subject_owns_entire_state_region = STATE_WESTERN_THRACE
				}
			}
		}
		custom_tooltip = {
			text = je_byzfm_restoration_tt2
			hidden_trigger = {
				calc_true_if = {
					amount > 8
					country_or_subject_owns_entire_state_region = STATE_ADANA
					country_or_subject_owns_entire_state_region = STATE_ANKARA
					country_or_subject_owns_entire_state_region = STATE_AYDIN
					country_or_subject_owns_entire_state_region = STATE_CYPRUS
					country_or_subject_owns_entire_state_region = STATE_DIYARBAKIR
					country_or_subject_owns_entire_state_region = STATE_EAST_AEGEAN_ISLANDS
					country_or_subject_owns_entire_state_region = STATE_EASTERN_THRACE
					country_or_subject_owns_entire_state_region = STATE_ERZURUM
					country_or_subject_owns_entire_state_region = STATE_HUDAVENDIGAR
					country_or_subject_owns_entire_state_region = STATE_KASTAMONU
					country_or_subject_owns_entire_state_region = STATE_KONYA
					country_or_subject_owns_entire_state_region = STATE_TRABZON
				}
			}
		}
	}
		
	on_complete = {
		trigger_event = {
			id = grefm.302 # Nova Roma Constantinopolitana
		}
	}
	
	invalid = {
		has_variable = byzfm_weaksauce
	}

	weight = 10000
}

je_grefm_shores_of_phoenicia = {
	icon = "gfx/interface/icons/event_icons/event_vergina_sun.dds"
	
	group = je_group_byzfm_restoration
	
	should_be_pinned_by_default = yes	

	modifiers_while_active = {
		modifier_grefm_hellenic_aspiriations
	}
	
	complete = {
		country_rank >= rank_value:great_power
		any_scope_state = {
			has_building = building_mega_palation
		}
		country_or_subject_owns_entire_state_region = STATE_ALEPPO
		country_or_subject_owns_entire_state_region = STATE_LEBANON
		country_or_subject_owns_entire_state_region = STATE_SYRIA
		country_or_subject_owns_entire_state_region = STATE_PALESTINE
		country_or_subject_owns_entire_state_region = STATE_TRANSJORDAN
		country_or_subject_owns_entire_state_region = STATE_SINAI
		country_or_subject_owns_entire_state_region = STATE_LOWER_EGYPT
		country_or_subject_owns_entire_state_region = STATE_MIDDLE_EGYPT
		country_or_subject_owns_entire_state_region = STATE_UPPER_EGYPT
		country_or_subject_owns_entire_state_region = STATE_MATRUH
#		country_or_subject_owns_entire_state_region = STATE_LIBYA # not held by Alexander III
	}
	
	on_complete = {
		trigger_event = {
			id = grefm.304 # The Legacy of Alexander
		}
	}	
	
	invalid = {
		has_variable = byzfm_weaksauce
	}
	
	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = je_byzfm_rome_of_the_east_status
			}
		}
	}

	weight = 10000
	
}

je_grefm_lands_of_arianon = {
	icon = "gfx/interface/icons/event_icons/event_vergina_sun.dds"
	
	group = je_group_grefm_empire

	should_be_pinned_by_default = yes

	modifiers_while_active = {
		modifier_grefm_hellenic_aspiriations
	}

	complete = {
		country_or_subject_owns_entire_state_region = STATE_ERZURUM
		country_or_subject_owns_entire_state_region = STATE_DIYARBAKIR
		country_or_subject_owns_entire_state_region = STATE_MOSUL
		country_or_subject_owns_entire_state_region = STATE_URMIA
		country_or_subject_owns_entire_state_region = STATE_TABRIZ
		country_or_subject_owns_entire_state_region = STATE_PERSIAN_KURDISTAN
		country_or_subject_owns_entire_state_region = STATE_LURISTAN
		country_or_subject_owns_entire_state_region = STATE_MAZANDARAN
		country_or_subject_owns_entire_state_region = STATE_IRAKAJEMI
		country_or_subject_owns_entire_state_region = STATE_SEMNAN
		country_or_subject_owns_entire_state_region = STATE_ISFAHAN
		country_or_subject_owns_entire_state_region = STATE_FARS
		country_or_subject_owns_entire_state_region = STATE_IRAKAJEMI
		country_or_subject_owns_entire_state_region = STATE_LARISTAN
		country_or_subject_owns_entire_state_region = STATE_KHORASAN
		country_or_subject_owns_entire_state_region = STATE_KERMAN
		country_or_subject_owns_entire_state_region = STATE_SISTAN 
	}
	
	on_complete = {
		trigger_event = {
			id = grefm.306 # shame it wasn't the Sassanids... lets finish what Alexander started (The Graveyard of Empires)
		}
	}
	
	invalid = {
		has_variable = byzfm_weaksauce
	}
	
	weight = 10000
	
}

je_grefm_the_graveyard_of_empires = {
	icon = "gfx/interface/icons/event_icons/event_vergina_sun.dds"
	
	group = je_group_grefm_empire

	should_be_pinned_by_default = yes
	
	modifiers_while_active = {
		modifier_grefm_hellenic_aspiriations
	}

	complete = {
		country_or_subject_owns_entire_state_region = STATE_HERAT
		country_or_subject_owns_entire_state_region = STATE_CENTRAL_HIGHLANDS
		country_or_subject_owns_entire_state_region = STATE_KABUL
		country_or_subject_owns_entire_state_region = STATE_KANDAHAR
		country_or_subject_owns_entire_state_region = STATE_PASHTUNISTAN
		country_or_subject_owns_entire_state_region = STATE_QUETTA
		country_or_subject_owns_entire_state_region = STATE_NORTHERN_BALUCHISTAN
		country_or_subject_owns_entire_state_region = STATE_BALUCHISTAN
	}
	
	on_complete = {
		trigger_event = {
			id = grefm.307 # The Empire of the Greeks
		}
	}
	
	invalid = {
		has_variable = byzfm_weaksauce
	}
	
	weight = 10000
	
}

######################
# IMPERIAL AMBITIONS #
######################

je_grefm_black_sea = {
	icon = "gfx/interface/icons/event_icons/event_vergina_sun.dds"
	
	group = je_group_grefm_empire
	
	is_shown_when_inactive = {
		has_variable = byzfm_revenge_of_the_greeks
	}
	
	possible = {
		owns_entire_state_region = STATE_EASTERN_THRACE
		owns_entire_state_region = STATE_NORTHERN_THRACE
		owns_entire_state_region = STATE_HUDAVENDIGAR
		owns_entire_state_region = STATE_KASTAMONU
		owns_entire_state_region = STATE_TRABZON
	}
	
	immediate = {
		trigger_event = {
			id = grefm.310 # The Shores of the Hospitable Sea
			days = 15
		}
	}
	
	complete = {
		owns_entire_state_region = STATE_KARS
		owns_entire_state_region = STATE_GREATER_CAUCASUS
		owns_entire_state_region = STATE_CRIMEA
	}
	
	on_complete = {
		trigger_event = {
			id = grefm.311 # The Black Sea Secured
		}
	}
	
	invalid = {
		has_variable = grefm_weaksauce
	}

	weight = 1000

}

je_grefm_magna_graecia = {
	icon = "gfx/interface/icons/event_icons/event_vergina_sun.dds"
	
	group = je_group_grefm_empire

	is_shown_when_inactive = {
		has_variable = byzfm_revenge_of_the_greeks
	}
	
	immediate = {
		trigger_event = {
			id = grefm.312 # The Lands of Magna Graecia
			days = 15
		}
	}
	
	possible = {
		owns_entire_state_region = STATE_ATTICA
		owns_entire_state_region = STATE_THESSALIA
		owns_entire_state_region = STATE_IONIAN_ISLANDS
		owns_entire_state_region = STATE_ALBANIA
	}
	
	complete = {
		owns_entire_state_region = STATE_APULIA
		owns_entire_state_region = STATE_CALABRIA
		owns_entire_state_region = STATE_CAMPANIA
		owns_entire_state_region = STATE_SICILY
	}
	
	on_complete = {
		trigger_event = {
			id = grefm.313 # Magna Graecia Secured
		}
	}
	
	invalid = {
		has_variable = grefm_weaksauce
	}

	weight = 1000

}

je_grefm_alexandria_oxus = {
	icon = "gfx/interface/icons/event_icons/event_vergina_sun.dds"
	
	group = je_group_grefm_empire

	complete = {
		country_or_subject_owns_entire_state_region = STATE_MERZ
		country_or_subject_owns_entire_state_region = STATE_UZBEKIA
	}
	
	on_complete = {
		trigger_event = {
			id = grefm.315 # The Farthest Alexandria
		}
	}
	
	invalid = {
		has_variable = grefm_weaksauce
	}

	weight = 1000

}

je_grefm_alexandria_merv = {
	icon = "gfx/interface/icons/event_icons/event_vergina_sun.dds"
	
	group = je_group_grefm_empire
	
	complete = {
		country_or_subject_owns_entire_state_region = STATE_FERGANA
		country_or_subject_owns_entire_state_region = STATE_KIRGHIZIA
		country_or_subject_owns_entire_state_region = STATE_TAJIKISTAN
	}
	
	on_complete = {
		trigger_event = {
			id = grefm.316 # Alexandria in Margiana
		}
	}
	
	invalid = {
		has_variable = grefm_weaksauce
	}

	weight = 1000

}

je_grefm_alexandria_indus = {
	icon = "gfx/interface/icons/event_icons/event_vergina_sun.dds"
	
	group = je_group_grefm_empire
	
	complete = {
		country_or_subject_owns_entire_state_region = STATE_PUNJAB
		country_or_subject_owns_entire_state_region = STATE_SINDH
		country_or_subject_owns_entire_state_region = STATE_KASHMIR
	}
	
	on_complete = {
		trigger_event = {
			id = grefm.317 # Alexandria on the Indus
		}
	}
	
	invalid = {
		has_variable = grefm_weaksauce
	}

	weight = 1000

}

je_grefm_alexandria_susiana = {
	icon = "gfx/interface/icons/event_icons/event_vergina_sun.dds"
	
	group = je_group_grefm_empire
	
	complete = {
		country_or_subject_owns_entire_state_region = STATE_KHUZESTAN
		country_or_subject_owns_entire_state_region = STATE_BASRA
		country_or_subject_owns_entire_state_region = STATE_BAGHDAD
	}
	
	on_complete = {
		trigger_event = {
			id = grefm.318 # Alexandria in Susiana
		}
	}
	
	invalid = {
		has_variable = grefm_weaksauce
	}

	weight = 1000

}


################
# OTHER FLAVOR #
################

je_grefm_the_womens_journal = {
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"
	
	group = je_group_grefm_content
	
	should_be_pinned_by_default = yes
	
	is_shown_when_inactive = {
		country_has_primary_culture = cu:hellene
		owns_entire_state_region = STATE_ATTICA
		has_technology_researched = egalitarianism
	}

	possible = {
		has_technology_researched = feminism
		NOT = { has_law = law_type:law_no_womens_rights }
	}
	
	immediate = {
		hidden_effect = {
			trigger_event = {
				id = grefm.123 # the womens journal
			}
		}
	}
	
	complete = {
		OR = {
			has_law = law_type:law_women_in_the_workplace
			has_law = law_type:law_womens_suffrage
		}
		NOT = { has_law = law_type:law_child_labor_allowed }
	}
	
	on_complete = {
		trigger_event = {
			id = grefm.124 # National Council of Greek Women
		}
	}
	
	fail = {
		has_law = law_type:law_no_womens_rights
	}
	
	invalid = {
		hidden_trigger = {
			has_variable = grefm_feminism_rejected
		}
	}
	
	weight = 2996

}

je_grefm_corinth_canal_survey = {
	icon = "gfx/interface/icons/event_icons/event_map.dds"
	
	group = je_group_grefm_content
	
	should_be_pinned_by_default = yes

	modifiers_while_active = {
		modifier_grefm_corinth_canal_survey
	}

	complete = {
		scope:journal_entry = { 
			is_goal_complete = yes
		}
	}

	on_complete = {
		remove_modifier = modifier_grefm_corinth_canal_survey
		trigger_event = {
			id = grefm.130 # Corinth Canal Surveyed
		}
	}

	invalid = {
		NOT = {
			owns_entire_state_region = STATE_PELOPONNESE
		}
	}

	on_invalid = {
		remove_variable = grefm_corinth_canal_var
	}
	
	on_monthly_pulse = {
		effect = {
			change_variable = {
				name = grefm_corinth_canal_var
				add = 1
			}
		}
	}

	current_value = {
		value = root.var:grefm_corinth_canal_var
	}

	goal_add_value = {
		value = 24
	}

	progressbar = yes

	weight = 1000
	
}

je_grefm_land_reclaimation = { # literally the vanilla reclaimation event in a trenchcoat
	icon = "gfx/interface/icons/event_icons/event_map.dds"
	
	group = je_group_grefm_content

	complete = {
		scope:journal_entry = {
			is_goal_complete = yes
		}
	}

	on_complete = {
		remove_modifier = modifier_grefm_reclaiming_land
		hidden_effect = {
			trigger_event = {
				id = grefm.112 # Lake Kopais Drained
				days = 15
			}
		}
	}

	fail = {
		OR = {
			NOT = { owns_entire_state_region = STATE_ATTICA }
		}
	}

	on_fail = {
		remove_modifier = modifier_grefm_reclaiming_land
	}

	current_value = {
		value = global_var:grefm_lake_kopais_var
	}

	goal_add_value = { # this is much smaller scale than the vanilla JE
		add = 3
	}
	
	on_monthly_pulse = {
		events = {
			grefm.113 # A Citadel Emerges
		}
	}

	on_yearly_pulse = {
		random_events = {
			4 = 0
			1 = grefm.119 # Land Reclaimed in Kopaida
		}
	}

	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = je_grefm_land_reclaimation_status
				trigger = {
					always = yes
				}
			}
		}
	}

	weight = 1000

}

#########################
# IONIAN ISLANDS FLAVOR #
#########################

je_grefm_ion_xenocracy = {
	icon = "gfx/interface/icons/event_icons/event_heptanese.dds"
	
	group = je_group_grefm_heptanese
	
	should_be_pinned_by_default = yes
	
	immediate = {
	}
	
	modifiers_while_active = {	
		modifier_grefm_xenocracy
		modifier_grefm_hepantese_administration
	}
	
	complete = {
		AND = {
			any_scope_building = {
				is_building_type = building_government_administration
				OR = {
					has_active_production_method = pm_vertical_filing_cabinets
					has_active_production_method = pm_switch_boards
				}
			}
			bureaucracy < 0
			approaching_bureaucracy_shortage = no
		}
		institution_investment_level = {
			institution = institution_police
			value >= 3
		}
		institution_investment_level = {
			institution = institution_schools
			value >= 3
		}
	}
	
	on_complete = {
		trigger_event = {
			id = grefm.401 # An Ideal Colony
		}
	}
	
	fail = {
		OR = {
			is_subject = no
			trigger_if = {
				limit = {
					exists = c:GRE
				}
				is_subject_of = c:GRE
			}
		}
	}
	
	on_monthly_pulse = {
		random_events = {
			100 = 0
			5 = grefm.404 # The Ionian Academy
		}
	}

	weight = 1000

}

je_grefm_ion_venetian_legacy = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"
	
	group = je_group_grefm_heptanese
	
	should_be_pinned_by_default = yes
	
	immediate = {
	}
	
	modifiers_while_active = {
		modifier_grefm_venetian_legacy
	}
	
	complete = {
		NOR = {
			has_law = law_type:law_traditionalism
			has_law = law_type:law_serfdom
			has_law = law_type:law_tenant_farmers
		}
		any_scope_building = {
			is_building_type = building_wheat_farm
			earnings >= 5
			NOR = {
				has_active_production_method = pm_simple_farming
				has_active_production_method = pm_tools_disabled
			}
		}
	}
	
	on_complete = {
		trigger_event = {
			id = grefm.402 # Modernized Agriculture
		}
	}
	
	weight = 500
	
}

je_grefm_ion_poverty = {
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"
	
	group = je_group_grefm_heptanese
	
	should_be_pinned_by_default = yes
	
	immediate = {
	}
	
	complete = {
		bureaucracy > 0
		institution_investment_level = {
			institution = institution_social_security
			value >= 2
		}
		institution_investment_level = {
			institution = institution_health_system
			value >= 2
		}
	}
	
	on_complete = {
		trigger_event = {
			id = grefm.403 # A Civilized State
		}
	}
	
	weight = 100
	
}

je_grefm_ion_jewry = {
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"
	
	group = je_group_grefm_heptanese
	
	should_be_pinned_by_default = yes
	
	immediate = {
		set_variable = {
			name = grefm_samos_loyalist_jews_var
			value = grefm_jewish_loyalists_value
		}
		set_variable = {
			name = grefm_samos_radical_jews_var
			value = grefm_jewish_radicals_value
		}
	}
	
	modifiers_while_active = {
		modifier_grefm_jewish_exclusion
	}
	
	complete = {
		OR = {
			custom_tooltip = {
				text = je_grefm_ion_jewry_complete_tt1
				hidden_trigger = {
					modifier:state_jewish_standard_of_living_add >= 4
				}
			}
			custom_tooltip = {
				text = je_grefm_ion_jewry_complete_tt2
				hidden_trigger = {
					var:grefm_samos_loyalist_jews_var >= 0.75
				}
			}
			cu:romaniote = {
				NOT = {
					culture_is_discriminated_in = root
				}
			}
		}
	}
	
	on_complete = {
		trigger_event = {
			id = grefm.419 # A Judaeo-Greek Nation
		}
	}
	
	fail = {
		custom_tooltip = {
			text = je_grefm_ion_jewry_fail_tt
			hidden_trigger = {
				var:grefm_samos_radical_jews_var >= 0.75
			}
		}
	}
	
	on_fail = {
		trigger_event = {
			id = grefm.418 # Jewish Exclusion
		}
	}
	
	on_weekly_pulse = {
		effect = {
			set_variable = {
				name = grefm_samos_loyalist_jews_var
				value = grefm_jewish_loyalists_value
			}
			set_variable = {
				name = grefm_samos_radical_jews_var
				value = grefm_jewish_radicals_value
			}
		}
	}
	
	on_monthly_pulse = {
		events = {
			grefm.412 # Nacamulli's Press House
		}
		random_events = {
			400 = 0
			25 = grefm.411 # Jews Request former Rights
			5 = grefm.413 # Blood Libel
		}
	}
	
	weight = 100
	
}

########################
# MINOR COUNTRY FLAVOR #
########################

je_grefm_samos_main = {
	icon = "gfx/interface/icons/event_icons/event_samos.dds"
	
	group = je_group_grefm_content
	
	should_be_pinned_by_default = yes
	
	immediate = {
	}
	
	modifiers_while_active = {
		modifier_grefm_submission
	}
	
	complete = {
		OR = {
			is_subject = no
			trigger_if = {
				limit = {
					exists = c:GRE
				}
				is_subject_of = c:GRE
			}
		}
	}
	
	on_complete = {
		trigger_event = {
			id = grefm.508 # Samos Liberated
		}
	}
	
	fail = {
		OR = {
			is_subject_type = subject_type_puppet
			is_subject_type = subject_type_vassal
		}
	}
	
	on_monthly_pulse = {
		events = {
			grefm.505 # New Ruler Appointed
			grefm.506 # Prince of Samos Deposed
		}
		effect = {
			if = {
				limit = {
					NOT = {
						has_variable = grefm_stefanos_var
					}
					has_law = law_type:law_monarchy
				}
				change_variable = {
					name = grefm_samos_support_var
					add = grefm_samos_support_value
				}
				change_variable = {
					name = grefm_samos_ruler_duration_var
					subtract = 1
				}
			}
			if = {
				limit = {
					has_variable = grefm_stefanos_var
					NOT = {
						has_law = law_type:law_monarchy
					}
				}
				remove_variable = grefm_stefanos_var
			}
		}
	}
	
	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = je_grefm_samos_main_status_1
				trigger = {
					has_variable = grefm_stefanos_var
					has_law = law_type:law_monarchy
				}
			}
			triggered_desc = {
				desc = je_grefm_samos_main_status_2
				trigger = {
					NOT = {
						has_variable = grefm_stefanos_var
						has_law = law_type:law_monarchy
					}
				}
			}
		}
	}
	
	weight = 1000
	
}

je_grefm_samos_organic_law = {
	icon = "gfx/interface/icons/event_icons/event_scales.dds"
	
	group = je_group_grefm_content
	
	should_be_pinned_by_default = yes
	
	modifiers_while_active = {
		modifier_grefm_westernized_thought
		modifier_grefm_hegemonic_ruler
	}
	
	complete = {
		has_law = law_type:law_monarchy
		OR = {
			has_law = law_type:law_appointed_bureaucrats
			has_law = law_type:law_elected_bureaucrats
		}
		OR = {
			has_law = law_type:law_wealth_voting
			has_law = law_type:law_census_voting
			has_law = law_type:law_universal_suffrage
		}
		NOR = {
			has_law = law_type:law_consumption_based_taxation
			has_law = law_type:law_land_based_taxation
			has_law = law_type:law_censorship
		}
	}
	
	on_complete = {
		trigger_event = {
			id = grefm.502 # The Organic Charter
		}
		remove_variable = grefm_stefanos_var
	}
	
	fail = {
		has_law = law_type:law_monarchy
		has_law = law_type:law_autocracy
		has_law = law_type:law_hereditary_bureaucrats
		has_law = law_type:law_consumption_based_taxation
	}
	
	on_fail = {
		trigger_event = {
			id = grefm.503 # The Tyranny of Lord Stefanos
		}
	}
	
	timeout = 4745 # You get 13 years, just like Stefanos did
	
	on_timeout = {
		trigger_event = {
			id = grefm.504 # Stefanos Desposed
		}
		remove_variable = grefm_stefanos_var
	}
	
	invalid = {
		NOR = {
			has_law = law_type:law_monarchy
			trigger_if = {
				limit = {
					exists = c:TUR
				}
				is_subject_of = c:TUR
			}
			custom_tooltip = {
				text = je_grefm_stefanos_tt
				hidden_trigger = {
					ruler = {
						NOT = {
							has_template = template_grefm_bogoridi_stefan
						}
					}
				}
			}
		}
	}
	
	on_invalid = {
		remove_variable = grefm_stefanos_var
	}
	
	weight = 500
	
}


#####################
# UNUSED /TECHNICAL #
#####################
je_grefm_intro = {
	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"
	
	group = je_group_grefm_content
	
	should_be_pinned_by_default = no
	
	complete = {
		always = yes
	}

	on_complete = {
	}
	
	weight = 1
	
}