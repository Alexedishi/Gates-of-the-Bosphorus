#############################
# THE BYZANTINE RESTORATION #
#############################

je_byzfm_restoration = {
	icon = "gfx/interface/icons/event_icons/event_eagle.dds"
	
	group = je_group_byzfm_restoration
	
	should_be_pinned_by_default = yes	
	
	immediate = {
	}
	
	modifiers_while_active = {
		modifier_byzfm_imperial_aspiriations
	}
	
	complete = {
		custom_tooltip = {
			text = je_byzfm_restoration_tt1
			hidden_trigger = {
				calc_true_if = {
					amount > 9
					country_or_subject_owns_entire_state_region = STATE_ALBANIA
					country_or_subject_owns_entire_state_region = STATE_BOSNIA
					country_or_subject_owns_entire_state_region = STATE_BULGARIA
					country_or_subject_owns_entire_state_region = STATE_CRETE
					country_or_subject_owns_entire_state_region = STATE_CROATIA
					country_or_subject_owns_entire_state_region = STATE_DALMATIA
					country_or_subject_owns_entire_state_region = STATE_IONIAN_ISLANDS
					country_or_subject_owns_entire_state_region = STATE_MACEDONIA
					country_or_subject_owns_entire_state_region = STATE_MONTENEGRO
					country_or_subject_owns_entire_state_region = STATE_NORTHERN_SERBIA
					country_or_subject_owns_entire_state_region = STATE_NORTHERN_THRACE
					country_or_subject_owns_entire_state_region = STATE_PELOPONNESE
					country_or_subject_owns_entire_state_region = STATE_SKOPIA
					country_or_subject_owns_entire_state_region = STATE_SLAVONIA
					country_or_subject_owns_entire_state_region = STATE_SLOVENIA
					country_or_subject_owns_entire_state_region = STATE_SOUTHERN_SERBIA
					country_or_subject_owns_entire_state_region = STATE_THESSALIA
					country_or_subject_owns_entire_state_region = STATE_WEST_AEGEAN_ISLANDS
					country_or_subject_owns_entire_state_region = STATE_WESTERN_THRACE
				}
			}
		}
		custom_tooltip = {
			text = je_byzfm_restoration_tt2
			hidden_trigger = {
				calc_true_if = {
					amount > 8
					country_or_subject_owns_entire_state_region = STATE_ADANA
					country_or_subject_owns_entire_state_region = STATE_ANKARA
					country_or_subject_owns_entire_state_region = STATE_AYDIN
					country_or_subject_owns_entire_state_region = STATE_CYPRUS
					country_or_subject_owns_entire_state_region = STATE_DIYARBAKIR
					country_or_subject_owns_entire_state_region = STATE_EAST_AEGEAN_ISLANDS
					country_or_subject_owns_entire_state_region = STATE_EASTERN_THRACE
					country_or_subject_owns_entire_state_region = STATE_ERZURUM
					country_or_subject_owns_entire_state_region = STATE_HUDAVENDIGAR
					country_or_subject_owns_entire_state_region = STATE_KASTAMONU
					country_or_subject_owns_entire_state_region = STATE_KONYA
					country_or_subject_owns_entire_state_region = STATE_TRABZON
				}
			}
		}
	}
		
	on_complete = {
		trigger_event = {
			id = byzfm.302 # Nova Roma Constantinopolitana
		}
	}
	
	invalid = {
		has_variable = byzfm_weaksauce
	}

	weight = 10000
}

je_byzfm_rome_of_the_east = {
	icon = "gfx/interface/icons/event_icons/event_eagle.dds"
	
	group = je_group_byzfm_restoration
	
	should_be_pinned_by_default = yes
	
	modifiers_while_active = {
		modifier_byzfm_imperial_aspiriations
	}

	complete = {
		country_rank >= rank_value:great_power
		any_scope_state = {
			has_building = building_mega_palation
		}
		country_or_subject_owns_entire_state_region = STATE_ALEPPO
		country_or_subject_owns_entire_state_region = STATE_LEBANON
		country_or_subject_owns_entire_state_region = STATE_SYRIA
		country_or_subject_owns_entire_state_region = STATE_PALESTINE
		country_or_subject_owns_entire_state_region = STATE_TRANSJORDAN
		country_or_subject_owns_entire_state_region = STATE_SINAI
		country_or_subject_owns_entire_state_region = STATE_LOWER_EGYPT
		country_or_subject_owns_entire_state_region = STATE_MIDDLE_EGYPT
		country_or_subject_owns_entire_state_region = STATE_UPPER_EGYPT
		country_or_subject_owns_entire_state_region = STATE_MATRUH
		country_or_subject_owns_entire_state_region = STATE_LIBYA
	}
	
	invalid = {
		has_variable = byzfm_weaksauce
	}
	
	on_complete = {
		trigger_event = {
			id = byzfm.304 # The Basileia Rhōmaiōn
		}
	}
	
	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = je_byzfm_rome_of_the_east_status
			}
		}
	}	

	weight = 10000
	
}

######################
# THE PURPLE PHEONIX #
######################

je_byzfm_the_purple_phoenix = {
	icon = "gfx/interface/icons/event_icons/event_aquila.dds"
	
	group = je_group_byzfm_empire
	
	should_be_pinned_by_default = yes
	
	modifiers_while_active = {
		modifier_byzfm_imperial_aspiriations
	}

	complete = {
		custom_tooltip = {
			text = je_byzfm_the_purple_phoenix_tt1
			hidden_trigger = {
				country_or_subject_owns_entire_state_region = STATE_LAZIO
			}
		}
		custom_tooltip = {
			text = je_byzfm_the_purple_phoenix_tt2
			hidden_trigger = {
				AND = {
					country_or_subject_owns_entire_state_region = STATE_VENETIA
					country_or_subject_owns_entire_state_region = STATE_ISTRIA
					country_or_subject_owns_entire_state_region = STATE_CROATIA
					country_or_subject_owns_entire_state_region = STATE_DALMATIA
				}
			}
		}
		custom_tooltip = {
			text = je_byzfm_the_purple_phoenix_tt3
			hidden_trigger = {
				AND = {
					country_or_subject_owns_entire_state_region = STATE_SAVOY
					country_or_subject_owns_entire_state_region = STATE_LOMBARDY
					country_or_subject_owns_entire_state_region = STATE_PIEDMONT
					country_or_subject_owns_entire_state_region = STATE_SOUTH_TYROL
				}
			}
		}
		custom_tooltip = {
			text = je_byzfm_the_purple_phoenix_tt4
			hidden_trigger = {
				AND = {
					country_or_subject_owns_entire_state_region = STATE_ABRUZZO
					country_or_subject_owns_entire_state_region = STATE_APULIA
					country_or_subject_owns_entire_state_region = STATE_CALABRIA
					country_or_subject_owns_entire_state_region = STATE_CAMPANIA
				}
			}
		}
		custom_tooltip = {
			text = je_byzfm_the_purple_phoenix_tt5
			hidden_trigger = {
				AND = {
					country_or_subject_owns_entire_state_region = STATE_EMILIA
					country_or_subject_owns_entire_state_region = STATE_ROMAGNA
					country_or_subject_owns_entire_state_region = STATE_TUSCANY
					country_or_subject_owns_entire_state_region = STATE_UMBRIA
				}
			}
		}
	}
	
	on_complete = {
		trigger_event = {
			id = byzfm.306 # Renovatio Imperii Romanorum
		}
	}
	
	invalid = {
		has_variable = byzfm_weaksauce
	}
	
	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = je_byzfm_the_purple_phoenix_status
			}
		}
	}

	progressbar = yes

	weight = 10000

}

je_byzfm_the_purple_phoenix_dalmatia = {
	icon = "gfx/interface/icons/event_icons/event_aquila.dds"
	
	group = je_group_byzfm_empire
	
	should_be_pinned_by_default = yes
	
	complete = {
		owns_entire_state_region = STATE_VENETIA
		owns_entire_state_region = STATE_ISTRIA
		owns_entire_state_region = STATE_CROATIA
		owns_entire_state_region = STATE_DALMATIA
	}
	
	on_complete = {
		trigger_event = {
			id = byzfm.330
		}
	}
	
	invalid = {
		has_variable = byzfm_weaksauce
	}

	weight = 1000

}

je_byzfm_the_purple_phoenix_northern_italy = {
	icon = "gfx/interface/icons/event_icons/event_aquila.dds"
	
	group = je_group_byzfm_empire
	
	should_be_pinned_by_default = yes
	
	complete = {
		owns_entire_state_region = STATE_SAVOY
		owns_entire_state_region = STATE_LOMBARDY
		owns_entire_state_region = STATE_PIEDMONT
		owns_entire_state_region = STATE_SOUTH_TYROL
	}
	
	on_complete = {
		trigger_event = {
			id = byzfm.331
		}
	}
	
	invalid = {
		has_variable = byzfm_weaksauce
	}

	weight = 1000

}

je_byzfm_the_purple_phoenix_southern_italy = {
	icon = "gfx/interface/icons/event_icons/event_aquila.dds"
	
	group = je_group_byzfm_empire
	
	should_be_pinned_by_default = yes
	
	complete = {
		owns_entire_state_region = STATE_ABRUZZO
		owns_entire_state_region = STATE_APULIA
		owns_entire_state_region = STATE_CALABRIA
		owns_entire_state_region = STATE_CAMPANIA
	}
	
	on_complete = {
		trigger_event = {
			id = byzfm.332
		}
	}
	
	invalid = {
		has_variable = byzfm_weaksauce
	}

	weight = 1000

}

je_byzfm_the_purple_phoenix_central_italy = {
	icon = "gfx/interface/icons/event_icons/event_aquila.dds"
	
	group = je_group_byzfm_empire
	
	should_be_pinned_by_default = yes
	
	complete = {
		owns_entire_state_region = STATE_EMILIA
		owns_entire_state_region = STATE_ROMAGNA
		owns_entire_state_region = STATE_TUSCANY
		owns_entire_state_region = STATE_UMBRIA
	}
	
	on_complete = {
		trigger_event = {
			id = byzfm.333
		}
	}
	
	invalid = {
		has_variable = byzfm_weaksauce
	}

	weight = 1000

}

#######################
# IMPERIAL AMIBITIONS #
#######################

## AMBITION JOURNALS ##

je_byzfm_constantinople = { # 14 Regions of Constantinople
	icon = "gfx/interface/icons/event_icons/event_eagle.dds"
	
	group = je_group_byzfm_content
	
	should_be_pinned_by_default = yes
	
	is_shown_when_inactive = {
		OR = {
			c:BYZ ?= this
			c:ERE ?= this
		}
	}
	
	possible = {
		custom_tooltip = {
			text = je_byzfm_constantinople_tt
			has_variable = byzfm_byzantium_restored
		}
		owns_entire_state_region = STATE_EASTERN_THRACE
		capital = {
			state_region = STATE_EASTERN_THRACE
		}	
	}
	
	immediate = {
		trigger_event = {
			id = byzfm.100 # The 14 Regions of Constantinople
		}
	}
	
	complete = {
		AND = { # Region 1
			any_scope_state = {
				has_building = building_mega_palation
			}
			any_scope_state = {
				has_building = building_hippodrome
			}
		}
	}
	
	on_complete = {
		trigger_event = {
			id = byzfm.104 # Notitia Urbis Constantinopolitanae
		}
	}
	
	fail = {
		NOT = {
			owns_entire_state_region = STATE_EASTERN_THRACE
		}
	}
	
	on_fail = {
	}
	
	status_desc = {
	}

	weight = 100
	
}

## MONUMENT CONSTRUCTIONS ##

je_byzfm_mega_palation_survey = {
	icon = "gfx/interface/icons/event_icons/event_ruins.dds"
	
	group = je_group_byzfm_content

	modifiers_while_active = {
		modifier_byzfm_site_survey
	}

	complete = {
		scope:journal_entry = { is_goal_complete = yes }
	}

	on_complete = {
		trigger_event = {
			id = byzfm.101 # Imperial Palace Ruins Identified
		}
		remove_variable = byzfm_imperial_palace_var
	}

	fail = {
		NOT = {
			owns_entire_state_region = STATE_EASTERN_THRACE
		}
	}

	on_fail = {
		remove_variable = byzfm_imperial_palace_var
	}
	
	invalid = {
		hidden_trigger = {
			has_variable = byzfm_mega_palation_surveyed
		}
	}
	
	on_invalid = {
		remove_variable = byzfm_imperial_palace_var
	}
	
	on_monthly_pulse = {
		effect = {
			change_variable = {
				name = byzfm_imperial_palace_var
				add = 1
			}
		}
	}

	current_value = {
		value = root.var:byzfm_imperial_palace_var
	}

	goal_add_value = {
		value = 24
	}

	progressbar = yes

	weight = 100

	should_be_pinned_by_default = yes
	
}

je_byzfm_mega_palation = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"
	
	group = je_group_byzfm_content

	immediate = {
		balkfm_calculate_construction_effect = yes
	}
	
	scripted_button = balkfm_construction_0_button
	scripted_button = balkfm_construction_1_button
	scripted_button = balkfm_construction_2_button
	scripted_button = balkfm_construction_3_button

	complete = {
		scope:journal_entry = { is_goal_complete = yes }
	}
	
	on_complete = {
		set_variable = byzfm_mega_palation_complete
		trigger_event = { 
			id = byzfm.102 # Great Palace of Constantinople
		}
		balkfm_clean_up_construction_effect = yes
	}

	fail = {
		NOT = {
			owns_entire_state_region = STATE_EASTERN_THRACE
		}
	}

	on_fail = {
		balkfm_clean_up_construction_effect = yes
	}
	
	on_weekly_pulse = {
		effect = {
			balkfm_calculate_construction_effect = yes
			balkfm_push_construction_effect = yes
		}
	}

	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = je_balkfm_construction_4
				trigger = {
					scope:journal_entry = { 
						is_goal_complete = yes 
					}
				}
			}
			triggered_desc = {
				desc = je_balkfm_construction_0
				trigger = {
					NOR = {
						has_modifier = modifier_balkfm_construction_1
						has_modifier = modifier_balkfm_construction_2
						has_modifier = modifier_balkfm_construction_3
					}
				}
			}
			triggered_desc = {
				desc = je_balkfm_construction_3
				trigger = {
					has_modifier = modifier_balkfm_construction_3
				}
			}
			triggered_desc = {
				desc = je_balkfm_construction_2
				trigger = {
					has_modifier = modifier_balkfm_construction_2
				}
			}
			triggered_desc = {
				desc = je_balkfm_construction_1
				trigger = {
					has_modifier = modifier_balkfm_construction_1
				}
			}
		}
	}
	
	current_value = {
		value = var:balkfm_construction_var
	}

	goal_add_value = {
		value = 2500 # Monument construction cost
	}

	progressbar = yes

	weight = 100
	
}

je_byzfm_hippodrome = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"
	
	group = je_group_byzfm_content

	immediate = {
		balkfm_calculate_construction_effect = yes
	}
	
	scripted_button = balkfm_construction_0_button
	scripted_button = balkfm_construction_1_button
	scripted_button = balkfm_construction_2_button
	scripted_button = balkfm_construction_3_button

	complete = {
		scope:journal_entry = { is_goal_complete = yes }
	}
	
	on_complete = {
		set_variable = byzfm_hippodrome_complete
		trigger_event = { 
			id = byzfm.103 # The Hippodrome of Constantinople
		}
		balkfm_clean_up_construction_effect = yes
	}

	fail = {
		NOT = {
			owns_entire_state_region = STATE_EASTERN_THRACE
		}
	}

	on_fail = {
		balkfm_clean_up_construction_effect = yes
	}
	
	on_weekly_pulse = {
		effect = {
			balkfm_calculate_construction_effect = yes
			balkfm_push_construction_effect = yes
		}
	}

	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = je_balkfm_construction_4
				trigger = {
					scope:journal_entry = { 
						is_goal_complete = yes 
					}
				}
			}
			triggered_desc = {
				desc = je_balkfm_construction_0
				trigger = {
					NOR = {
						has_modifier = modifier_balkfm_construction_1
						has_modifier = modifier_balkfm_construction_2
						has_modifier = modifier_balkfm_construction_3
					}
				}
			}
			triggered_desc = {
				desc = je_balkfm_construction_3
				trigger = {
					has_modifier = modifier_balkfm_construction_3
				}
			}
			triggered_desc = {
				desc = je_balkfm_construction_2
				trigger = {
					has_modifier = modifier_balkfm_construction_2
				}
			}
			triggered_desc = {
				desc = je_balkfm_construction_1
				trigger = {
					has_modifier = modifier_balkfm_construction_1
				}
			}
		}
	}
	
	current_value = {
		value = var:balkfm_construction_var
	}

	goal_add_value = {
		value = 2500 # Monument construction cost
	}

	progressbar = yes

	weight = 100
	
}
