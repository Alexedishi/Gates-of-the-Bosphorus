###############
# YUGOSLAVISM #
###############

je_balkfm_nacertanije = { # This variant handles Yugoslavian Unification for most Slavic tags
	icon = "gfx/interface/icons/event_icons/event_flag_yug.dds"
	
	group = je_group_balkfm_yugoslavism
	
	should_be_pinned_by_default = yes
	
	is_shown_when_inactive = {
		OR = {
			country_has_primary_culture = cu:serb
			country_has_primary_culture = cu:croat
			country_has_primary_culture = cu:bosniak
			country_has_primary_culture = cu:slovene
		}
		NOR = { 
			has_global_variable = has_formed_yug
			has_global_variable = balkfm_yugoslavism_failed
		}
	}
	
	possible = {
		has_technology_researched = nationalism
		is_subject = no
		hidden_trigger = { # these are here to block nacertanije from opening before a tag has independence
			is_secessionist = no
		}
	}
	
	immediate = {
		if = {
			limit = {
				NOT = {
					has_global_variable = balkfm_yugoslavism_started
				}
			}
			set_variable = balkfm_yugoslav_leader_var # first come, first serve
		}
		balkfm_update_yugoslav_leader_scope = yes # avoids loc error in journal
		if = {
			limit = {
				c:MON ?= this
			}
			trigger_event = {
				id = balkfm.201 # Jugoslavism
			}
		}
		else_if = {
			limit = {
				c:SER ?= this
			}
			trigger_event = {
				id = balkfm.202 # "The Draft"
			}
		}
		else = {
			trigger_event = {
				id = balkfm.200 # Illyrian Sentiment
			}
		}
		set_global_variable = balkfm_yugoslavism_started
	}
	
	complete = {
		custom_tooltip = {
			text = je_balkfm_nacertanije_tt
			hidden_trigger = {
				c:YUG ?= this
			}
		}
		has_technology_researched = pan-nationalism
	}
	
	on_complete = {
		trigger_event = {
			id = balkfm.209 # The Birth of Yugoslavia
		}
	}
	
	fail = {
		custom_tooltip = {
			text = je_balkfm_nacertanije_fail_tt
			hidden_trigger = {
				OR = {
					c:SRPS ?= this
					c:TSAR ?= this
					c:TRIU ?= this
					c:BYZ ?= this
				}
			}
		}
	}
	
	invalid = {
		hidden_trigger = {
			OR = {
				has_variable = balkfm_weaksauce
				has_global_variable = balkfm_yugoslavism_failed
			}
		}
	}
	
	on_weekly_pulse = {
		effect = {
			balkfm_determine_yugoslav_leader = yes
			balkfm_update_yugoslav_leader_scope = yes
		}
		events = {
#			balkfm.204 # Yugoslav Uprising in X
		}
	}
	
	on_monthly_pulse = {
		random_events = {
			180 = 0
			20 = balkfm.203 # Yugoslav Breakaways Seek Union!
			5 = balkfm.207 # Yugoslav Annexation
		}
	}
	
	scripted_button = balkfm_form_yugoslavia_button
	scripted_button = balkfm_austrian_agitation_button
	scripted_button = balkfm_ottoman_agitation_button

	weight = 2000
	
}

je_balkfm_nacertanije_alternate = { # This variant handles Yugoslavian Unification for Bulgaria
	icon = "gfx/interface/icons/event_icons/event_flag_yug.dds"
	
	group = je_group_balkfm_yugoslavism
	
	should_be_pinned_by_default = yes
	
	complete = {
		custom_tooltip = {
			text = je_balkfm_nacertanije_tt
			hidden_trigger = {
				c:YUG ?= this
			}
		}
		has_technology_researched = pan-nationalism		
		owns_entire_state_region = STATE_BULGARIA
		owns_entire_state_region = STATE_NORTHERN_THRACE
		owns_entire_state_region = STATE_DOBRUDJA
	}
	
	on_complete = {
		trigger_event = {
			id = balkfm.587 # The Slavic Balkans
		}
	}
	
	invalid = {
		OR = {
			has_variable = balkfm_weaksauce
			has_global_variable = balkfm_yugoslavism_failed
		}
	}
	
	on_weekly_pulse = {
		effect = {
			balkfm_determine_yugoslav_leader = yes
			balkfm_update_yugoslav_leader_scope = yes
		}
		events = {
#			balkfm.204 # Yugoslav Uprising in X
		}
	}
	
	on_monthly_pulse = {
		random_events = {
			180 = 0
			20 = balkfm.203 # Yugoslav Breakaways Seek Union!
			5 = balkfm.207 # Yugoslav Annexation
		}
	}
	
	scripted_button = balkfm_form_yugoslavia_button
	scripted_button = balkfm_austrian_agitation_button
	scripted_button = balkfm_ottoman_agitation_button
	
	weight = 500
	
}
	

#####################
# MONTENEGRO FLAVOR #
#####################

je_balkfm_mon_prince_bishopric = {
	icon = "gfx/interface/icons/event_icons/event_montenegro_major.dds"
	
	group = je_group_balkfm_montenegro
	
	should_be_pinned_by_default = yes	
	
	immediate = {
	}
	
	complete = {
		NOT = { has_law = law_type:law_theocracy }
		custom_tooltip = {
			text = balkfm_mon_prince_bishopric_tt1
			hidden_trigger = {
				has_variable = balkfm_mon_soc_completed
			}
		}
		custom_tooltip = {
			text = balkfm_mon_prince_bishopric_tt2
			hidden_trigger = {
				has_variable = balkfm_mon_gov_completed
			}
		}
		custom_tooltip = {
			text = balkfm_mon_prince_bishopric_tt3
			hidden_trigger = {
				has_variable = balkfm_mon_mil_completed
			}
		}
	}
	
	on_complete = {
		trigger_event = {
			id = balkfm.310 # The Principality of Montenegro
		}
	}
	
	weight = 1000

}

je_balkfm_mon_societal_reform = {
	icon = "gfx/interface/icons/event_icons/event_scales.dds"
	
	group = je_group_balkfm_montenegro
	
	immediate = {
	}
	
	complete = {
		NOT = { has_law = law_type:law_hereditary_bureaucrats }
		NOT = { has_law = law_type:law_traditionalism }
		NOT = { has_law = law_type:law_serfdom }
	}
	
	on_complete = {
		trigger_event = {
			id = balkfm.301 # The Light of Modernity
		}
	}
	
	weight = 500

}

je_balkfm_mon_administration = {
	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"
	
	group = je_group_balkfm_montenegro
	
	immediate = {
	}
	
	complete = {
		NOT = { has_law = law_type:law_land_based_taxation }
		any_scope_state = {
			has_building = building_government_administration
		}
		bureaucracy >= 0 
		approaching_bureaucracy_shortage = no
	}
	
	on_complete = {
		trigger_event = {
			id = balkfm.302 # Centralized Administration
		}
	}
	
	weight = 500

}

je_balkfm_mon_military_reform = {
	icon = "gfx/interface/icons/event_icons/event_military.dds"
	
	group = je_group_balkfm_montenegro
	
	immediate = {
	}
	
	complete = {
		NOT = { has_law = law_type:law_peasant_levies }
		army_size >= 5
	}
	
	on_complete = {
		trigger_event = {
			id = balkfm.304 # A Professional Outfit
		}
	}
	
	weight = 500

}

je_balkfm_mon_benefactor = {
	icon = "gfx/interface/icons/event_icons/event_montenegro.dds"
	
	group = je_group_balkfm_montenegro
	
	complete = {
		OR = {
			c:RUS ?= {
				has_diplomatic_pact = {
					who = c:MON
					type = protectorate
				}
			}
			c:AUS ?= {
				has_diplomatic_pact = {
					who = c:MON
					type = protectorate
				}
			}
		}
	}
	
	on_complete = {
		random_country = {
			limit = {
				has_subject_relation_with = c:MON
			}
			set_variable = balkfm_benefactor_var
		}
	}

	invalid = {
		hidden_trigger = {
			NOT = { has_variable = balkfm_feudal_relic }
		}
	}
	
}

je_balkfm_mon_ali_pasha = {
	icon = "gfx/interface/icons/event_icons/event_ottoman.dds"
	
	group = je_group_balkfm_montenegro
	
	should_be_pinned_by_default = yes
	
	complete = {
		custom_tooltip = {
			text = je_balkfm_mon_ali_pasha_tt
			hidden_trigger = {
				has_global_variable = balkfm_ali_pasha_waxed
			}
		}
	}
	
	on_complete = {
		add_modifier = {
			name = modifier_balkfm_weathered_the_storm
			months = normal_modifier_time
		}
		hidden_effect = {
			trigger_event = {
				id = balkfm.340 # Osman Pasha Attacks!
				days = 240
			}
		}
	}
	
	modifiers_while_active = {
		modifier_balkfm_border_feud
	}
	
	weight = 400
	
}

je_balkfm_mon_black_mountain = {
	icon = "gfx/interface/icons/event_icons/event_montenegro_major.dds"
	
	group = je_group_balkfm_montenegro
	
	should_be_pinned_by_default = yes
	
	immediate = {
	}
	
	complete = {
		owns_entire_state_region = STATE_MONTENEGRO
	}
	
	on_complete = {
		trigger_event = {
			id = balkfm.381 # The Lands of Montenegro
		}
	}
	
	weight = 1000

}

je_balkfm_mon_philosopher_bishop = {
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"
	
	group = je_group_balkfm_montenegro	
	
	should_be_pinned_by_default = yes
	
	immediate = {
	}
	
	complete = {
		custom_tooltip = {
			text = je_balkfm_mon_philosopher_bishop_tt
			hidden_trigger = {
				var:manzoni_literary_tradition_var >= 50
			}
		}
	}
	
	on_complete = {
		trigger_event = {
			id = balkfm.391 # The Philosopher-Bishop
		}
	}
	
	fail = {
		custom_tooltip = {
			text = balkfm_mon_petar_dead_tt
			hidden_trigger = {
				ruler = {
					NOT = {
						has_variable = balkfm_is_petar
					}
				}
			}
		}
	}
		
	invalid = {
		hidden_trigger = {
			morgenrote_is_active = no
		}
	}
	
	scripted_button = balkfm_compose_epic_button
	
	weight = 500
	
}

je_balkfm_mon_epic = {
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"
	
	group = je_group_balkfm_montenegro
	
	should_be_pinned_by_default = yes
	
	immediate = {
		if = {
			limit = {
				NOT = {
					has_variable = balkfm_epic_composition_var
				}
			}
			set_variable = {
				name = balkfm_epic_composition_var
				value = 0
			}
		}
	}
	
	complete = {
		scope:journal_entry = {
			is_goal_complete = yes
		}
	}

	on_complete = {
		trigger_event = {
			id = balkfm.392 # Literary Work Completed
		}
		remove_modifier = modifier_balkfm_composing_epic
	}
	
	current_value = {
		value = var:balkfm_epic_composition_var
	}

	goal_add_value = {
		add = 24
	}
	
	on_monthly_pulse = {
		effect = {
			change_variable = {
				name = balkfm_epic_composition_var
				add = 1
			}
		}
	}
	
	weight = 500
	
}

#################
# SERBIA FLAVOR #
#################

je_balkfm_ser_monarchism = {
	icon = "gfx/interface/icons/event_icons/event_serbia_major1.dds"
	
	group = je_group_balkfm_serbia
	
	should_be_pinned_by_default = yes	
	
	immediate = {
		balkfm_set_monarchism_variables = yes
	}
	
	complete = {
		has_law = law_type:law_monarchy
		custom_tooltip = {
			text = je_balkfm_ser_monarchism_tt
			hidden_trigger = {
				has_variable = balkfm_ser_cement_poured
			}
		}
	}
	
	on_complete = {
		trigger_event = {
			id = balkfm.419 # Mandate Secured
		}
		hidden_effect = {
			balkfm_clean_up_ser_monarchism = yes
		}
	}
	
	fail = {
		NOT = {
			has_law = law_type:law_monarchy
		}
	}
	
	on_fail = {
		hidden_effect = {
			balkfm_clean_up_ser_monarchism = yes
		}
	}
	
	scripted_button = balkfm_cement_monarchy_button
	
	on_weekly_pulse = {
		effect = {
			balkfm_calculate_dynasty_support = yes
		}
	}
	
	on_monthly_pulse = {
		events = {
			balkfm.401 # Constitution Imposed
			balkfm.403 # Defenders of the Constitution
			balkfm.414 # Austria/Russia Requests Primacy
		}
		random_events = {
			300 = 0
			1 =	balkfm.412 # Plague Outbreak!
			1 = balkfm.413 # Abusive Garrison
			1 = balkfm.415 # National Desires
		}
		effect = {
			balkfm_update_dynasty_variables = yes
			balkfm_define_leading_dynasty = yes
		}
	}
	
	on_yearly_pulse = {
		effect = {
			if = {
				limit = {
					var:ser_leading_dynasty_var < 1
					has_variable = obrenovic_crowned_var
				}
				balkfm_karadordevic_takeover = yes
			}
			else_if = {
				limit = {
					var:ser_leading_dynasty_var < 1
					has_variable = karadordevic_crowned_var
				}
				balkfm_obrenovic_takeover = yes
			}
		}
	}
	
	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = je_balkfm_ser_monarchism_status_1
				trigger = {
					has_variable = balkfm_constitution_pending
				}
			}
			triggered_desc = {
				desc = je_balkfm_ser_monarchism_status_2
				trigger = {
					var:ser_leading_dynasty_var < 50
				}
			}
			triggered_desc = {
				desc = je_balkfm_ser_monarchism_status_3
				trigger = {
					var:obrenovic_support_var > var:karadordevic_support_var
				}
			}
			triggered_desc = {
				desc = je_balkfm_ser_monarchism_status_4
				trigger = {
					var:obrenovic_support_var < var:karadordevic_support_var
				}
			}
			triggered_desc = {
				desc = je_balkfm_ser_monarchism_status_5
				trigger = {
					var:obrenovic_support_var = var:karadordevic_support_var
				}
			}
		}
	}
	
	current_value = {
		value = var:ser_leading_dynasty_var
	}
	
	goal_add_value = {
		value = 500
	}

	progressbar = yes
	
	
	weight = 1000

}

je_balkfm_ser_pouring_cement = {
	icon = "gfx/interface/icons/event_icons/event_serbia_major1.dds"
	
	group = je_group_balkfm_serbia
	
	should_be_pinned_by_default = yes
	
	immediate = {
	}
	
	complete = {
		scope:journal_entry = {
			is_goal_complete = yes
		}
	}
	
	on_complete = {
		set_variable = balkfm_ser_cement_poured
		remove_variable = balkfm_pouring_cement_var
	}
	
	fail = {
		NOT = { has_law = law_type:law_monarchy }
	}
	
	on_fail = {
		remove_variable = balkfm_pouring_cement_var
	}
	
	on_monthly_pulse = {
		random_events = {
			200 = 0
		}
		effect = {
			change_variable = {
				name = balkfm_pouring_cement_var
				add = 1
			}
		}
	}
	
	current_value = {
		value = root.var:balkfm_pouring_cement_var
	}

	goal_add_value = {
		add = 60 # 5 years if you avoid every negative option
	}

	progressbar = yes
	
	weight = 500
	
}


je_balkfm_ser_defenders = {
	icon = "gfx/interface/icons/event_icons/event_serbia_major2.dds"
	
	group = je_group_balkfm_serbia
	
	should_be_pinned_by_default = yes
	
	immediate = {
	}
	
	complete = {
		NOT = { has_modifier = modifier_balkfm_royal_turmoil }
		custom_tooltip = {
			text = je_balkfm_ser_defenders_tt1
			hidden_trigger = {
				has_variable = balkfm_statism_completed
			}
		}
		custom_tooltip = {
			text = je_balkfm_ser_defenders_tt2
			hidden_trigger = {
				has_variable = balkfm_civics_completed
			}
		}
		custom_tooltip = {
			text = je_balkfm_ser_defenders_tt3
			hidden_trigger = {
				has_variable = balkfm_economy_completed
			}
		}
	}
	
	on_complete = {
		trigger_event = {
			id = balkfm.405 # A New Constitution
		}
		set_variable = balkfm_defenders_completed
	}
	
	timeout = 3650 # mod's been out for over a year and this my first timeout journal since the Bavarocracy journals... anyway, this number is based on the "Defenders" being dominant in Serbian politics from roughly 1838-1858
	
	on_timeout = {
		trigger_event = {
			id = balkfm.406 # Absent Reform
		}
		set_variable = balkfm_defenders_completed
	}
	
	invalid = {
		NOT = {
			has_law = law_type:law_monarchy
		}
	}
	
	on_invalid = {
		set_variable = balkfm_defenders_completed
	}
	
	weight = 500
	
}

je_balkfm_ser_statism = {
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"
	
	group = je_group_balkfm_serbia
	
	immediate = {
	}
	
	complete = {
		NOR = { 
			has_law = law_type:law_autocracy
			has_law = law_type:law_hereditary_bureaucrats
			has_law = law_type:law_peasant_levies
		}
	}

	on_complete = {
		trigger_event = {
			id = balkfm.407 # Stately Foundation Established
		}
	}
	
	invalid = {
		hidden_trigger = {
			has_variable = balkfm_defenders_completed
		}
	}
	
	weight = 500
	
}

je_balkfm_ser_civics = {
	icon = "gfx/interface/icons/event_icons/event_scales.dds"
	
	group = je_group_balkfm_serbia
	
	immediate = {
	}
	
	complete = {
		NOR = {
			has_law = law_type:law_serfdom
			has_law = law_type:law_consumption_based_taxation
			has_law = law_type:law_no_schools
		}
	}
	
	on_complete = {
		trigger_event = {
			id = balkfm.408 # Civil Code Implemented
		}
	}
	
	invalid = {
		hidden_trigger = {
			has_variable = balkfm_defenders_completed
		}
	}
	
	weight = 500
	
}
		
je_balkfm_ser_economics = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"
	
	group = je_group_balkfm_serbia
	
	immediate = {
	}
	
	complete = {
		NOR = {
			has_law = law_type:law_traditionalism
			has_law = law_type:law_isolationism
			has_law = law_type:law_consumption_based_taxation
			has_law = law_type:law_land_based_taxation
		}
	}
	
	on_complete = {
		trigger_event = {
			id = balkfm.409 # Economic System Reformed
		}
	}
	
	invalid = {
		hidden_trigger = {
			has_variable = balkfm_defenders_completed
		}
	}
	
	weight = 500
	
}
	

je_balkfm_ser_serbian_heartlands = {
	icon = "gfx/interface/icons/event_icons/event_serbia.dds"
	
	group = je_group_balkfm_serbia
	
	should_be_pinned_by_default = yes	
	
	immediate = {
	}
	
	complete = {
		owns_entire_state_region = STATE_NORTHERN_SERBIA
		owns_entire_state_region = STATE_SOUTHERN_SERBIA
		owns_entire_state_region = STATE_SKOPIA
	}
	
	on_complete = {
		trigger_event = {
			id = balkfm.481 # Greater Serbia
		}
	}

	weight = 1000

}

je_balkfm_ser_greater_serbia = {
	icon = "gfx/interface/icons/event_icons/event_serbia.dds"
	
	group = je_group_balkfm_serbia
	
	should_be_pinned_by_default = yes	
	
	immediate = {
	}
	
	complete = {
		custom_tooltip = {
			text = je_balkfm_ser_greater_serbia_tt
			hidden_trigger = {
				c:SRPS ?= this
			}
		}
	}
	
	on_complete = {
		trigger_event = {
			id = balkfm.482 # The Rebirth of the Serbian Empire
		}
	}
	
	invalid = {
		hidden_trigger = {
			NOT = { c:SER ?= this }
		}
	}
	
	scripted_button = balkfm_restore_serbia_button

	weight = 1000

}

###################
# BULGARIA FLAVOR #
###################

## BULGARIAN MONARCHISM ##

je_balkfm_bul_battenburg_monarchy = {
	icon = "gfx/interface/icons/event_icons/event_bulgaria_major.dds"
	
	group = je_group_balkfm_bulgaria
	
	should_be_pinned_by_default = yes
	
	immediate = {
		ruler = {
			save_scope_as = balkfm_alex_scope
		}
	}
	
	complete = { # Battenburgs stay in power
		has_law = law_type:law_monarchy
		AND = {
			custom_tooltip = {
				text = battenburg_monarchy_success_tt1
				hidden_trigger = {
					var:balkfm_countercoup_var > 5
				}
			}
			custom_tooltip = {
				text = battenburg_monarchy_success_tt2
				hidden_trigger = {
					has_variable = balkfm_alex_yeeted
				}
			}
		}
	}
	
	on_complete = {
		trigger_event = {
			id = balkfm.508 # Mandate Secured
		}
	}
	
	fail = { # Battenburgs get the boot
		has_law = law_type:law_monarchy
		AND = {
			custom_tooltip = {
				text = battenburg_monarchy_fail_tt1
				hidden_trigger = {
					var:balkfm_countercoup_var <= 5
				}
			}
			custom_tooltip = {
				text = battenburg_monarchy_fail_tt2
				hidden_trigger = {
					has_variable = balkfm_alex_yeeted
				}
			}
		}
	}
	
	on_fail = {
		trigger_event = {
			id = balkfm.520 # An Elected Prince
		}
	}
			
	invalid = { # 404 monarch not found
		NOT = { has_law = law_type:law_monarchy }
	}
	
	on_invalid = {
		set_variable = balkfm_alex_yeeted
	}
	
	current_value = {
		value = var:balkfm_countercoup_var
	}

	goal_add_value = {
		add = 10
	}

	progressbar = yes
	
	on_weekly_pulse = {
		events = {
			balkfm.509 # The August Coup
		}
		effect = {
			set_variable = {
				name = balkfm_countercoup_var
				value = balkfm_battenburg_support_value
			}
			clamp_variable = {
				name = balkfm_countercoup_var
				min = 0
				max = 10
			}
		}
	}
	
	on_monthly_pulse = {
		effect = {
			change_variable = {
				name = balkfm_coup_var
				subtract = 1 # yes this will go below zero for a few months idc
			}
		}
		events = {
			balkfm.501 # Democratic Obstructions
			balkfm.502 # Dissident Publishings	
			balkfm.503 # Tsarist Influence
			balkfm.504 # Russia Demands Subservience
		}
	}
	
	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = balkfm_coup_warning_1
				trigger = {
					var:balkfm_coup_var > 60
				}
			}
			triggered_desc = {
				desc = balkfm_coup_warning_2
				trigger = {
					var:balkfm_coup_var > 30
				}
			}
			triggered_desc = {
				desc = balkfm_coup_warning_3
				trigger = {
					var:balkfm_coup_var > 15
				}
			}
			triggered_desc = {
				desc = balkfm_coup_warning_4
				trigger = {
					var:balkfm_coup_var <= 15
				}
			}
		}
	}
	
	weight = 2000
	
}

je_balkfm_bul_russian_influence = {
	icon = "gfx/interface/icons/event_icons/event_bulgaria_major.dds"
	
	group = je_group_balkfm_bulgaria
	
	should_be_pinned_by_default = yes
	
	complete = {
		custom_tooltip = {
			text = je_balkfm_bul_royal_influence_status
			hidden_trigger = {
				has_variable = balkfm_royal_tour_complete
			}
		}
	}
	
	on_complete = {
		trigger_event = {
			id = balkfm.506 # The Sobolev Regency
		}
	}
	
	invalid = {
		hidden_trigger = {
			has_variable = balkfm_alex_yeeted
		}
	}
	
	weight = 500

}

je_balkfm_bul_railways = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"
	
	group = je_group_balkfm_bulgaria
	
	complete = {
		any_scope_building = {
			is_building_type = building_railway
			building_has_goods_shortage = no
		}
		any_scope_building = {
			has_active_production_method = pm_public_trams
			building_has_goods_shortage = no
		}
	}
	
	on_complete = {
		trigger_event = {
			id = balkfm.514 # The Bulgarian Railways
		}
		custom_tooltip = balkfm_countercoup_add_1
		set_variable = balkfm_railways_built
	}
	
	invalid = {
		NOT = { owns_entire_state_region = STATE_BULGARIA }
	}
	
	scripted_button = balkfm_purchase_rail_button
	
	weight = 200
	
}

je_balkfm_bul_brigandage = {
	icon = "gfx/interface/icons/event_icons/event_fire.dds"
	
	group = je_group_grefm_monarchism
	
	complete = {
		NOT = {
			has_law = law_type:law_no_police
		}
		OR = {
			institution_investment_level = {
				institution = institution_police
				value >= 3
			}
			NOT = {
				any_scope_state = {
					turmoil > 0.20
				}
			}
		}
	}
	
	on_complete = { 
		trigger_event = {
			id = balkfm.511 # The End of the Brigands
		}
		custom_tooltip = balkfm_countercoup_add_1
	}
	
	invalid = {
		custom_tooltip = {
			text = je_balkfm_alex_yeeted_tt
			hidden_trigger = {
				has_variable = balkfm_alex_yeeted
			}
		}
	}
	
	modifiers_while_active = {
		modifier_balkfm_brigandage
	}
	
	weight = 200
	
	transferable = no	
}

## BULGARIAN IRREDENTISM ##

je_balkfm_bul_liberation_of_bulgaria = {
	icon = "gfx/interface/icons/event_icons/event_bulgaria.dds"
	
	group = je_group_balkfm_bulgaria
	
	should_be_pinned_by_default = yes
	
	is_shown_when_inactive = {
		c:BUL ?= this
		NOR = { 
			has_global_variable = eqfm_crisis_var
			has_global_variable = eqfm_berlin_congress_var
			has_variable = balkfm_bulgarian_liberation
		}
		owns_entire_state_region = STATE_BULGARIA
		NOT = { owns_entire_state_region = STATE_NORTHERN_THRACE }
	}
	
	possible = {
		has_technology_researched = nationalism
	}
	
	immediate = {
		set_variable = balkfm_bulgarian_liberation
		trigger_event = {
			id = balkfm.580 # Dreams of the Tsardom
		}
	}
	
	complete = {
		has_law = law_type:law_monarchy
		is_subject = no
		owns_entire_state_region = STATE_BULGARIA
		owns_entire_state_region = STATE_NORTHERN_THRACE		
	}
	
	on_complete = {
		trigger_event = {
			id = balkfm.583 # Bulgarian Irredentism
		}
	}
	
	invalid = {
		hidden_trigger = {
			has_variable = balkfm_weaksauce
		}
	}
	
	scripted_button = balkfm_annex_rumelia_button # balkfm.581
	scripted_button = balkfm_declare_tsardom_button # balkfm.582
	
	weight = 1000
	
}

je_balkfm_bul_greater_bulgaria = {
	icon = "gfx/interface/icons/event_icons/event_bulgaria.dds"
	
	group = je_group_balkfm_bulgaria
	
	should_be_pinned_by_default = yes
	
	immediate = {
	}
	
	complete = {
		has_law = law_type:law_monarchy
		is_subject = no
		owns_entire_state_region = STATE_BULGARIA
		owns_entire_state_region = STATE_NORTHERN_THRACE
		owns_entire_state_region = STATE_WESTERN_THRACE
		owns_entire_state_region = STATE_SKOPIA
		owns_entire_state_region = STATE_MACEDONIA
	}
	
	on_complete = {
		trigger_event = {
			id = balkfm.584 # The Tsardom of Bulgaria
		}
	}
	
	invalid = {
		hidden_trigger = {
			has_variable = balkfm_weaksauce
		}
	}	
	
	weight = 500

}

je_balkfm_bul_greater_bulgaria_alternate = {
	# NOTE: there is a corner case where BUL can be released with both STATE_BULGARIA and STATE_NORTHERN_THRACE, AND the on_actions won't catch it
	# The variable balkfm_bulgarian_liberation combined with the owns_entire_state_region triggers will activate the correct journal entry
	# balkfm.583 can be triggered by either journal, but will add je_balkfm_bul_greater_bulgaria if balkfm_bulgarian_liberation is present
	# Yes, this is hacky and I don't like it either

	icon = "gfx/interface/icons/event_icons/event_bulgaria.dds"
	
	group = je_group_balkfm_bulgaria
	
	should_be_pinned_by_default = yes
	
	is_shown_when_inactive = {
		c:BUL ?= this
		NOR = { 
			has_global_variable = eqfm_crisis_var
			has_global_variable = eqfm_berlin_congress_var
			has_variable = balkfm_bulgarian_liberation
		}
		owns_entire_state_region = STATE_BULGARIA
		owns_entire_state_region = STATE_NORTHERN_THRACE
	}
	
	possible = {
		has_technology_researched = nationalism
	}
	
	immediate = {
		if = {
			limit = {
				NOT = { has_variable = balkfm_bulgarian_liberation }
			}
			set_variable = balkfm_bulgarian_liberation
			trigger_event = {
				id = balkfm.583 # Bulgarian Irredentism
			}
		}
	}
	
	complete = {
		has_law = law_type:law_monarchy
		is_subject = no
		owns_entire_state_region = STATE_BULGARIA
		owns_entire_state_region = STATE_NORTHERN_THRACE
		owns_entire_state_region = STATE_WESTERN_THRACE
		owns_entire_state_region = STATE_SKOPIA
		owns_entire_state_region = STATE_MACEDONIA
	}
	
	on_complete = {
		trigger_event = {
			id = balkfm.584 # The Tsardom of Bulgaria
		}
	}
	
	invalid = {
		hidden_trigger = {
			has_variable = balkfm_weaksauce
		}
	}	
	
	weight = 500

}

je_balkfm_bul_tsardom = {
	icon = "gfx/interface/icons/event_icons/event_bulgaria.dds"
	
	group = je_group_balkfm_bulgaria
	
	should_be_pinned_by_default = yes
	
	complete = {
		has_law = law_type:law_monarchy
		owns_entire_state_region = STATE_BULGARIA
		owns_entire_state_region = STATE_NORTHERN_THRACE
		owns_entire_state_region = STATE_WESTERN_THRACE
		owns_entire_state_region = STATE_SKOPIA
		owns_entire_state_region = STATE_MACEDONIA
		owns_entire_state_region = STATE_NORTHERN_SERBIA
		owns_entire_state_region = STATE_SOUTHERN_SERBIA
		owns_entire_state_region = STATE_ALBANIA
#		owns_entire_state_region = STATE_DOBRUDJA		
	}
	
	on_complete = {
		trigger_event = {
			id = balkfm.585 # The Future of Bulgaria
		}
	}
	
	invalid = {
		hidden_trigger = {
			has_variable = balkfm_weaksauce
		}
	}	
	
	weight = 500

}

je_balkfm_bul_empire = {
	icon = "gfx/interface/icons/event_icons/event_bulgaria.dds"
	
	group = je_group_balkfm_bulgaria
	
	should_be_pinned_by_default = yes
	
	complete = {
		owns_entire_state_region = STATE_BULGARIA
		owns_entire_state_region = STATE_NORTHERN_THRACE
		owns_entire_state_region = STATE_WESTERN_THRACE
		owns_entire_state_region = STATE_WALLACHIA
		owns_entire_state_region = STATE_DOBRUDJA
		owns_entire_state_region = STATE_NORTHERN_SERBIA
		owns_entire_state_region = STATE_SOUTHERN_SERBIA
		owns_entire_state_region = STATE_SKOPIA
		owns_entire_state_region = STATE_MACEDONIA
		owns_entire_state_region = STATE_ALBANIA
		owns_entire_state_region = STATE_MONTENEGRO
		owns_entire_state_region = STATE_BOSNIA
		owns_entire_state_region = STATE_DALMATIA
		owns_entire_state_region = STATE_CROATIA
	}
	
	on_complete = {
		trigger_event = {
			id = balkfm.586 # The Bulgarian Empire
		}
	}
	
	invalid = {
		hidden_trigger = {
			has_variable = balkfm_weaksauce
		}
	}	
	
	weight = 500
}

je_balkfm_bul_megali_idea = { # megali idea minus Attica and the Islands
	icon = "gfx/interface/icons/event_icons/event_eagle.dds"
	
	group = je_group_balkfm_empire
	
	should_be_pinned_by_default = yes
	
	complete = {
		owns_entire_state_region = STATE_BULGARIA
		owns_entire_state_region = STATE_NORTHERN_THRACE
		owns_entire_state_region = STATE_WESTERN_THRACE
		owns_entire_state_region = STATE_SKOPIA
		owns_entire_state_region = STATE_MACEDONIA
		owns_entire_state_region = STATE_ALBANIA
		owns_entire_state_region = STATE_EASTERN_THRACE
		owns_entire_state_region = STATE_THESSALIA
		owns_entire_state_region = STATE_HUDAVENDIGAR
		owns_entire_state_region = STATE_AYDIN		
	}
	
	on_complete = {
		trigger_event = {
			id = balkfm.588 # The Queen of Cities
		}
		set_global_variable = grefm_megali_idea_completed
	}
	
	invalid = {
		hidden_trigger = {
			OR = {
				has_variable = balkfm_weaksauce
				has_variable = byzfm_weaksauce
			}
		}
	}
	
	weight = 500
	
}

je_balkfm_bul_old_bulgaria = {
	icon = "gfx/interface/icons/event_icons/event_eagle.dds"
	
	group = je_group_balkfm_bulgaria
	
	should_be_pinned_by_default = yes
	
	complete = {
	}
	
	on_complete = {
	}
	
	invalid = {
		hidden_trigger = {
			has_variable = balkfm_weaksauce
		}
	}	
	
	weight = 500
	
}

je_balkfm_bul_restoration = { # this copied in from the byzfm side, only difference is the on_complete effect
	icon = "gfx/interface/icons/event_icons/event_eagle.dds"
	
	group = je_group_byzfm_restoration
	
	should_be_pinned_by_default = yes	
	
	immediate = {
	}
	
	complete = {
		has_law = law_type:law_monarchy
		custom_tooltip = {
			text = je_byzfm_restoration_tt1
			hidden_trigger = {
				calc_true_if = {
					amount > 9
					country_or_subject_owns_entire_state_region = STATE_ALBANIA
					country_or_subject_owns_entire_state_region = STATE_BOSNIA
					country_or_subject_owns_entire_state_region = STATE_BULGARIA
					country_or_subject_owns_entire_state_region = STATE_CRETE
					country_or_subject_owns_entire_state_region = STATE_CROATIA
					country_or_subject_owns_entire_state_region = STATE_DALMATIA
					country_or_subject_owns_entire_state_region = STATE_IONIAN_ISLANDS
					country_or_subject_owns_entire_state_region = STATE_MACEDONIA
					country_or_subject_owns_entire_state_region = STATE_MONTENEGRO
					country_or_subject_owns_entire_state_region = STATE_NORTHERN_SERBIA
					country_or_subject_owns_entire_state_region = STATE_NORTHERN_THRACE
					country_or_subject_owns_entire_state_region = STATE_PELOPONNESE
					country_or_subject_owns_entire_state_region = STATE_SKOPIA
					country_or_subject_owns_entire_state_region = STATE_SLAVONIA
					country_or_subject_owns_entire_state_region = STATE_SLOVENIA
					country_or_subject_owns_entire_state_region = STATE_SOUTHERN_SERBIA
					country_or_subject_owns_entire_state_region = STATE_THESSALIA
					country_or_subject_owns_entire_state_region = STATE_WEST_AEGEAN_ISLANDS
					country_or_subject_owns_entire_state_region = STATE_WESTERN_THRACE
				}
			}
		}
		custom_tooltip = {
			text = je_byzfm_restoration_tt2
			hidden_trigger = {
				calc_true_if = {
					amount > 8
					country_or_subject_owns_entire_state_region = STATE_ADANA
					country_or_subject_owns_entire_state_region = STATE_ANKARA
					country_or_subject_owns_entire_state_region = STATE_AYDIN
					country_or_subject_owns_entire_state_region = STATE_CYPRUS
					country_or_subject_owns_entire_state_region = STATE_DIYARBAKIR
					country_or_subject_owns_entire_state_region = STATE_EAST_AEGEAN_ISLANDS
					country_or_subject_owns_entire_state_region = STATE_EASTERN_THRACE
					country_or_subject_owns_entire_state_region = STATE_ERZURUM
					country_or_subject_owns_entire_state_region = STATE_HUDAVENDIGAR
					country_or_subject_owns_entire_state_region = STATE_KASTAMONU
					country_or_subject_owns_entire_state_region = STATE_KONYA
					country_or_subject_owns_entire_state_region = STATE_TRABZON
				}
			}
		}
	}
		
	on_complete = {
		trigger_event = {
			id = balkfm.572 # Nova Roma Constantinopolitana
		}
	}
	
	invalid = {
		has_variable = byzfm_weaksauce
	}

	weight = 10000
}

########################################
# MOLDOVA / WALLACHIA / ROMANIA FLAVOR #
########################################

je_balkfm_rom_regulamentul_organic = {
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"
	
	group = je_group_balkfm_romania
	
	should_be_pinned_by_default = yes
	
	immediate = {
	}
	
	complete = {
		custom_tooltip = {
			text = je_rom_regulamentul_organic_tt1
			hidden_trigger = {
				has_variable = balkfm_regulamentul_legal
			}
		}
		custom_tooltip = {
			text = je_rom_regulamentul_organic_tt2
			hidden_trigger = {
				has_variable = balkfm_regulamentul_economic
			}
		}
		custom_tooltip = {
			text = je_rom_regulamentul_organic_tt3
			hidden_trigger = {
				has_variable = balkfm_regulamentul_social
			}
		}
	}
	
	on_complete = {
		trigger_event = {
			id = balkfm.626 # The Death of Feudalism
		}
		if = {
			limit = {
				ruler = {
					NOR = {
						has_ideology = ideology:ideology_radical
						has_ideology = ideology:ideology_social_democrat
						has_ideology = ideology:ideology_kogalnitchanism
					}
				}
				NOT = { has_variable = balkfm_1848_succeeded }
			}
			trigger_event = {
				id = balkfm.627 # Absolutist Aspirations
				days = 120
			}
		}
	}
	
	fail = {
		custom_tooltip = {
			text = je_rom_regulamentul_organic_tt4
			hidden_trigger = {
				c:ROM ?= this
			}
		}
		custom_tooltip = {
			text = je_rom_regulamentul_organic_tt5
			hidden_trigger = {
				NOT = {
					is_subject_of = c:TUR
				}
			}
		}
	}
	
	on_fail = {
		if = {
			limit = {
				ruler = {
					NOR = {
						has_ideology = ideology:ideology_radical
						has_ideology = ideology:ideology_social_democrat
						has_ideology = ideology:ideology_kogalnitchanism
					}
				}
				NOT = { has_variable = balkfm_1848_succeeded }
			}
			trigger_event = {
				id = balkfm.627 # Absolutist Aspirations
				days = 120
			}
		}
		set_variable = balkfm_regulamentul_completed
	}
	
	invalid = {
		hidden_trigger = {
			has_variable =  balkfm_regulamentul_completed
		}
	}
	
	on_monthly_pulse = {
		events = {
			balkfm.601 # The Petition-Proclamation
			balkfm.611 # Proclamation of Islaz
			balkfm.624 # Electing a Hospodar (MOL)
			balkfm.625 # Electing a Hospodar (WAL)
		}
	}
	
	on_yearly_pulse = {
		effect = {
			if = {
				limit = {
					has_law = law_type:law_monarchy
					NOT = { has_variable = balkfm_1848_rom_var }
				}
				change_variable = {
					name = balkfm_regulamentul_var
					subtract = 1
				}
			}
			else = {
				set_variable = {
					name = balkfm_regulamentul_var
					value = 7
				}
			}
		}
	}
	
	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = je_balkfm_rom_regulamentul_election_tt4
				trigger = {
					has_variable = balkfm_1848_rom_var
				}
			}
			triggered_desc = {
				desc = je_balkfm_rom_regulamentul_election_tt1
				trigger = {
					var:balkfm_regulamentul_var > 1
				}
			}
			triggered_desc = {
				desc = je_balkfm_rom_regulamentul_election_tt2
				trigger = {
					var:balkfm_regulamentul_var = 1
				}
			}
			triggered_desc = {
				desc = je_balkfm_rom_regulamentul_election_tt3
				trigger = {
					var:balkfm_regulamentul_var < 1
				}
			}
		}
	}
	
	weight = 2000
	
}

je_balkfm_rom_legal_modernization = {
	icon = "gfx/interface/icons/event_icons/event_scales.dds"
	
	group = je_group_balkfm_romania
	
	should_be_pinned_by_default = yes
	
	immediate = {
	}
	
	complete = {
		NOT = { has_law = law_type:law_autocracy }
		NOT = { has_law = law_type:law_peasant_levies }
		NOT = { has_law = law_type:law_hereditary_bureaucrats }
	}
	
	on_complete = {
		trigger_event = {
			id = balkfm.621 # Renewed Legal Standards
		}
	}
	
	invalid = {
		hidden_trigger = {
			has_variable = balkfm_regulamentul_completed
		}
	}
	
	weight = 1000
	
}

je_balkfm_rom_economic_modernization = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"
	
	group = je_group_balkfm_romania
	
	should_be_pinned_by_default = yes
	
	immediate = {
	}
	
	complete = {
		NOT = { has_law = law_type:law_traditionalism }
		NOR = { 
			has_law = law_type:law_land_based_taxation
			has_law = law_type:law_consumption_based_taxation
		}
		NOT = { has_law = law_type:law_isolationism }
	}
	
	on_complete = {
		trigger_event = {
			id = balkfm.622 # A Modernized Economy
		}
	}
	
	invalid = {
		hidden_trigger = {
			has_variable = balkfm_regulamentul_completed
		}
	}
	
	weight = 1000
	
}

je_balkfm_rom_social_modernization = {
	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"
	
	group = je_group_balkfm_romania
	
	should_be_pinned_by_default = yes
	
	immediate = {
	}
	
	complete = {
		NOT = { has_law = law_type:law_serfdom }
		has_law = law_type:law_slavery_banned
		NOT = { has_law = law_type:law_no_schools }
	}
	
	on_complete = {
		trigger_event = {
			id = balkfm.623 # Social Equity
		}
	}
	
	invalid = {
		hidden_trigger = {
			has_variable = balkfm_regulamentul_completed
		}
	}
	
	weight = 1000
	
}

je_balkfm_rom_1848 = {
	icon = "gfx/interface/icons/event_icons/event_protest.dds"
	
	group = je_group_balkfm_romania
	
	should_be_pinned_by_default = yes
	
	immediate = {
	}
	
	modifiers_while_active = {
	}
	
	scripted_button = balkfm_mol_intervention_button
	scripted_button = balkfm_wal_intervention_button
	
	complete = {
		custom_tooltip = {
			text = balkfm_1848_rom_success_tt
			hidden_trigger = {
				var:balkfm_1848_rom_var >= 200
			}
		}
	}
	
	on_complete = {
		if = {
			limit = {
				c:MOL ?= this
			}
			trigger_event = {
				id = balkfm.604 # The Convention of Balta Liman
			}
		}
		if = {
			limit = {
				c:WAL ?= this
			}
			trigger_event = {
				id = balkfm.614 # The Convention of Balta Liman
			}
		}
		balkfm_clean_up_1848_variables_effect = yes
	}
	
	fail = {
		custom_tooltip = {
			text = balkfm_1848_rom_fail_tt
			hidden_trigger = {
				var:balkfm_1848_rom_var <= 0
			}
		}
	}
	
	on_fail = {
		if = {
			limit = {
				c:MOL ?= this
			}
			trigger_event = {
				id = balkfm.603 # Kogălniceanu's Revolution
			}
		}
		if = {
			limit = {
				c:WAL ?= this
			}
			trigger_event = {
				id = balkfm.613 # The Sword of the Revolution
			}
		}
		balkfm_clean_up_1848_variables_effect = yes
	}
	
	timeout = 730
	
	on_timeout = {
		if = {
			limit = {
				c:MOL ?= this
			}
			trigger_event = {
				id = balkfm.605 # Constitutional Stalemate
			}
		}
		if = {
			limit = {
				c:WAL ?= this
			}
			trigger_event = {
				id = balkfm.615 # Constitutional Stalemate
			}
		}
		balkfm_clean_up_1848_variables_effect = yes
	}
	
	invalid = {
		has_variable = balkfm_regulamentul_completed
	}
	
	on_invalid = {
		balkfm_clean_up_1848_variables_effect = yes
	}
	
	on_weekly_pulse = {
		effect = {
			balkfm_1848_variables_effect = yes
		}
	}
	
	on_monthly_pulse = {
		effect = {
			balkfm_1848_progress_effect = yes
		}
	}
	
	status_desc = {
		triggered_desc = {
			desc = je_balkfm_rom_1848_status
			trigger = {
				always = yes
			}
		}
	}
	
	weight = 500
	
}

je_balkfm_rom_statutul_dezvoltator = {
	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"
	
	group = je_group_balkfm_romania
	
	should_be_pinned_by_default = yes
	
	immediate = {
	}
	
	complete = {
		# Technically, Cuza's goal was to establish authoritarian rule, but with broad voting rights for the peasantry. This is cannot be represented by Victoria 3's current systems, hence the strange completion requirements
		# TODO I've actually done more research here... this is really more complicated than I made it sound. Unfortunately, research in non-English language sources is slower than I would like; this has been tagged for a rework in the docket once I have more sources
		has_law = law_type:law_monarchy
		OR = {
			has_law = law_type:law_autocracy
			has_law = law_type:law_oligarchy
		}
		NOR = {
			has_law = law_type:law_serfdom
			has_law = law_type:law_tenant_farmers
		}
		scope:journal_entry = { is_goal_complete = yes }
	}
	
	on_complete = {
		trigger_event = {
			id = balkfm.628 # Mandate Secured
		}
		balkfm_clean_up_dezvoltator_variables_effect = yes
	}
	
	timeout = 1825 # You have five years. Cuza had less.
	
	on_timeout = {
		trigger_event = {
			id = balkfm.629 # A Monstrous Coalition
		}
		balkfm_clean_up_dezvoltator_variables_effect = yes
	}
	
	invalid = {
		hidden_trigger = {
			has_variable = balkfm_dezvoltator_completed
		}
	}
	
	on_invalid = {
		balkfm_clean_up_dezvoltator_variables_effect = yes
	}
	
	on_weekly_pulse = {
		effect = {
			balkfm_update_dezvoltator_variables_effect = yes
		}
	}
	
	on_monthly_pulse = {
		effect = {
			balkfm_push_dezvoltator_progress_effect = yes
		}
	}
	
	current_value = {
		value = root.var:balkfm_dezvoltator_var
	}

	goal_add_value = {
		value = 200
	}

	progressbar = yes
	
	weight = 1000
	
}

je_balkfm_rom_1866 = {
	icon = "gfx/interface/icons/event_icons/event_romania.dds"
	
	group = je_group_balkfm_romania
	
	should_be_pinned_by_default = yes
	
	immediate = {
	}
	
	modifiers_while_active = {
		modifier_balkfm_absolutist_intent
	}
	
	fail = {
		custom_tooltip = {
			text = je_balkfm_rom_1866_fail
			hidden_trigger = {
				var:balkfm_1866_var <= 0
			}
		}
		hidden_trigger = {
			NOT = { has_variable = balkfm_1866_technical }
		}
	}
	
	on_fail = {
		if = {
			limit = {
				any_scope_character = {
					has_template = template_balkfm_candiano_alexandru
				}
			}
			trigger_event = {
				id = balkfm.647 # The Republic of Romania
			}
		}
		else = {
			trigger_event = {
				id = balkfm.645 # The Candiano Republic
			}
		}
	}
	
	timeout = 1780 # You just gotta make it five years
	
	on_timeout = {
		trigger_event = {
			id = balkfm.646 # Monarchism Secured
		}
	}
	
	invalid = {
		OR = {
			NOT = { has_law = law_type:law_monarchy }
			has_modifier = modifier_balkfm_ploiesti_succeeded
		}
	}
	
	on_invalid = {
		balkfm_cleanup_1866_variables_effect = yes
	}
	
	on_weekly_pulse = {
		effect = {
			balkfm_calculate_1866_variables_effect = yes
		}
	}
	
	on_monthly_pulse = {
		events = {
			balkfm.642 # A Conspiracy in Ploiești
		}
		effect = {
			balkfm_push_1866_variables_effect = yes
		}
	}
	
	current_value = {
		value = var:balkfm_1866_var
	}

	goal_add_value = {
		value = 100
	}

	progressbar = yes
	
	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = je_balkfm_rom_constitution_1
				trigger = {
					var:balkfm_1866_var >= 60
				}
			}
			triggered_desc = {
				desc = je_balkfm_rom_constitution_2
				trigger = {
					var:balkfm_1866_var >= 30
				}
			}
			triggered_desc = {
				desc = je_balkfm_rom_constitution_3
				trigger = {
					var:balkfm_1866_var < 30
				}
			}
		}
	}

	weight = 100
	
}

je_balkfm_rom_nationalism = {
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"
	
	group = je_group_balkfm_romania
	
	should_be_pinned_by_default = yes
	
	is_shown_when_inactive = {
		NOT = { has_variable = balkfm_romanian_nationalism_started }
		c:ROM ?= this
	}
	
	possible = {
		has_technology_researched = pan-nationalism
		has_technology_researched = philosophical_pragmatism
	}
	
	immediate = {
		trigger_event = {
			id = balkfm.670 # Forms Without Substance
		}
		balkfm_initialize_protochronism_effect = yes
	}
	
	scripted_button = balkfm_support_junimism_button
	scripted_button = balkfm_support_dacianism_button
	
	complete = {
		OR = {
			has_law = law_type:law_public_schools
			has_law = law_type:law_private_schools
		}
		institution_investment_level = {
			institution = institution_schools
			value >= 4
		}
		literacy_rate >= 0.50
		custom_tooltip = {
			text = je_balkfm_rom_nationalism_tt1
			hidden_trigger = {
				var:balkfm_junimism_var != var:balkfm_dacianism_var
				OR = {
					var:balkfm_junimism_var >= 50
					var:balkfm_dacianism_var >= 50
				}
			}
		}
	}
	
	on_complete = {
		trigger_event = {
			id = balkfm.672 # A Romanian Identity
		}
	}
	
	on_weekly_pulse = {
		effect = {
			balkfm_calculate_protochronism_effect = yes
		}
	}
	
	on_monthly_pulse = {
		random_events = {
		}
		effect = {
			balkfm_push_protochronism_effect = yes
		}
	}
	
	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = je_balkfm_rom_nationalism_tt2
				trigger = {
					var:balkfm_junimism_var > var:balkfm_dacianism_var
				}
			}
			triggered_desc = {
				desc = je_balkfm_rom_nationalism_tt3
				trigger = {
					var:balkfm_junimism_var < var:balkfm_dacianism_var
				}
			}
			triggered_desc = {
				desc = je_balkfm_rom_nationalism_tt4
				trigger = {
					var:balkfm_junimism_var = var:balkfm_dacianism_var
				}
			}
		}
	}

	weight = 500
	
}

je_balkfm_rom_united_principalities = { # this journal integrates all vanilla unification content into one journal entry
	icon = "gfx/interface/icons/event_icons/event_romania.dds"
	
	group = je_group_balkfm_romania
	
	should_be_pinned_by_default = yes
	
    is_shown_when_inactive = {
		country_has_primary_culture = cu:romanian
    }
	
    possible = {
        has_technology_researched = nationalism
        NOT = {
            any_overlord_or_above ?= { # Can't unite the principalities if you're already the lesser in a pact with another Romanian state
                country_has_primary_culture = cu:romanian
            }
        }
    }	
	
	immediate = {
	}
	
	complete = {
		custom_tooltip = {
			text = balkfm_has_formed_rom_tt
			hidden_trigger = {
				c:ROM ?= this
			}
		}
	}
	
	on_complete = {
	}
	
    fail = {
        OR = {
            custom_tooltip = {
                text = balkfm_no_other_romanians_tt
				hidden_trigger = {
					NOT = {
						any_country = {
							NOT = { this = ROOT }
							country_has_primary_culture = cu:romanian 
						}
					}
				}
            }
            custom_tooltip = {
                text = balkfm_rom_formed_tt
				hidden_trigger = {
					AND = {
						exists = c:ROM
						NOT = { c:ROM ?= this }
					}
				}
            }
			custom_tooltip = {
				text = balkfm_rom_lost_union_tt
				hidden_trigger = {
					any_country = {
						AND = {
							has_variable = romania_union_partner
							NOT = { is_subject_of = ROOT }
						}
					}
				}
			}
        }
    }
	
    on_fail = {
        hidden_effect = {
            remove_variable = ROM_united_principality
        }
    }
	
    on_monthly_pulse = {
        effect = {
			if = {
				limit = {
					has_variable = romanian_union_var
				}
				change_variable = {
					name = romanian_union_var
					add = 1
				}
				clamp_variable = {
					name = romanian_union_var
					min = 0
					max = 120
				}
			}
        }
    }
	
	scripted_button = balkfm_unite_principalities_button
	scripted_button = balkfm_all_for_one_button
	scripted_button = balkfm_bessarabian_retrocession_button
	scripted_button = balkfm_marea_unire_button

    # timeout = 0 # no timeout. Romania is eternal. -- this comment stays. Toți în unu.

    weight = 1000
	
}

je_balkfm_rom_greater_romania = {
	icon = "gfx/interface/icons/event_icons/event_romania.dds"
	
	group = je_group_balkfm_romania
	
	should_be_pinned_by_default = yes
	
    is_shown_when_inactive = {
		c:ROM ?= this
		calc_true_if = {
			amount >= 6
			NOT = { owns_entire_state_region = STATE_BANAT }
			NOT = { owns_entire_state_region = STATE_BESSARABIA }
			NOT = { owns_entire_state_region = STATE_BEKES }
			NOT = { owns_entire_state_region = STATE_MOLDAVIA }
			NOT = { owns_entire_state_region = STATE_NORTHERN_TRANSYLVANIA }
			NOT = { owns_entire_state_region = STATE_SOUTHERN_TRANSYLVANIA }
			NOT = { owns_entire_state_region = STATE_WALLACHIA }
		}
    }
	
    possible = {
        has_technology_researched = nationalism
		is_subject = no
    }
	
	immediate = {
		trigger_event = {
			id = balkfm.688 # The Greater Romanian Lands
		}
	}
	
	complete = {
		is_subject = no
		calc_true_if = {
			amount >= 6
			owns_entire_state_region = STATE_BANAT
			owns_entire_state_region = STATE_BESSARABIA
			owns_entire_state_region = STATE_BEKES
			owns_entire_state_region = STATE_MOLDAVIA
			owns_entire_state_region = STATE_NORTHERN_TRANSYLVANIA
			owns_entire_state_region = STATE_SOUTHERN_TRANSYLVANIA
			owns_entire_state_region = STATE_WALLACHIA
		}
	}
	
	on_complete = {
		trigger_event = {
			id = balkfm.689 # The Reunification of Romania
		}
	}
	
	scripted_button = balkfm_bessarabian_retrocession_button
	scripted_button = balkfm_marea_unire_button
	scripted_button = balkfm_romanian_agitation_button

    weight = 1000
	
}

je_balkfm_peles_castle = {
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"
	
	group = je_group_balkfm_romania
	
	should_be_pinned_by_default = yes	
	
	immediate = {
		balkfm_calculate_construction_effect = yes
	}
	
	scripted_button = balkfm_construction_0_button
	scripted_button = balkfm_construction_1_button
	scripted_button = balkfm_construction_2_button
	scripted_button = balkfm_construction_3_button
	
	complete = {
		scope:journal_entry = { is_goal_complete = yes }
	}
	
	on_complete = {
		trigger_event = {
			id = balkfm.661 # A Royal Estate
		}
	}
	
	fail = {
		NOR = {
			owns_entire_state_region = STATE_WALLACHIA
			has_law = law_type:law_monarchy
		}
	}

	on_fail = {
		balkfm_clean_up_construction_effect = yes
	}
	
	on_weekly_pulse = {
		effect = {
			balkfm_calculate_construction_effect = yes
			balkfm_push_construction_effect = yes
		}
	}

	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = je_balkfm_construction_4
				trigger = {
					scope:journal_entry = { 
						is_goal_complete = yes 
					}
				}
			}
			triggered_desc = {
				desc = je_balkfm_construction_0
				trigger = {
					NOR = {
						has_modifier = modifier_balkfm_construction_1
						has_modifier = modifier_balkfm_construction_2
						has_modifier = modifier_balkfm_construction_3
					}
				}
			}
			triggered_desc = {
				desc = je_balkfm_construction_3
				trigger = {
					has_modifier = modifier_balkfm_construction_3
				}
			}
			triggered_desc = {
				desc = je_balkfm_construction_2
				trigger = {
					has_modifier = modifier_balkfm_construction_2
				}
			}
			triggered_desc = {
				desc = je_balkfm_construction_1
				trigger = {
					has_modifier = modifier_balkfm_construction_1
				}
			}
		}
	}
	
	current_value = {
		value = var:balkfm_construction_var
	}

	goal_add_value = {
		value = 2500 # Monument construction cost
	}

	progressbar = yes

	weight = 100
	
}	

#################
# BOSNIA FLAVOR #
#################



###########
# ALBANIA #
###########


######################
# SLOVENIA / CROATIA #
######################

je_balkfm_triune_restoration = {
	icon = "gfx/interface/icons/event_icons/waving_flag.dds"
	
	group = je_group_balkfm_triune
	
	should_be_pinned_by_default = yes
	
	immediate = {
	}
	
	complete = {
		custom_tooltip = {
			text = je_balkfm_triune_restoration_tt
			hidden_trigger = {
				c:TRIU ?= this
			}
		}
		has_technology_researched = pan-nationalism
	}
	
	on_complete = {
		trigger_event = {
			id = balkfm.981 # Restoration of the Triune Kingdom
		}
	}
	
	invalid = {
		hidden_trigger = {
			OR = {
				has_variable = balkfm_weaksauce
				has_global_variable = has_formed_triu
			}
		}
	}
	
	scripted_button = balkfm_proclaim_triune_button
	
	weight = 500
	
}